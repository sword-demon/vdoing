---
title: 静态链接
date: 2022-04-24 22:20:37
permalink: /pages/c7c10b/
categories:
    - 后端
    - Go
    - go核心
tags:
    - null
---

## 静态链接

```bash
[root@jb51 core]# vim demo1.go
[root@jb51 core]# go build demo1.go
[root@jb51 core]# ls
demo1  demo1.go
[root@jb51 core]# file demo1
demo1: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, not stripped
```

可以看的出来，编译过后的`demo1`文件，是一个可执行文件，而且是静态链接的。而我们熟悉的`c`语言通过`gcc`编译之后是动态链接的。`c`语言如何实现静态链接呢？

`b.c`

```c
int x = 300;

int test(int v) {
    return v;
}
```

`a.c`

```c
extern int x;

int main()
{
    test(x);
    return 0;
}
```

```bash
[root@jb51 core]# gcc -c b.c -o b.o
[root@jb51 core]# gcc -c a.c -o a.o
[root@jb51 core]# ld a.o b.o -e main -o ab
```

先编译 ，得到`.o`目标文件，`ld`将两个`.o`进行链接，并指定入口函数为`main`，得到一个`ab`文件，`ld`这里是一个静态链接器，可以使用命令`man ld`

```bash
[root@jb51 core]# file ab
ab: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, not stripped
```

此时通过`ld`之后的`ab`就是静态链接。
