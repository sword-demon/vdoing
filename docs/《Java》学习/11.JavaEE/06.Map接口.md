---
title: Map接口
date: 2021-11-21 22:05:45
permalink: /pages/178637/
categories:
    - 《Java》学习
    - JavaEE
tags:
    - null
---

## Map 接口

`Map<K,V>`

类型参数：

`K`：此映射所维护的键的类型

`V`：此映射值的类型

<!-- more -->

---

```java
boolean containsKey(Object key);

boolean containsValue(Object value);

Set<Map.Entry<K,V>> entrySet();

V get(Object key);

boolean isEmpty();

V put(K key, V value);

void putAll(Map<? extends K,? extends V> m);

// etc...
```

---

特点：

-   无序
-   唯一

---

常用方法：

```java
import java.util.Collection;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

public class Demo01 {
    public static void main(String[] args) {
        Map<String, Integer> map = new HashMap<>();
        map.put("年龄", 19);
        map.put("身份证号", 2132131);
        map.put("学号", 20);
        map.put("学号", 21);

        // 移除
        // map.remove("学号");

        // 是否包含key和value
        System.out.println(map.containsKey("学号"));
        System.out.println(map.containsValue(21));

        System.out.println(map.size());
        System.out.println(map);

        System.out.println(map.isEmpty()); // false 是否为空

        // 根据key获取value
        System.out.println(map.get("年龄"));

        System.out.println("----------------------->");

        // 对集合中的key进行遍历查看
        Set<String> set = map.keySet();
        for (String s : set) {
            System.out.println(s);
        }

        System.out.println("----------------------->");

        // 获取集合中的所有值方式1
        Collection<Integer> values = map.values();
        for (Integer value : values) {
            System.out.println(value);
        }

        System.out.println("----------------------->");

        // 获取集合中的所有的值方式2
        for (String s : set) {
            System.out.println(map.get(s));
        }

        System.out.println("----------------------->");
        // 获取集合中的所有值方式3
        Set<Map.Entry<String, Integer>> entries = map.entrySet();
        for (Map.Entry<String, Integer> entry : entries) {
            // 得到一对数据
//            System.out.println(entry);
            System.out.println(entry.getKey() + "---" + entry.getValue());
        }
    }

```

## 实现类

![Map接口的实现类](https://gitee.com/wxvirus/img/raw/master/img/20211121205920.png)

-   HashMap JDK1.2 效率高 线程不安全 key 可以存入空值，null 值也得遵循唯一的特点
-   Hashtable JDK1.0 效率低 线程安全

![Map接口系列](https://gitee.com/wxvirus/img/raw/master/img/20211121211149.png)

`TreeMap`

```java
import java.util.Map;
import java.util.TreeMap;

public class Demo02 {

    public static void main(String[] args) {
        Map<String, Integer> map = new TreeMap<>();
        map.put("bilibili", 20);
        map.put("ailibili", 202312);
        map.put("cilibili", 20213);
        map.put("dilibili", 2232);

        System.out.println(map.size());
        System.out.println(map);
    }
}
```

## HashMap

```java
import java.util.HashMap;

public class Demo03 {
    public static void main(String[] args) {
        HashMap<Integer, String> hm = new HashMap<>();
        // 存储数据
        System.out.println(hm.put(1, "无解"));
        System.out.println(hm.put(2, "virus"));
        System.out.println(hm.put(3, "hash"));
        System.out.println(hm.put(4, "map"));
        System.out.println(hm.put(2, "啦啦啦"));

        System.out.println(hm);
        System.out.println(hm.size());
    }
}

```

```bash
null
null
null
null
virus
{1=无解, 2=啦啦啦, 3=hash, 4=map}
4
```

简单原理图

![简单原理图](https://gitee.com/wxvirus/img/raw/master/img/20211122235050.png)

-   JDK1.7 之前相同 key 的元素是使用链表的头插法
-   JDK1.8 之后使用的是链表的尾插法
-   俗称：**7 上 8 下**

在底层数组中存储的其实是一个封装好的`Entry`类的对象，而底层可见的就是一个`Entry[]`数组。
