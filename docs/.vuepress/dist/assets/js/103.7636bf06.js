(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{546:function(v,_,l){"use strict";l.r(_);var i=l(16),t=Object(i.a)({},(function(){var v=this,_=v.$createElement,l=v._self._c||_;return l("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[l("h2",{attrs:{id:"秒杀的目标与挑战"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#秒杀的目标与挑战"}},[v._v("#")]),v._v(" 秒杀的目标与挑战")]),v._v(" "),l("ul",[l("li",[v._v("系统目标\n"),l("ul",[l("li",[v._v("C 端目标\n"),l("ul",[l("li",[v._v("体验目标\n"),l("ul",[l("li",[v._v("页面操作流畅")]),v._v(" "),l("li",[v._v("无白屏")])])]),v._v(" "),l("li",[v._v("稳定性目标\n"),l("ul",[l("li",[v._v("接口稳定")]),v._v(" "),l("li",[v._v("始终一致")]),v._v(" "),l("li",[v._v("数据一致")])])])])]),v._v(" "),l("li",[v._v("B 端目标\n"),l("ul",[l("li",[v._v("价格隔离")]),v._v(" "),l("li",[v._v("不能超卖")]),v._v(" "),l("li",[v._v("活动保障")])])]),v._v(" "),l("li",[v._v("平台目标\n"),l("ul",[l("li",[v._v("流量隔离")]),v._v(" "),l("li",[v._v("系统稳定")]),v._v(" "),l("li",[v._v("风险隔离")])])])])]),v._v(" "),l("li",[v._v("目标特点\n"),l("ul",[l("li",[v._v("瞬时大流量")]),v._v(" "),l("li",[v._v("高并发")]),v._v(" "),l("li",[v._v("高可用")]),v._v(" "),l("li",[v._v("高性能")]),v._v(" "),l("li",[v._v("读多写少")]),v._v(" "),l("li",[v._v("一致性")])])]),v._v(" "),l("li",[v._v("技术挑战\n"),l("ul",[l("li",[v._v("前端\n"),l("ul",[l("li",[v._v("如何保证资源的加载速度")]),v._v(" "),l("li",[v._v("如何打散流量")]),v._v(" "),l("li",[v._v("如何保持始终一致性")])])]),v._v(" "),l("li",[v._v("后端\n"),l("ul",[l("li",[v._v("如何保证系统高可用")]),v._v(" "),l("li",[v._v("如何削峰限流")]),v._v(" "),l("li",[v._v("如何保证系统的响应速度")]),v._v(" "),l("li",[v._v("如何保证秒杀品不被超卖\n"),l("ul",[l("li",[v._v("库存扣减设计")])])]),v._v(" "),l("li",[v._v("如何隔离流量和风险")]),v._v(" "),l("li",[v._v("如何设计有效的缓存策略")]),v._v(" "),l("li",[v._v("如何对付黄牛和秒杀器")])])]),v._v(" "),l("li",[v._v("中间件\n"),l("ul",[l("li",[v._v("如何应对突增的流量")]),v._v(" "),l("li",[v._v("如何监控各环节状态和数据")])])])])])]),v._v(" "),l("h2",{attrs:{id:"秒杀系统的目标"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#秒杀系统的目标"}},[v._v("#")]),v._v(" 秒杀系统的目标")]),v._v(" "),l("blockquote",[l("p",[v._v("通常，我们把秒杀看做是高并发的典型场景，是"),l("strong",[v._v("大量请求")]),v._v("对"),l("strong",[v._v("有限资源")]),v._v("的"),l("strong",[v._v("瞬时争夺")]),v._v("，是用户对系统的发起的压力测试。然而，这话其实并不完全准确，秒杀与高并发的关系可疏可密。")]),v._v(" "),l("p",[v._v("因为，秒杀系统的核心目标是实现"),l("strong",[v._v("大流量对优先资源的瞬时争夺")]),v._v("。围绕这个核心目标，我们可以进一步将秒杀拆解为 3 个目标，分别是"),l("em",[v._v("C 端目标、B 端目标和平台目标")])])]),v._v(" "),l("h3",{attrs:{id:"c-端目标"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#c-端目标"}},[v._v("#")]),v._v(" C 端目标")]),v._v(" "),l("p",[l("strong",[v._v("C 端用户是上帝")]),v._v("。在秒杀过程中上帝的体验是否顺畅、数据是否无误至关重要，所以我们要首先保障用户的体验。")]),v._v(" "),l("p",[v._v("对于大部分用户来说，体验是最直观的感受，突然的卡顿和白屏或者 404 或者 502 是糟糕的体验，会导致用户逐渐失去对我们的眷顾，甚至对我们的技术能力产生怀疑。而能否秒杀成功倒是其次，大部分用户在秒杀时都默认自己抢不到，他们不会因为抢不到而大为恼火，反而会因为，页面失误导致自己连参与的机会都没有会大失所望。")]),v._v(" "),l("h3",{attrs:{id:"b-端目标"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#b-端目标"}},[v._v("#")]),v._v(" B 端目标")]),v._v(" "),l("p",[l("strong",[v._v("如果说 C 端用户是上帝，那么 B 端用户就是金主")]),v._v("，对于金主而言，在"),l("strong",[v._v("价格、数量和资金")]),v._v("上都不能出错。")]),v._v(" "),l("p",[v._v("首先是价格，秒杀品的价格一般有别于其他渠道的商品，哪怕是同样的商品，价格也会存在差异，所以在价格上我们要做到渠道隔离。其次是数量，也就是不能"),l("strong",[v._v("超卖")]),v._v("，超卖的后果很严重，会直接造成资损或服务无法兑现，客诉会接踵而至，甚至引发舆情。")]),v._v(" "),l("p",[v._v("最后是资金安全，除了超卖会导致资损外，还有一种情况也会造成资损，那就是"),l("strong",[v._v("恶意下单")]),v._v("。如果你的竞争对手或者某些恶意用户在瞬间下单了你的所有商品，但就是不付款，这种情况会导致 B 端因在秒杀活动中无法进账而引发资损，不仅活动前期的推广费用、活动费用无法回收，可能还会导致更为严重的连锁反应。")]),v._v(" "),l("h3",{attrs:{id:"平台目标"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#平台目标"}},[v._v("#")]),v._v(" 平台目标")]),v._v(" "),l("p",[v._v("平台的目标肯定是前面 2 个都得顺利实现，但是不能在保证了前面 2 个都顺利了，而导致整个平台的其他业务 崩溃，否则就一败涂地。")]),v._v(" "),l("p",[v._v("从秒杀系统的目标来看，可以总结出几个秒杀过程中的明显的特征：")]),v._v(" "),l("ul",[l("li",[v._v("瞬时大流量：从秒杀开始的前期，流量会逐渐聚集，在秒杀开始的一瞬间，流量会瞬间涌入，监控图上也会体现出瞬间跳起，竖起一根芒刺")]),v._v(" "),l("li",[v._v("高并发：虽然大流量并不一定意味着高并发，但在秒杀场景中，大流量将直接导致高并发。高并发系统的设计与普通系统的设计有着很多不同，即使提供同样的服务，两者在设计上也会有着天壤之别")]),v._v(" "),l("li",[v._v("高可用：在任何情况下，我们都不能让系统宕机，不能让 C 端用户失望。")]),v._v(" "),l("li",[v._v("高性能：即使在洪峰流量下，也要保证 C 端用户的流畅体验。")]),v._v(" "),l("li",[v._v("读多写少：大流量是”读“，只有在并发中竞争成功的才会涉及到”写“。然而，成功者毕竟是极少数，所以”读多写少“也是一个关键性特征。")]),v._v(" "),l("li",[v._v("数据强一致性：数据一致性体现在两个方面，一是所有 C 端用户所看到的秒杀开始时间、库存等信息一致，二是最终成单数量与库存一致，不可以存在超卖的情况。")])])])}),[],!1,null,null,null);_.default=t.exports}}]);