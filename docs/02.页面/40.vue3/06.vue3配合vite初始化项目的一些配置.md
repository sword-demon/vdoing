---
title: vue3配合vite初始化项目的一些配置
date: 2023-07-26 00:35:58
permalink: /pages/3cd1cd/
categories:
    - 页面
    - vue3
tags:
    - createAndConfig
---

# Vue 3 + TypeScript + Vite 项目创建和配置代码风格和 eslint

## 初始化项目

```bash
pnpm create vite
```

## 解决找不到`./App.vue`问题

在`src/vite-env.d.ts`里加入以下代码

```typescript
/// <reference types="vite/client" />

declare module '*.vue' {
    import { DefineComponent } from 'vue';
    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/ban-types
    const component: DefineComponent<{}, {}, any>;
    export default component;
}
```

## 配置运行自动打开浏览器

`package.json`

```json
{
    "scripts": {
        "dev": "vite --open",
        "build": "vue-tsc && vite build",
        "preview": "vite preview"
    }
}
```

## eslint 配置

安装`eslint`

```bash
pnpm i eslint -D
```

生成配置文件`eslint.cjs`

```bash
npx eslint --init
You can also run this command directly using 'npm init @eslint/config'.
Need to install the following packages:
  @eslint/create-config
Ok to proceed? (y) y
✔ How would you like to use ESLint? · problems
✔ What type of modules does your project use? · esm
✔ Which framework does your project use? · vue
✔ Does your project use TypeScript? · No / Yes
✔ Where does your code run? · browser
✔ What format do you want your config file to be in? · JavaScript
The config that you've selected requires the following dependencies:

@typescript-eslint/eslint-plugin@latest eslint-plugin-vue@latest @typescript-eslint/parser@latest
✔ Would you like to install them now? · No / Yes
✔ Which package manager do you want to use? · pnpm
```

## 安装插件

```bash
p i -D eslint-plugin-import eslint-plugin-vu
e eslint-plugin-node eslint-plugin-prettier eslint-config-prettier eslint-plugin
-node @babel/eslint-parser
```

新建`eslint`忽略文件`.eslintignore`

```
dist
node_modules

```

运行脚本修改

```json
{
    "script": {
        "lint": "eslint src",
        "fix": "eslint src --fix"
    }
}
```

## 配置 prettier

安装依赖包

```bash
pnpm install -D eslint-plugin-prettier prettier eslint-config-prettier
```

`.prettierrc.json`添加规则

```json
{
    "singleQuote": true,
    "semi": false,
    "bracketSpacing": true,
    "htmlWhitespaceSensitivity": "ignore",
    "endOfLine": "auto",
    "trailingComma": "all",
    "tabWidth": 2
}
```

`.prettierignore`忽略文件

```
/dist/*
/html/*
.local
/node_modules/**
**/*.sh
/public/*

```

使用命令`pnpm run lint`检测，使用`pnpm run fix`解决格式问题

## 配置 stylelint

> css 的 lint 工具，检查 css 的语法错误和不合理的写法

```bash
pnpm add sass sass-loader stylelint postcss postcss-scss postcss-html stylelint-config-prettier stylelint-config-recess-order stylelint-config-recommended-scss stylelint-config-standard stylelint-config-standard-vue stylelint-scss stylelint-order stylelint-config-standard-scss -D
```

配置`.stylelintrc.cjs`

```js
// @see https://stylelint.bootcss.com/

module.exports = {
    extends: [
        'stylelint-config-standard', // 配置stylelint拓展插件
        'stylelint-config-html/vue', // 配置 vue 中 template 样式格式化
        'stylelint-config-standard-scss', // 配置stylelint scss插件
        'stylelint-config-recommended-vue/scss', // 配置 vue 中 scss 样式格式化
        'stylelint-config-recess-order', // 配置stylelint css属性书写顺序插件,
        'stylelint-config-prettier', // 配置stylelint和prettier兼容
    ],
    overrides: [
        {
            files: ['**/*.(scss|css|vue|html)'],
            customSyntax: 'postcss-scss',
        },
        {
            files: ['**/*.(html|vue)'],
            customSyntax: 'postcss-html',
        },
    ],
    ignoreFiles: ['**/*.js', '**/*.jsx', '**/*.tsx', '**/*.ts', '**/*.json', '**/*.md', '**/*.yaml'],
    /**
     * null  => 关闭该规则
     * always => 必须
     */
    rules: {
        'value-keyword-case': null, // 在 css 中使用 v-bind，不报错
        'no-descending-specificity': null, // 禁止在具有较高优先级的选择器后出现被其覆盖的较低优先级的选择器
        'function-url-quotes': 'always', // 要求或禁止 URL 的引号 "always(必须加上引号)"|"never(没有引号)"
        'no-empty-source': null, // 关闭禁止空源码
        'selector-class-pattern': null, // 关闭强制选择器类名的格式
        'property-no-unknown': null, // 禁止未知的属性(true 为不允许)
        'block-opening-brace-space-before': 'always', //大括号之前必须有一个空格或不能有空白符
        'value-no-vendor-prefix': null, // 关闭 属性值前缀 --webkit-box
        'property-no-vendor-prefix': null, // 关闭 属性前缀 -webkit-mask
        'selector-pseudo-class-no-unknown': [
            // 不允许未知的选择器
            true,
            {
                ignorePseudoClasses: ['global', 'v-deep', 'deep'], // 忽略属性，修改element默认样式的时候能使用到
            },
        ],
    },
};
```

`.stylelintignore`忽略文件

```
/node_modules/*
/dist/*
/html/*
/public/*

```

配置脚本运行

```json
{
    "scripts": {
        "lint:style": "stylelint src/**/*.{css,scss,vue} --cache --fix"
    }
}
```

最后配置统一的`prettier`来格式化我们的 js 和 css 以及 html 代码

```json
{
    "scripts": {
        "dev": "vite --open",
        "build": "vue-tsc && vite build",
        "preview": "vite preview",
        "lint": "eslint src",
        "fix": "eslint src --fix",
        "format": "prettier --write \"./**/*.{html,vue,ts,js,json,md}\"",
        "lint:eslint": "eslint src/**/*.{ts,vue} --cache --fix",
        "lint:style": "stylelint src/**/*.{css,scss,vue} --cache --fix"
    }
}
```
