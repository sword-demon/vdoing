<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>后台布局开发 | wxvirus</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/icon.png">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="年轻的后端，学习ing">
    <meta name="无解" content="个人学习博客和笔记">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.3aa0083c.css" as="style"><link rel="preload" href="/assets/js/app.c8a5ac2c.js" as="script"><link rel="preload" href="/assets/js/2.5e51705b.js" as="script"><link rel="preload" href="/assets/js/201.724b8283.js" as="script"><link rel="prefetch" href="/assets/js/10.a235be77.js"><link rel="prefetch" href="/assets/js/100.cb9b7372.js"><link rel="prefetch" href="/assets/js/101.9da1f3ca.js"><link rel="prefetch" href="/assets/js/102.0366d1c2.js"><link rel="prefetch" href="/assets/js/103.c248892b.js"><link rel="prefetch" href="/assets/js/104.cd703b40.js"><link rel="prefetch" href="/assets/js/105.f72fd73a.js"><link rel="prefetch" href="/assets/js/106.52c1bede.js"><link rel="prefetch" href="/assets/js/107.13b99c76.js"><link rel="prefetch" href="/assets/js/108.d98bcdfe.js"><link rel="prefetch" href="/assets/js/109.29c16def.js"><link rel="prefetch" href="/assets/js/11.8c787e23.js"><link rel="prefetch" href="/assets/js/110.73d369b4.js"><link rel="prefetch" href="/assets/js/111.2b9a80e4.js"><link rel="prefetch" href="/assets/js/112.2b3ee342.js"><link rel="prefetch" href="/assets/js/113.5e1c4291.js"><link rel="prefetch" href="/assets/js/114.e2237b92.js"><link rel="prefetch" href="/assets/js/115.c487e9f7.js"><link rel="prefetch" href="/assets/js/116.b22d714b.js"><link rel="prefetch" href="/assets/js/117.3b8a8412.js"><link rel="prefetch" href="/assets/js/118.21aa54e5.js"><link rel="prefetch" href="/assets/js/119.21f48134.js"><link rel="prefetch" href="/assets/js/12.df9e5370.js"><link rel="prefetch" href="/assets/js/120.6998b952.js"><link rel="prefetch" href="/assets/js/121.e09732e8.js"><link rel="prefetch" href="/assets/js/122.cfc354a3.js"><link rel="prefetch" href="/assets/js/123.42e6c426.js"><link rel="prefetch" href="/assets/js/124.7b738cf5.js"><link rel="prefetch" href="/assets/js/125.010a3f05.js"><link rel="prefetch" href="/assets/js/126.49fc679b.js"><link rel="prefetch" href="/assets/js/127.52ad351b.js"><link rel="prefetch" href="/assets/js/128.003b7965.js"><link rel="prefetch" href="/assets/js/129.5c8b7d4b.js"><link rel="prefetch" href="/assets/js/13.f64fd112.js"><link rel="prefetch" href="/assets/js/130.d2720cff.js"><link rel="prefetch" href="/assets/js/131.437901e2.js"><link rel="prefetch" href="/assets/js/132.6bfe656f.js"><link rel="prefetch" href="/assets/js/133.1729e8d8.js"><link rel="prefetch" href="/assets/js/134.8e9c86ed.js"><link rel="prefetch" href="/assets/js/135.d01488ae.js"><link rel="prefetch" href="/assets/js/136.225dc72b.js"><link rel="prefetch" href="/assets/js/137.91d4d703.js"><link rel="prefetch" href="/assets/js/138.77052656.js"><link rel="prefetch" href="/assets/js/139.a86ca106.js"><link rel="prefetch" href="/assets/js/14.392780e3.js"><link rel="prefetch" href="/assets/js/140.c08e703d.js"><link rel="prefetch" href="/assets/js/141.f403c12e.js"><link rel="prefetch" href="/assets/js/142.921d8261.js"><link rel="prefetch" href="/assets/js/143.1096944d.js"><link rel="prefetch" href="/assets/js/144.248ac007.js"><link rel="prefetch" href="/assets/js/145.3e776ae9.js"><link rel="prefetch" href="/assets/js/146.653ee739.js"><link rel="prefetch" href="/assets/js/147.9715a60c.js"><link rel="prefetch" href="/assets/js/148.5fddba4e.js"><link rel="prefetch" href="/assets/js/149.5b10ab1f.js"><link rel="prefetch" href="/assets/js/15.7aba336d.js"><link rel="prefetch" href="/assets/js/150.f7b528d7.js"><link rel="prefetch" href="/assets/js/151.d0726285.js"><link rel="prefetch" href="/assets/js/152.3c57927f.js"><link rel="prefetch" href="/assets/js/153.de16f6ae.js"><link rel="prefetch" href="/assets/js/154.ad7d998f.js"><link rel="prefetch" href="/assets/js/155.1de5d52c.js"><link rel="prefetch" href="/assets/js/156.d1765a03.js"><link rel="prefetch" href="/assets/js/157.a54c4671.js"><link rel="prefetch" href="/assets/js/158.f2590c01.js"><link rel="prefetch" href="/assets/js/159.56d7454d.js"><link rel="prefetch" href="/assets/js/16.696bad88.js"><link rel="prefetch" href="/assets/js/160.a4b7405b.js"><link rel="prefetch" href="/assets/js/161.b4ad9951.js"><link rel="prefetch" href="/assets/js/162.b81f6845.js"><link rel="prefetch" href="/assets/js/163.b9973809.js"><link rel="prefetch" href="/assets/js/164.9592b673.js"><link rel="prefetch" href="/assets/js/165.ed64b60f.js"><link rel="prefetch" href="/assets/js/166.af64e45a.js"><link rel="prefetch" href="/assets/js/167.623723e4.js"><link rel="prefetch" href="/assets/js/168.cd9b05f8.js"><link rel="prefetch" href="/assets/js/169.d7d7c8e4.js"><link rel="prefetch" href="/assets/js/17.090aa168.js"><link rel="prefetch" href="/assets/js/170.0c67ce3f.js"><link rel="prefetch" href="/assets/js/171.0d9dbc52.js"><link rel="prefetch" href="/assets/js/172.49fec21a.js"><link rel="prefetch" href="/assets/js/173.ee0aa517.js"><link rel="prefetch" href="/assets/js/174.86eb7797.js"><link rel="prefetch" href="/assets/js/175.01bd1025.js"><link rel="prefetch" href="/assets/js/176.1e1df747.js"><link rel="prefetch" href="/assets/js/177.b721dfc0.js"><link rel="prefetch" href="/assets/js/178.7199d262.js"><link rel="prefetch" href="/assets/js/179.24790b75.js"><link rel="prefetch" href="/assets/js/18.f3638b8c.js"><link rel="prefetch" href="/assets/js/180.3e23a70f.js"><link rel="prefetch" href="/assets/js/181.ff249819.js"><link rel="prefetch" href="/assets/js/182.acd1b3f3.js"><link rel="prefetch" href="/assets/js/183.e389c046.js"><link rel="prefetch" href="/assets/js/184.736c4cb6.js"><link rel="prefetch" href="/assets/js/185.11e3d4e7.js"><link rel="prefetch" href="/assets/js/186.ab7a3243.js"><link rel="prefetch" href="/assets/js/187.82dd6fca.js"><link rel="prefetch" href="/assets/js/188.4d0de603.js"><link rel="prefetch" href="/assets/js/189.4ed94c46.js"><link rel="prefetch" href="/assets/js/19.522f29f8.js"><link rel="prefetch" href="/assets/js/190.5ffe5cf9.js"><link rel="prefetch" href="/assets/js/191.8ad7fb9d.js"><link rel="prefetch" href="/assets/js/192.308bc81a.js"><link rel="prefetch" href="/assets/js/193.3ff85d21.js"><link rel="prefetch" href="/assets/js/194.7b5a129c.js"><link rel="prefetch" href="/assets/js/195.85920813.js"><link rel="prefetch" href="/assets/js/196.a205641b.js"><link rel="prefetch" href="/assets/js/197.f1e24ec3.js"><link rel="prefetch" href="/assets/js/198.6a5c51e7.js"><link rel="prefetch" href="/assets/js/199.64196bfd.js"><link rel="prefetch" href="/assets/js/20.efdf9414.js"><link rel="prefetch" href="/assets/js/200.2416117d.js"><link rel="prefetch" href="/assets/js/202.1b1b6570.js"><link rel="prefetch" href="/assets/js/203.77d72003.js"><link rel="prefetch" href="/assets/js/204.6f437893.js"><link rel="prefetch" href="/assets/js/205.67e96556.js"><link rel="prefetch" href="/assets/js/206.90c7ad56.js"><link rel="prefetch" href="/assets/js/207.fc403642.js"><link rel="prefetch" href="/assets/js/208.897d7ed0.js"><link rel="prefetch" href="/assets/js/209.b7891af2.js"><link rel="prefetch" href="/assets/js/21.3fe13229.js"><link rel="prefetch" href="/assets/js/210.ee5adaad.js"><link rel="prefetch" href="/assets/js/211.602e19b3.js"><link rel="prefetch" href="/assets/js/212.9be1cff6.js"><link rel="prefetch" href="/assets/js/213.c3b2bc12.js"><link rel="prefetch" href="/assets/js/214.b544dc59.js"><link rel="prefetch" href="/assets/js/215.7a97cad7.js"><link rel="prefetch" href="/assets/js/216.ca56707b.js"><link rel="prefetch" href="/assets/js/217.d5458b77.js"><link rel="prefetch" href="/assets/js/218.48001bec.js"><link rel="prefetch" href="/assets/js/219.f0fd8299.js"><link rel="prefetch" href="/assets/js/22.760acc51.js"><link rel="prefetch" href="/assets/js/220.e96b691e.js"><link rel="prefetch" href="/assets/js/221.d8eacbda.js"><link rel="prefetch" href="/assets/js/222.9caee33f.js"><link rel="prefetch" href="/assets/js/223.938d4d17.js"><link rel="prefetch" href="/assets/js/224.8fd5ba52.js"><link rel="prefetch" href="/assets/js/225.73abce6b.js"><link rel="prefetch" href="/assets/js/226.53b2e6c7.js"><link rel="prefetch" href="/assets/js/227.d90179d0.js"><link rel="prefetch" href="/assets/js/228.1f6b4c95.js"><link rel="prefetch" href="/assets/js/229.95339174.js"><link rel="prefetch" href="/assets/js/23.43e45a18.js"><link rel="prefetch" href="/assets/js/230.d1b3a79d.js"><link rel="prefetch" href="/assets/js/231.18228089.js"><link rel="prefetch" href="/assets/js/232.20d4445e.js"><link rel="prefetch" href="/assets/js/233.a00d0683.js"><link rel="prefetch" href="/assets/js/234.f816a3fa.js"><link rel="prefetch" href="/assets/js/235.d2fb0979.js"><link rel="prefetch" href="/assets/js/236.68f7f732.js"><link rel="prefetch" href="/assets/js/237.2b88015c.js"><link rel="prefetch" href="/assets/js/238.8a5784e0.js"><link rel="prefetch" href="/assets/js/239.1cfb5a32.js"><link rel="prefetch" href="/assets/js/24.6b66c9a8.js"><link rel="prefetch" href="/assets/js/240.d71a6da8.js"><link rel="prefetch" href="/assets/js/241.da4e6042.js"><link rel="prefetch" href="/assets/js/242.86aebdaf.js"><link rel="prefetch" href="/assets/js/243.4b446151.js"><link rel="prefetch" href="/assets/js/244.7cd4e24a.js"><link rel="prefetch" href="/assets/js/245.c181585a.js"><link rel="prefetch" href="/assets/js/246.ad44a15d.js"><link rel="prefetch" href="/assets/js/247.016208d5.js"><link rel="prefetch" href="/assets/js/248.ad3f2e35.js"><link rel="prefetch" href="/assets/js/249.df207e12.js"><link rel="prefetch" href="/assets/js/25.34691a0c.js"><link rel="prefetch" href="/assets/js/250.683c488f.js"><link rel="prefetch" href="/assets/js/251.ca964dfc.js"><link rel="prefetch" href="/assets/js/252.a855148d.js"><link rel="prefetch" href="/assets/js/253.4f2a213d.js"><link rel="prefetch" href="/assets/js/254.85e9df25.js"><link rel="prefetch" href="/assets/js/255.95577171.js"><link rel="prefetch" href="/assets/js/256.93474714.js"><link rel="prefetch" href="/assets/js/257.996a96f7.js"><link rel="prefetch" href="/assets/js/258.df535066.js"><link rel="prefetch" href="/assets/js/259.7d545e4d.js"><link rel="prefetch" href="/assets/js/26.7ff10eec.js"><link rel="prefetch" href="/assets/js/260.48537b5d.js"><link rel="prefetch" href="/assets/js/261.16048f37.js"><link rel="prefetch" href="/assets/js/262.77b71254.js"><link rel="prefetch" href="/assets/js/263.12d016c4.js"><link rel="prefetch" href="/assets/js/264.83df8edc.js"><link rel="prefetch" href="/assets/js/265.c3700183.js"><link rel="prefetch" href="/assets/js/266.16f1b8ce.js"><link rel="prefetch" href="/assets/js/267.3efee79d.js"><link rel="prefetch" href="/assets/js/268.2315a074.js"><link rel="prefetch" href="/assets/js/269.870b52f5.js"><link rel="prefetch" href="/assets/js/27.60107458.js"><link rel="prefetch" href="/assets/js/270.61255696.js"><link rel="prefetch" href="/assets/js/271.5e596c85.js"><link rel="prefetch" href="/assets/js/272.b38ac16c.js"><link rel="prefetch" href="/assets/js/273.a6523511.js"><link rel="prefetch" href="/assets/js/274.0415b3d9.js"><link rel="prefetch" href="/assets/js/275.89518310.js"><link rel="prefetch" href="/assets/js/276.93f5e146.js"><link rel="prefetch" href="/assets/js/277.21b37841.js"><link rel="prefetch" href="/assets/js/278.1ca22854.js"><link rel="prefetch" href="/assets/js/279.b0d53451.js"><link rel="prefetch" href="/assets/js/28.d0ae2093.js"><link rel="prefetch" href="/assets/js/280.0b99fc40.js"><link rel="prefetch" href="/assets/js/281.fa9c1c3a.js"><link rel="prefetch" href="/assets/js/282.bc961bb7.js"><link rel="prefetch" href="/assets/js/283.292a330e.js"><link rel="prefetch" href="/assets/js/284.3833f802.js"><link rel="prefetch" href="/assets/js/285.231b7f36.js"><link rel="prefetch" href="/assets/js/286.118c19ea.js"><link rel="prefetch" href="/assets/js/287.e148699d.js"><link rel="prefetch" href="/assets/js/288.e1246a4e.js"><link rel="prefetch" href="/assets/js/289.a315e462.js"><link rel="prefetch" href="/assets/js/29.9aa4d863.js"><link rel="prefetch" href="/assets/js/290.9b3278cb.js"><link rel="prefetch" href="/assets/js/291.f7a2cf4e.js"><link rel="prefetch" href="/assets/js/292.1cdb6464.js"><link rel="prefetch" href="/assets/js/293.f3a0885a.js"><link rel="prefetch" href="/assets/js/294.54b5150a.js"><link rel="prefetch" href="/assets/js/295.7299f113.js"><link rel="prefetch" href="/assets/js/296.dfa963cb.js"><link rel="prefetch" href="/assets/js/297.510dc5c2.js"><link rel="prefetch" href="/assets/js/298.d32a1e04.js"><link rel="prefetch" href="/assets/js/299.19397cda.js"><link rel="prefetch" href="/assets/js/3.7733ceb1.js"><link rel="prefetch" href="/assets/js/30.f388a55a.js"><link rel="prefetch" href="/assets/js/300.b231770c.js"><link rel="prefetch" href="/assets/js/301.2a6f789b.js"><link rel="prefetch" href="/assets/js/302.93017e1e.js"><link rel="prefetch" href="/assets/js/303.fd6116e0.js"><link rel="prefetch" href="/assets/js/304.7d258d7d.js"><link rel="prefetch" href="/assets/js/305.5c362bdf.js"><link rel="prefetch" href="/assets/js/306.58db34e0.js"><link rel="prefetch" href="/assets/js/307.f66a2083.js"><link rel="prefetch" href="/assets/js/308.aec1490e.js"><link rel="prefetch" href="/assets/js/309.550ba22e.js"><link rel="prefetch" href="/assets/js/31.58483fb4.js"><link rel="prefetch" href="/assets/js/310.6ae41acc.js"><link rel="prefetch" href="/assets/js/311.a2d4cdf0.js"><link rel="prefetch" href="/assets/js/312.ec67434e.js"><link rel="prefetch" href="/assets/js/313.f6e8740e.js"><link rel="prefetch" href="/assets/js/314.0bd2a94c.js"><link rel="prefetch" href="/assets/js/315.ee0baec5.js"><link rel="prefetch" href="/assets/js/316.89906cde.js"><link rel="prefetch" href="/assets/js/317.1e3a0a17.js"><link rel="prefetch" href="/assets/js/318.1caf0563.js"><link rel="prefetch" href="/assets/js/319.f35f9206.js"><link rel="prefetch" href="/assets/js/32.d590a102.js"><link rel="prefetch" href="/assets/js/320.cd40b50d.js"><link rel="prefetch" href="/assets/js/321.c8dcb113.js"><link rel="prefetch" href="/assets/js/322.3bbcb27c.js"><link rel="prefetch" href="/assets/js/323.f6b381b1.js"><link rel="prefetch" href="/assets/js/324.042a5015.js"><link rel="prefetch" href="/assets/js/325.7b465082.js"><link rel="prefetch" href="/assets/js/326.6e5ac7b1.js"><link rel="prefetch" href="/assets/js/327.b02fd041.js"><link rel="prefetch" href="/assets/js/328.526d0105.js"><link rel="prefetch" href="/assets/js/329.5c3c965a.js"><link rel="prefetch" href="/assets/js/33.7d2b1024.js"><link rel="prefetch" href="/assets/js/330.b0db65ca.js"><link rel="prefetch" href="/assets/js/331.bbec6198.js"><link rel="prefetch" href="/assets/js/332.0250bc7b.js"><link rel="prefetch" href="/assets/js/333.c56b7467.js"><link rel="prefetch" href="/assets/js/334.8d63973f.js"><link rel="prefetch" href="/assets/js/335.cf455cfd.js"><link rel="prefetch" href="/assets/js/336.97b19811.js"><link rel="prefetch" href="/assets/js/337.8a56f1b5.js"><link rel="prefetch" href="/assets/js/338.3229dc07.js"><link rel="prefetch" href="/assets/js/339.cbdf64ad.js"><link rel="prefetch" href="/assets/js/34.85a92888.js"><link rel="prefetch" href="/assets/js/340.13cd9743.js"><link rel="prefetch" href="/assets/js/341.0c7d2876.js"><link rel="prefetch" href="/assets/js/342.4b69ca3c.js"><link rel="prefetch" href="/assets/js/343.ee645c70.js"><link rel="prefetch" href="/assets/js/344.28b9b65e.js"><link rel="prefetch" href="/assets/js/345.8760d96a.js"><link rel="prefetch" href="/assets/js/346.9d6da9d4.js"><link rel="prefetch" href="/assets/js/347.8a657c5c.js"><link rel="prefetch" href="/assets/js/348.22caf370.js"><link rel="prefetch" href="/assets/js/349.0481005a.js"><link rel="prefetch" href="/assets/js/35.3b19689a.js"><link rel="prefetch" href="/assets/js/350.b9423eda.js"><link rel="prefetch" href="/assets/js/351.cc942632.js"><link rel="prefetch" href="/assets/js/352.95131116.js"><link rel="prefetch" href="/assets/js/353.06f9c064.js"><link rel="prefetch" href="/assets/js/354.b201d9ef.js"><link rel="prefetch" href="/assets/js/355.cd10a56a.js"><link rel="prefetch" href="/assets/js/356.36c6c5ba.js"><link rel="prefetch" href="/assets/js/357.e8015212.js"><link rel="prefetch" href="/assets/js/358.b9711baf.js"><link rel="prefetch" href="/assets/js/359.98dc7d2f.js"><link rel="prefetch" href="/assets/js/36.03061989.js"><link rel="prefetch" href="/assets/js/360.0e6248cd.js"><link rel="prefetch" href="/assets/js/361.931c762f.js"><link rel="prefetch" href="/assets/js/362.ef1a8963.js"><link rel="prefetch" href="/assets/js/363.210ff434.js"><link rel="prefetch" href="/assets/js/364.3b7da7a1.js"><link rel="prefetch" href="/assets/js/365.a954754b.js"><link rel="prefetch" href="/assets/js/366.dadcfe32.js"><link rel="prefetch" href="/assets/js/367.90b7291b.js"><link rel="prefetch" href="/assets/js/368.e321a92b.js"><link rel="prefetch" href="/assets/js/369.13e8dad8.js"><link rel="prefetch" href="/assets/js/37.70bb3be4.js"><link rel="prefetch" href="/assets/js/370.72012441.js"><link rel="prefetch" href="/assets/js/371.2e010860.js"><link rel="prefetch" href="/assets/js/372.12e17e8f.js"><link rel="prefetch" href="/assets/js/373.89a8b504.js"><link rel="prefetch" href="/assets/js/374.c019de38.js"><link rel="prefetch" href="/assets/js/375.1aef4bce.js"><link rel="prefetch" href="/assets/js/376.bf7b224f.js"><link rel="prefetch" href="/assets/js/377.a3732e34.js"><link rel="prefetch" href="/assets/js/378.7a96c256.js"><link rel="prefetch" href="/assets/js/379.8b948450.js"><link rel="prefetch" href="/assets/js/38.9b2f6585.js"><link rel="prefetch" href="/assets/js/380.8d0ae962.js"><link rel="prefetch" href="/assets/js/381.9794acca.js"><link rel="prefetch" href="/assets/js/382.1d1ffd04.js"><link rel="prefetch" href="/assets/js/383.fe9a1343.js"><link rel="prefetch" href="/assets/js/384.1866f7d2.js"><link rel="prefetch" href="/assets/js/385.f85aabff.js"><link rel="prefetch" href="/assets/js/386.ec7dbeca.js"><link rel="prefetch" href="/assets/js/387.7fc707d1.js"><link rel="prefetch" href="/assets/js/388.1ff95195.js"><link rel="prefetch" href="/assets/js/389.3ffe9d0a.js"><link rel="prefetch" href="/assets/js/39.fdac0bfe.js"><link rel="prefetch" href="/assets/js/390.bfe91302.js"><link rel="prefetch" href="/assets/js/391.423a4c58.js"><link rel="prefetch" href="/assets/js/392.0a3decc2.js"><link rel="prefetch" href="/assets/js/4.43e2f670.js"><link rel="prefetch" href="/assets/js/40.98af0982.js"><link rel="prefetch" href="/assets/js/41.0e2049d9.js"><link rel="prefetch" href="/assets/js/42.bdf66b5c.js"><link rel="prefetch" href="/assets/js/43.cf1fbc55.js"><link rel="prefetch" href="/assets/js/44.f919f722.js"><link rel="prefetch" href="/assets/js/45.22bd66ba.js"><link rel="prefetch" href="/assets/js/46.5ef20ab0.js"><link rel="prefetch" href="/assets/js/47.4baf2f7e.js"><link rel="prefetch" href="/assets/js/48.4af7f400.js"><link rel="prefetch" href="/assets/js/49.5476d0bb.js"><link rel="prefetch" href="/assets/js/5.0d35f905.js"><link rel="prefetch" href="/assets/js/50.eb52e86c.js"><link rel="prefetch" href="/assets/js/51.c9da4b37.js"><link rel="prefetch" href="/assets/js/52.ecef0a87.js"><link rel="prefetch" href="/assets/js/53.fe7835ce.js"><link rel="prefetch" href="/assets/js/54.4df6c980.js"><link rel="prefetch" href="/assets/js/55.f23ec383.js"><link rel="prefetch" href="/assets/js/56.3ca396f9.js"><link rel="prefetch" href="/assets/js/57.59652775.js"><link rel="prefetch" href="/assets/js/58.d0ae9e4c.js"><link rel="prefetch" href="/assets/js/59.4d3622e2.js"><link rel="prefetch" href="/assets/js/6.6f0fcce3.js"><link rel="prefetch" href="/assets/js/60.9341843c.js"><link rel="prefetch" href="/assets/js/61.2ff6a516.js"><link rel="prefetch" href="/assets/js/62.fb607812.js"><link rel="prefetch" href="/assets/js/63.b1975ac7.js"><link rel="prefetch" href="/assets/js/64.a7b922e4.js"><link rel="prefetch" href="/assets/js/65.36329f23.js"><link rel="prefetch" href="/assets/js/66.e3da728e.js"><link rel="prefetch" href="/assets/js/67.b793160e.js"><link rel="prefetch" href="/assets/js/68.409972f4.js"><link rel="prefetch" href="/assets/js/69.b64b6849.js"><link rel="prefetch" href="/assets/js/7.b10b0220.js"><link rel="prefetch" href="/assets/js/70.2e6a7f9e.js"><link rel="prefetch" href="/assets/js/71.bc09fb96.js"><link rel="prefetch" href="/assets/js/72.ec59cec2.js"><link rel="prefetch" href="/assets/js/73.92bda851.js"><link rel="prefetch" href="/assets/js/74.7d74ba53.js"><link rel="prefetch" href="/assets/js/75.95f4bd8f.js"><link rel="prefetch" href="/assets/js/76.379610b4.js"><link rel="prefetch" href="/assets/js/77.175c9c4a.js"><link rel="prefetch" href="/assets/js/78.a9076dcb.js"><link rel="prefetch" href="/assets/js/79.9e342c81.js"><link rel="prefetch" href="/assets/js/8.c0dc1aee.js"><link rel="prefetch" href="/assets/js/80.29843e61.js"><link rel="prefetch" href="/assets/js/81.7f80e464.js"><link rel="prefetch" href="/assets/js/82.0141c59a.js"><link rel="prefetch" href="/assets/js/83.710432d6.js"><link rel="prefetch" href="/assets/js/84.8297ebb8.js"><link rel="prefetch" href="/assets/js/85.58488307.js"><link rel="prefetch" href="/assets/js/86.89b0428e.js"><link rel="prefetch" href="/assets/js/87.86a7d369.js"><link rel="prefetch" href="/assets/js/88.fa6747b0.js"><link rel="prefetch" href="/assets/js/89.da1ebe8b.js"><link rel="prefetch" href="/assets/js/9.6a956ad2.js"><link rel="prefetch" href="/assets/js/90.ed31a145.js"><link rel="prefetch" href="/assets/js/91.7c970a91.js"><link rel="prefetch" href="/assets/js/92.87ef8e0b.js"><link rel="prefetch" href="/assets/js/93.21071ef2.js"><link rel="prefetch" href="/assets/js/94.441ac7e5.js"><link rel="prefetch" href="/assets/js/95.9201e65e.js"><link rel="prefetch" href="/assets/js/96.1ddeb935.js"><link rel="prefetch" href="/assets/js/97.4097525e.js"><link rel="prefetch" href="/assets/js/98.73cc3097.js"><link rel="prefetch" href="/assets/js/99.8f248b5d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3aa0083c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/icon.png" alt="wxvirus" class="logo"> <span class="site-name can-hide">wxvirus</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/backend/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Go文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1be6f5/" class="nav-link">Go语言学习</a></li></ul></li><li class="dropdown-item"><h4>Rust</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8dc34b/" class="nav-link">Rust学习</a></li></ul></li><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/java/" class="nav-link">《Java》</a></li></ul></li><li class="dropdown-item"><h4>Python文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0ef862/" class="nav-link">Python</a></li></ul></li><li class="dropdown-item"><h4>PHP文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a09ce1/" class="nav-link">PHP设计模式</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/ui/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/7601f3/" class="nav-link">JS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/df7058/" class="nav-link">刷题</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/9d0e8f/" class="nav-link">算法学习</a></li><li class="dropdown-item"><!----> <a href="/pages/8f006a/" class="nav-link">架构设计</a></li><li class="dropdown-item"><!----> <a href="/pages/76c94d/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sword-demon" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.jpeg"> <div class="blogger-info"><h3>无解的lifecycle</h3> <span>let today = new Beginning()</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/backend/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Go文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1be6f5/" class="nav-link">Go语言学习</a></li></ul></li><li class="dropdown-item"><h4>Rust</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8dc34b/" class="nav-link">Rust学习</a></li></ul></li><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/java/" class="nav-link">《Java》</a></li></ul></li><li class="dropdown-item"><h4>Python文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0ef862/" class="nav-link">Python</a></li></ul></li><li class="dropdown-item"><h4>PHP文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a09ce1/" class="nav-link">PHP设计模式</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/ui/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/7601f3/" class="nav-link">JS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/df7058/" class="nav-link">刷题</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/9d0e8f/" class="nav-link">算法学习</a></li><li class="dropdown-item"><!----> <a href="/pages/8f006a/" class="nav-link">架构设计</a></li><li class="dropdown-item"><!----> <a href="/pages/76c94d/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sword-demon" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>flutter</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue3</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/eba091/" class="sidebar-link">vuecli多环境配置</a></li><li><a href="/pages/20866b/" class="sidebar-link">全局使用antdv图标组件</a></li><li><a href="/pages/a4c15e/" class="sidebar-link">集成富文本插件wangeditor</a></li><li><a href="/pages/03deff/" class="sidebar-link">vue分页组件</a></li><li><a href="/pages/e34480/" class="sidebar-link">登录页开发</a></li><li><a href="/pages/4c2add/" aria-current="page" class="active sidebar-link">后台布局开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/4c2add/#后台主布局实现" class="sidebar-link">后台主布局实现</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#公共头部开发" class="sidebar-link">公共头部开发</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#刷新和全屏按钮" class="sidebar-link">刷新和全屏按钮</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#修改密码" class="sidebar-link">修改密码</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#form-表单抽屉组件封装" class="sidebar-link">form 表单抽屉组件封装</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#使用组合式-api-封装简化代码" class="sidebar-link">使用组合式 api 封装简化代码</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#侧边菜单开发-样式布局和路由跳转" class="sidebar-link">侧边菜单开发-样式布局和路由跳转</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#菜单展开和收起" class="sidebar-link">菜单展开和收起</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#设置菜单选中和路由关联" class="sidebar-link">设置菜单选中和路由关联</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#菜单数据前后端交互" class="sidebar-link">菜单数据前后端交互</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#根据菜单动态添加路由" class="sidebar-link">根据菜单动态添加路由</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#标签导航组件实现" class="sidebar-link">标签导航组件实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/4c2add/#样式布局" class="sidebar-link">样式布局</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#同步路由和存储" class="sidebar-link">同步路由和存储</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#关闭当前标签处理" class="sidebar-link">关闭当前标签处理</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#实现关闭全部标签功能" class="sidebar-link">实现关闭全部标签功能</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#优化加载菜单的速度" class="sidebar-link">优化加载菜单的速度</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#使用-keep-alive-页面缓存" class="sidebar-link">使用 keep-alive 页面缓存</a></li><li class="sidebar-sub-header"><a href="/pages/4c2add/#使用-transition-全局过渡动画" class="sidebar-link">使用 transition 全局过渡动画</a></li></ul></li><li><a href="/pages/3cd1cd/" class="sidebar-link">vue3配合vite初始化项目的一些配置</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>特效</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>framework</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/ui" title="页面-目录页" data-v-1cd794fe>页面</a></li> <li data-v-1cd794fe><a href="/ui/#vue3" title="页面#vue3" data-v-1cd794fe>vue3</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/sword-demon" target="_blank" title="作者" class="beLink" data-v-1cd794fe>wxvirus</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2022-12-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          后台布局开发
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="后台布局开发"><a href="#后台布局开发" class="header-anchor">#</a> 后台布局开发</h1> <h2 id="后台主布局实现"><a href="#后台主布局实现" class="header-anchor">#</a> 后台主布局实现</h2> <p>主要使用<code>elemnt-plus</code>的<code>Container</code>容器：文档地址<a href="https://element-plus.gitee.io/zh-CN/component/container.html" target="_blank" rel="noopener noreferrer">https://element-plus.gitee.io/zh-CN/component/container.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>我们在<code>src</code>下新建<code>layouts</code>目录，新建一个<code>admin.vue</code>后台的一个布局页面</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 头部 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>header<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>f<span class="token operator">-</span>header <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>aside<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>f<span class="token operator">-</span>menu <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>aside<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>main<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>f<span class="token operator">-</span>tag<span class="token operator">-</span>list <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>main<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> FHeader <span class="token keyword">from</span> <span class="token string">&quot;./components/FHeader.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FMenu <span class="token keyword">from</span> <span class="token string">&quot;./components/FMenu.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FTagList <span class="token keyword">from</span> <span class="token string">&quot;./components/FTagList.vue&quot;</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>我们分别在其目录下新建<code>components</code>，然后分离出单独的头部，左侧菜单以及标签导航栏，都是简单的页面，分别加上对应的名称</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>头部<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>这里就只写一个了，别的都是复制粘贴，然后就<code>头部</code>两个字不一样</p></blockquote> <p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221017235505.png" alt=""></p> <hr> <p>我们在路由中设置后台的路由，并添加子路由</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> Admin <span class="token keyword">from</span> <span class="token string">'~/layouts/admin.vue'</span>
<span class="token keyword">import</span> Index <span class="token keyword">from</span> <span class="token string">'~/pages/index.vue'</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">'~/pages/login.vue'</span>
<span class="token keyword">import</span> NotFound <span class="token keyword">from</span> <span class="token string">'~/pages/404.vue'</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> Admin<span class="token punctuation">,</span>
        <span class="token comment">// 子路由</span>
        children<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
                component<span class="token operator">:</span> Index<span class="token punctuation">,</span>
                meta<span class="token operator">:</span> <span class="token punctuation">{</span>
                    title<span class="token operator">:</span> <span class="token string">'后台首页'</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> Login<span class="token punctuation">,</span>
        meta<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'登录页'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/:pathMatch(.*)*'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'NotFound'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> NotFound<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id="公共头部开发"><a href="#公共头部开发" class="header-anchor">#</a> 公共头部开发</h2> <p>下拉菜单文档地址<a href="https://element-plus.gitee.io/zh-CN/component/dropdown.html" target="_blank" rel="noopener noreferrer">https://element-plus.gitee.io/zh-CN/component/dropdown.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>头像组件<a href="https://element-plus.gitee.io/zh-CN/component/avatar.html" target="_blank" rel="noopener noreferrer">https://element-plus.gitee.io/zh-CN/component/avatar.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 水平方向 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;f-header&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;logo&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;mr-1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Promotion <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
            无解的游戏
        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 收缩图标 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon-btn&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Fold <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 刷新图标 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon-btn&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>RefreshRight <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ml-auto flex items-center&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 全屏图标 <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon-btn&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>FullScreen <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;dropdown&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;flex items-center text-light-50&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 头像 <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>avatar
                        <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;mr-2&quot;</span>
                        <span class="token operator">:</span>size<span class="token operator">=</span><span class="token string">&quot;25&quot;</span>
                        <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;$store.state.user.avatar&quot;</span>
                    <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 昵称 <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token punctuation">{</span> $store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>username <span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-icon--right&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>arrow<span class="token operator">-</span>down <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>template #dropdown<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>修改密码<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>退出登录<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>f<span class="token operator">-</span>header <span class="token punctuation">{</span>
    @apply flex bg<span class="token operator">-</span>indigo<span class="token operator">-</span><span class="token number">700</span> text<span class="token operator">-</span>light<span class="token operator">-</span><span class="token number">50</span> fixed top<span class="token operator">-</span><span class="token number">0</span> left<span class="token operator">-</span><span class="token number">0</span> right<span class="token operator">-</span><span class="token number">0</span> items<span class="token operator">-</span>center<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>logo <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">250</span>px<span class="token punctuation">;</span>
    @apply flex justify<span class="token operator">-</span>center items<span class="token operator">-</span>center text<span class="token operator">-</span>xl font<span class="token operator">-</span>thin<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>icon<span class="token operator">-</span>btn <span class="token punctuation">{</span>
    @apply flex justify<span class="token operator">-</span>center items<span class="token operator">-</span>center<span class="token punctuation">;</span>
    width<span class="token operator">:</span> <span class="token number">42</span>px<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span>
    cursor<span class="token operator">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>icon<span class="token operator">-</span>btn<span class="token operator">:</span>hover <span class="token punctuation">{</span>
    @apply bg<span class="token operator">-</span>indigo<span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>f<span class="token operator">-</span>header <span class="token punctuation">.</span>dropdown <span class="token punctuation">{</span>
    height<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span>
    cursor<span class="token operator">:</span> pointer<span class="token punctuation">;</span>
    @apply flex justify<span class="token operator">-</span>center items<span class="token operator">-</span>center mx<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221018001147.png" alt="效果图"></p> <h2 id="刷新和全屏按钮"><a href="#刷新和全屏按钮" class="header-anchor">#</a> 刷新和全屏按钮</h2> <p>还需要使用到<code>vueuse</code>的一个核心包</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @vueuse/core
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>简单实现页面点击刷新</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 刷新</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleRefresh</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后给刷新按钮加上点击事件即可</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tooltip</span> <span class="token attr-name">effect</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dark<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>刷新<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon-btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleRefresh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RefreshRight</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tooltip</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr> <p>使用<code>vueuse</code>的包来实现全屏功能</p> <p>引入包</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useFullscreen <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueuse/core'</span>

<span class="token comment">// 是否全屏 全屏切换</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> isFullscreen<span class="token punctuation">,</span> toggle <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>el<span class="token operator">-</span>tooltip effect<span class="token operator">=</span><span class="token string">&quot;dark&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;全屏&quot;</span> placement<span class="token operator">=</span><span class="token string">&quot;bottom&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon-btn&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;toggle&quot;</span><span class="token operator">&gt;</span>
        <span class="token comment">// 判断不是全屏状态下显示全屏按钮</span>
        <span class="token operator">&lt;</span>FullScreen v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!isFullscreen&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token comment">// 另一个图标</span>
            <span class="token operator">&lt;</span>Aim v<span class="token operator">-</span><span class="token keyword">else</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tooltip<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="修改密码"><a href="#修改密码" class="header-anchor">#</a> 修改密码</h2> <blockquote><p>点击修改密码，弹出一个抽屉表单来进行提交修改。</p></blockquote> <p>抽屉文档地址：<a href="https://element-plus.gitee.io/zh-CN/component/drawer.html" target="_blank" rel="noopener noreferrer">https://element-plus.gitee.io/zh-CN/component/drawer.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 水平方向 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;f-header&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;logo&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;mr-1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Promotion <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
            无解的游戏
        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 收缩图标 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon-btn&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Fold <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 刷新图标 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>tooltip effect<span class="token operator">=</span><span class="token string">&quot;dark&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;刷新&quot;</span> placement<span class="token operator">=</span><span class="token string">&quot;bottom&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon-btn&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;handleRefresh&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span>RefreshRight
            <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tooltip<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ml-auto flex items-center&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 全屏图标 <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>tooltip effect<span class="token operator">=</span><span class="token string">&quot;dark&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;全屏&quot;</span> placement<span class="token operator">=</span><span class="token string">&quot;bottom&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon-btn&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;toggle&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>FullScreen v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!isFullscreen&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Aim v<span class="token operator">-</span><span class="token keyword">else</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tooltip<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;dropdown&quot;</span> @command<span class="token operator">=</span><span class="token string">&quot;handleCommand&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;flex items-center text-light-50&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 头像 <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>avatar
                        <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;mr-2&quot;</span>
                        <span class="token operator">:</span>size<span class="token operator">=</span><span class="token string">&quot;25&quot;</span>
                        <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;$store.state.user.avatar&quot;</span>
                    <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 昵称 <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token punctuation">{</span> $store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>username <span class="token punctuation">}</span><span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-icon--right&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>arrow<span class="token operator">-</span>down <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>template #dropdown<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item command<span class="token operator">=</span><span class="token string">&quot;rePassword&quot;</span>
                            <span class="token operator">&gt;</span>修改密码<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item
                        <span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item command<span class="token operator">=</span><span class="token string">&quot;logout&quot;</span>
                            <span class="token operator">&gt;</span>退出登录<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item
                        <span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>drawer
        v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;showDrawer&quot;</span>
        title<span class="token operator">=</span><span class="token string">&quot;修改密码&quot;</span>
        size<span class="token operator">=</span><span class="token string">&quot;45%&quot;</span>
        <span class="token operator">:</span>close<span class="token operator">-</span>on<span class="token operator">-</span>click<span class="token operator">-</span>modal<span class="token operator">=</span><span class="token string">&quot;false&quot;</span>
    <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>form
            ref<span class="token operator">=</span><span class="token string">&quot;formRef&quot;</span>
            <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;rules&quot;</span>
            <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;form&quot;</span>
            label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">&quot;80px&quot;</span>
            size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span>
        <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">&quot;oldpassword&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;旧密码&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>input
                    v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;form.oldpassword&quot;</span>
                    placeholder<span class="token operator">=</span><span class="token string">&quot;请输入旧密码&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;新密码&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>input
                    type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
                    v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;form.password&quot;</span>
                    placeholder<span class="token operator">=</span><span class="token string">&quot;请输入密码&quot;</span>
                    show<span class="token operator">-</span>password
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">&quot;repassword&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;确认密码&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>input
                    type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
                    v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;form.repassword&quot;</span>
                    placeholder<span class="token operator">=</span><span class="token string">&quot;请输入确认密码&quot;</span>
                    show<span class="token operator">-</span>password
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;onSubmit&quot;</span> <span class="token operator">:</span>loading<span class="token operator">=</span><span class="token string">&quot;loading&quot;</span>
                    <span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button
                <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>drawer<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> logout<span class="token punctuation">,</span> updatepassword <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;~/api/manager&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> showModal<span class="token punctuation">,</span> toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;~/composables/util&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFullscreen <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 是否全屏 全屏切换</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> isFullscreen<span class="token punctuation">,</span> toggle <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 修改密码抽屉是否弹出</span>
<span class="token keyword">const</span> showDrawer <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// do not use same name with ref</span>
<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    oldpassword<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    repassword<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 定义登录验证规则</span>
<span class="token comment">// 必须和上面表单属性一样</span>
<span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token punctuation">{</span>
    oldpassword<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">&quot;旧密码不能为空&quot;</span><span class="token punctuation">,</span>
            trigger<span class="token operator">:</span> <span class="token string">&quot;blur&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">&quot;新密码不能为空&quot;</span><span class="token punctuation">,</span>
            trigger<span class="token operator">:</span> <span class="token string">&quot;blur&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    repassword<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">&quot;确认密码不能为空&quot;</span><span class="token punctuation">,</span>
            trigger<span class="token operator">:</span> <span class="token string">&quot;blur&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 让formRef变成响应式</span>
<span class="token keyword">const</span> formRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    formRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        loading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token function">updatepassword</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">&quot;修改密码成功，请重新登录&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;logout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 跳转回登录页</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                loading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 刷新</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleRefresh</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleCommand</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;logout&quot;</span><span class="token operator">:</span>
            <span class="token function">handleLogout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;rePassword&quot;</span><span class="token operator">:</span>
            <span class="token comment">// 修改密码</span>
            showDrawer<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handleLogout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showModal</span><span class="token punctuation">(</span><span class="token string">&quot;是否要退出登录?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(&quot;退出登录&quot;);</span>
        <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 不管成功，都要到这</span>
            store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;logout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 跳转回登录</span>
            router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 提示退出成功</span>
            <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">&quot;退出成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>f<span class="token operator">-</span>header <span class="token punctuation">{</span>
    @apply flex bg<span class="token operator">-</span>indigo<span class="token operator">-</span><span class="token number">700</span> text<span class="token operator">-</span>light<span class="token operator">-</span><span class="token number">50</span> fixed top<span class="token operator">-</span><span class="token number">0</span> left<span class="token operator">-</span><span class="token number">0</span> right<span class="token operator">-</span><span class="token number">0</span> items<span class="token operator">-</span>center<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>logo <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">250</span>px<span class="token punctuation">;</span>
    @apply flex justify<span class="token operator">-</span>center items<span class="token operator">-</span>center text<span class="token operator">-</span>xl font<span class="token operator">-</span>thin<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>icon<span class="token operator">-</span>btn <span class="token punctuation">{</span>
    @apply flex justify<span class="token operator">-</span>center items<span class="token operator">-</span>center<span class="token punctuation">;</span>
    width<span class="token operator">:</span> <span class="token number">42</span>px<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span>
    cursor<span class="token operator">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>icon<span class="token operator">-</span>btn<span class="token operator">:</span>hover <span class="token punctuation">{</span>
    @apply bg<span class="token operator">-</span>indigo<span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>f<span class="token operator">-</span>header <span class="token punctuation">.</span>dropdown <span class="token punctuation">{</span>
    height<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span>
    cursor<span class="token operator">:</span> pointer<span class="token punctuation">;</span>
    @apply flex justify<span class="token operator">-</span>center items<span class="token operator">-</span>center mx<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br></div></div><p>:::caution 注意</p> <p>我们还需要在<code>axio.js</code>中的全局响应拦截器里添加判断，是否是<code>token</code>失效了，失效，虽然后端是退出了，但是前端的还保留着，我们还需要前端也清理一下数据。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token comment">// 添加响应拦截器</span>
service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 对响应数据做点什么</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> msg <span class="token operator">=</span> error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg <span class="token operator">||</span> <span class="token string">'请求失败'</span>
        <span class="token comment">// todo 这里感觉使用文字来判断不可行，后期可以进行优化</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token string">'非法token，请先登录！'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'logout'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 对响应错误做点什么</span>
        <span class="token function">toast</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>:::</p> <h2 id="form-表单抽屉组件封装"><a href="#form-表单抽屉组件封装" class="header-anchor">#</a> form 表单抽屉组件封装</h2> <p><code>vue3 setup</code>暴露出去属性文档：<a href="https://cn.vuejs.org/api/sfc-script-setup.html#defineexpose" target="_blank" rel="noopener noreferrer">https://cn.vuejs.org/api/sfc-script-setup.html#defineexpose<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>vue3 defimeProps defineEmits 组件文档</code>：<a href="https://cn.vuejs.org/api/sfc-script-setup.html#defineprops-defineemits" target="_blank" rel="noopener noreferrer">https://cn.vuejs.org/api/sfc-script-setup.html#defineprops-defineemits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>drawer
        v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;showDrawer&quot;</span>
        <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&quot;title&quot;</span>
        <span class="token operator">:</span>size<span class="token operator">=</span><span class="token string">&quot;size&quot;</span>
        <span class="token operator">:</span>close<span class="token operator">-</span>on<span class="token operator">-</span>click<span class="token operator">-</span>modal<span class="token operator">=</span><span class="token string">&quot;false&quot;</span>
        <span class="token operator">:</span>destroy<span class="token operator">-</span>on<span class="token operator">-</span>close<span class="token operator">=</span><span class="token string">&quot;destroyOnClose&quot;</span>
    <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;formDrawer&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;body&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;actions&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>button <span class="token operator">:</span>loading<span class="token operator">=</span><span class="token string">&quot;loading&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                    confrimText
                <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;default&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;close&quot;</span><span class="token operator">&gt;</span>取消<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>drawer<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> showDrawer <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 打开抽屉</span>
<span class="token keyword">const</span> <span class="token function-variable function">open</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>showDrawer<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 关闭抽屉</span>
<span class="token keyword">const</span> <span class="token function-variable function">close</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>showDrawer<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 显示进度条</span>
<span class="token keyword">const</span> <span class="token function-variable function">showLoading</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>loading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 隐藏进度条</span>
<span class="token keyword">const</span> <span class="token function-variable function">hideLoading</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>loading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;submit&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 提交 执行通知父组件</span>
<span class="token keyword">const</span> <span class="token function-variable function">submit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;submit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span> String<span class="token punctuation">,</span>
    size<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;45%&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    destroyOnClose<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    confrimText<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;提交&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 向父组件暴露以下方法</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    open<span class="token punctuation">,</span>
    close<span class="token punctuation">,</span>
    showLoading<span class="token punctuation">,</span>
    hideLoading<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>formDrawer <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
    position<span class="token operator">:</span> relative<span class="token punctuation">;</span>
    @apply flex flex<span class="token operator">-</span>col<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>formDrawer <span class="token punctuation">.</span>body <span class="token punctuation">{</span>
    flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
    top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    bottom<span class="token operator">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span>
    overflow<span class="token operator">-</span>y<span class="token operator">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>formDrawer <span class="token punctuation">.</span>actions <span class="token punctuation">{</span>
    height<span class="token operator">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span>
    @apply mt<span class="token operator">-</span>auto flex items<span class="token operator">-</span>center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><p>然后上面的修改密码的弹出框和表单就可以简化为</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form-drawer</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formDrawerRef<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>修改密码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroyOnClose</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSubmit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formRef<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rules<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>80px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oldpassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>旧密码<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form.oldpassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入旧密码<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新密码<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form.password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入密码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">show-password</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>repassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>确认密码<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form.repassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入确认密码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">show-password</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form-drawer</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ... 其他代码</span>

<span class="token comment">// 引入组件</span>
<span class="token keyword">import</span> FormDrawer <span class="token keyword">from</span> <span class="token string">'~/components/FormDrawer.vue'</span>

<span class="token keyword">const</span> formDrawerRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token comment">// 让formRef变成响应式</span>
<span class="token keyword">const</span> formRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    formRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 显示进度条</span>
        formDrawerRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">updatepassword</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'修改密码成功，请重新登录'</span><span class="token punctuation">)</span>
                store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'logout'</span><span class="token punctuation">)</span>
                <span class="token comment">// 跳转回登录页</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// 隐藏进度条</span>
                formDrawerRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="使用组合式-api-封装简化代码"><a href="#使用组合式-api-封装简化代码" class="header-anchor">#</a> 使用组合式 api 封装简化代码</h2> <p>我们可以将退出登录和修改密码的方法使用组合式<code>api</code>进行脱离出去</p> <p>新建一个<code>composables/useManager.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> logout<span class="token punctuation">,</span> updatepassword <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'~/api/manager'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> showModal<span class="token punctuation">,</span> toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'~/composables/util'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useRepassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> formDrawerRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        oldpassword<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        repassword<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 定义登录验证规则</span>
    <span class="token comment">// 必须和上面表单属性一样</span>
    <span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token punctuation">{</span>
        oldpassword<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                message<span class="token operator">:</span> <span class="token string">'旧密码不能为空'</span><span class="token punctuation">,</span>
                trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                message<span class="token operator">:</span> <span class="token string">'新密码不能为空'</span><span class="token punctuation">,</span>
                trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        repassword<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                message<span class="token operator">:</span> <span class="token string">'确认密码不能为空'</span><span class="token punctuation">,</span>
                trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 让formRef变成响应式</span>
    <span class="token keyword">const</span> formRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        formRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
            formDrawerRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token function">updatepassword</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'修改密码成功，请重新登录'</span><span class="token punctuation">)</span>
                    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'logout'</span><span class="token punctuation">)</span>
                    <span class="token comment">// 跳转回登录页</span>
                    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    formDrawerRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">openRePasswordForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> formDrawerRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        formDrawerRef<span class="token punctuation">,</span>
        form<span class="token punctuation">,</span>
        rules<span class="token punctuation">,</span>
        formRef<span class="token punctuation">,</span>
        onSubmit<span class="token punctuation">,</span>
        openRePasswordForm<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useLogout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这2个内容需要写在函数内部，否则报错</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">function</span> <span class="token function">handleLogout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showModal</span><span class="token punctuation">(</span><span class="token string">'是否要退出登录?'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(&quot;退出登录&quot;);</span>
            <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// 不管成功，都要到这</span>
                store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'logout'</span><span class="token punctuation">)</span>
                <span class="token comment">// 跳转回登录</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
                <span class="token comment">// 提示退出成功</span>
                <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'退出成功'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        handleLogout<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br></div></div><p>原先的<code>FHeader.vue</code>简化代码后</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFullscreen <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormDrawer <span class="token keyword">from</span> <span class="token string">&quot;~/components/FormDrawer.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRepassword<span class="token punctuation">,</span> useLogout <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;~/composables/useManager&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 是否全屏 全屏切换</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> isFullscreen<span class="token punctuation">,</span> toggle <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> formDrawerRef<span class="token punctuation">,</span> form<span class="token punctuation">,</span> rules<span class="token punctuation">,</span> formRef<span class="token punctuation">,</span> onSubmit<span class="token punctuation">,</span> openRePasswordForm <span class="token punctuation">}</span> <span class="token operator">=</span>
    <span class="token function">useRepassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> handleLogout <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLogout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 刷新</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleRefresh</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleCommand</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;logout&quot;</span><span class="token operator">:</span>
            <span class="token function">handleLogout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;rePassword&quot;</span><span class="token operator">:</span>
            <span class="token comment">// 修改密码</span>
            <span class="token comment">// showDrawer.value = true;</span>
            <span class="token comment">// formDrawerRef.value.open();</span>
            <span class="token function">openRePasswordForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="侧边菜单开发-样式布局和路由跳转"><a href="#侧边菜单开发-样式布局和路由跳转" class="header-anchor">#</a> 侧边菜单开发-样式布局和路由跳转</h2> <p>我们需要使用到<code>element-plus</code>的菜单栏组件：文档地址<a href="https://element-plus.gitee.io/zh-CN/component/menu.html" target="_blank" rel="noopener noreferrer">https://element-plus.gitee.io/zh-CN/component/menu.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;f-menu&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu @select<span class="token operator">=</span><span class="token string">&quot;handleSelect&quot;</span> <span class="token keyword">default</span><span class="token operator">-</span>active<span class="token operator">=</span><span class="token string">&quot;2&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;border-0&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item, index) in asideMenus&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu
                    v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;item.child &amp;&amp; item.child.length &gt; 0&quot;</span>
                    <span class="token operator">:</span>index<span class="token operator">=</span><span class="token string">&quot;item.name&quot;</span>
                <span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>template #title<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">&quot;item.icon&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item
                        v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item2, index2) in item.child&quot;</span>
                        <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index2&quot;</span>
                        <span class="token operator">:</span>index<span class="token operator">=</span><span class="token string">&quot;item2.frontpath&quot;</span>
                    <span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">&quot;item2.icon&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item2<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item v<span class="token operator">-</span><span class="token keyword">else</span> <span class="token operator">:</span>index<span class="token operator">=</span><span class="token string">&quot;item.frontpath&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">&quot;item.icon&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> asideMenus <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;后台面板&quot;</span><span class="token punctuation">,</span>
        icon<span class="token operator">:</span> <span class="token string">&quot;help&quot;</span><span class="token punctuation">,</span>
        child<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                name<span class="token operator">:</span> <span class="token string">&quot;主控台&quot;</span><span class="token punctuation">,</span>
                frontpath<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
                icon<span class="token operator">:</span> <span class="token string">&quot;home-filled&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;商城管理&quot;</span><span class="token punctuation">,</span>
        icon<span class="token operator">:</span> <span class="token string">&quot;shopping-bag&quot;</span><span class="token punctuation">,</span>
        child<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                name<span class="token operator">:</span> <span class="token string">&quot;商品管理&quot;</span><span class="token punctuation">,</span>
                frontpath<span class="token operator">:</span> <span class="token string">&quot;/goods/list&quot;</span><span class="token punctuation">,</span>
                icon<span class="token operator">:</span> <span class="token string">&quot;shopping-cart-full&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleSelect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 二级菜单点击跳转</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scope<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>f<span class="token operator">-</span>menu <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">250</span>px<span class="token punctuation">;</span>
    top<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span>
    bottom<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    overflow<span class="token operator">:</span> auto<span class="token punctuation">;</span>
    @apply shadow<span class="token operator">-</span>md fixed bg<span class="token operator">-</span>light<span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h2 id="菜单展开和收起"><a href="#菜单展开和收起" class="header-anchor">#</a> 菜单展开和收起</h2> <p>我们需要涉及头部组件，菜单组件以及中间布局组件的宽度的变化，所以我们需要在<code>vuex</code>里定义一个状态用于存储</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            user<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 默认空对象 用户信息</span>

            <span class="token comment">// 侧边宽度</span>
            asideWidth<span class="token operator">:</span> <span class="token string">'250px'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 记录用户信息</span>
        <span class="token constant">SET_USERINFO</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>user <span class="token operator">=</span> user
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 展开或缩起侧边</span>
        <span class="token function">handleAsideWidth</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>asideWidth <span class="token operator">=</span> state<span class="token punctuation">.</span>asideWidth <span class="token operator">===</span> <span class="token string">'250px'</span> <span class="token operator">?</span> <span class="token string">'64px'</span> <span class="token operator">:</span> <span class="token string">'250px'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>菜单栏默认宽度设置为<code>250px</code></li> <li>收缩设置宽度为<code>64px</code></li></ul> <p>然后我们就得对菜单组件设置动态宽度</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 头部 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>header<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>f<span class="token operator">-</span>header <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>aside <span class="token operator">:</span>width<span class="token operator">=</span><span class="token string">&quot;$store.state.asideWidth&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>f<span class="token operator">-</span>menu <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>aside<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>main<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>f<span class="token operator">-</span>tag<span class="token operator">-</span>list <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>main<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> FHeader <span class="token keyword">from</span> <span class="token string">&quot;./components/FHeader.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FMenu <span class="token keyword">from</span> <span class="token string">&quot;./components/FMenu.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FTagList <span class="token keyword">from</span> <span class="token string">&quot;./components/FTagList.vue&quot;</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scope<span class="token operator">&gt;</span>
    <span class="token comment">// 动画效果 收缩展开不闪</span>
<span class="token punctuation">.</span>el<span class="token operator">-</span>aside <span class="token punctuation">{</span>
    transition<span class="token operator">:</span> all <span class="token number">0.2</span>s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>还需要对<code>el-menu</code>组件进行设置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;f-menu&quot;</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ width: $store.state.asideWidth }&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu
            <span class="token operator">:</span>collapse<span class="token operator">=</span><span class="token string">&quot;isCollapse&quot;</span>
            @select<span class="token operator">=</span><span class="token string">&quot;handleSelect&quot;</span>
            <span class="token keyword">default</span><span class="token operator">-</span>active<span class="token operator">=</span><span class="token string">&quot;2&quot;</span>
            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;border-0&quot;</span>
            <span class="token operator">:</span>collapse<span class="token operator">-</span>transition<span class="token operator">=</span><span class="token string">&quot;false&quot;</span>
            unique<span class="token operator">-</span>opened<span class="token operator">=</span><span class="token string">&quot;true&quot;</span>
        <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item, index) in asideMenus&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu
                    v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;item.child &amp;&amp; item.child.length &gt; 0&quot;</span>
                    <span class="token operator">:</span>index<span class="token operator">=</span><span class="token string">&quot;item.name&quot;</span>
                <span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>template #title<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">&quot;item.icon&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item
                        v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item2, index2) in item.child&quot;</span>
                        <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index2&quot;</span>
                        <span class="token operator">:</span>index<span class="token operator">=</span><span class="token string">&quot;item2.frontpath&quot;</span>
                    <span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">&quot;item2.icon&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item2<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item v<span class="token operator">-</span><span class="token keyword">else</span> <span class="token operator">:</span>index<span class="token operator">=</span><span class="token string">&quot;item.frontpath&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">&quot;item.icon&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 是否折叠</span>
<span class="token keyword">const</span> isCollapse <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>asideWidth <span class="token operator">==</span> <span class="token string">&quot;250px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> asideMenus <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;后台面板&quot;</span><span class="token punctuation">,</span>
        icon<span class="token operator">:</span> <span class="token string">&quot;help&quot;</span><span class="token punctuation">,</span>
        child<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                name<span class="token operator">:</span> <span class="token string">&quot;主控台&quot;</span><span class="token punctuation">,</span>
                frontpath<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
                icon<span class="token operator">:</span> <span class="token string">&quot;home-filled&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;商城管理&quot;</span><span class="token punctuation">,</span>
        icon<span class="token operator">:</span> <span class="token string">&quot;shopping-bag&quot;</span><span class="token punctuation">,</span>
        child<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                name<span class="token operator">:</span> <span class="token string">&quot;商品管理&quot;</span><span class="token punctuation">,</span>
                frontpath<span class="token operator">:</span> <span class="token string">&quot;/goods/list&quot;</span><span class="token punctuation">,</span>
                icon<span class="token operator">:</span> <span class="token string">&quot;shopping-cart-full&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleSelect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scope<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>f<span class="token operator">-</span>menu <span class="token punctuation">{</span>
    transition<span class="token operator">:</span> all <span class="token number">0.2</span>s<span class="token punctuation">;</span>
    top<span class="token operator">:</span> <span class="token number">64</span>px<span class="token punctuation">;</span>
    bottom<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    overflow<span class="token operator">-</span>y<span class="token operator">:</span> auto<span class="token punctuation">;</span>
    overflow<span class="token operator">-</span>x<span class="token operator">:</span> hidden<span class="token punctuation">;</span>
    @apply shadow<span class="token operator">-</span>md fixed bg<span class="token operator">-</span>light<span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">主要内容</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;f-menu&quot;</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ width: $store.state.asideWidth }&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu
            <span class="token operator">:</span>collapse<span class="token operator">=</span><span class="token string">&quot;isCollapse&quot;</span>
            @select<span class="token operator">=</span><span class="token string">&quot;handleSelect&quot;</span>
            <span class="token keyword">default</span><span class="token operator">-</span>active<span class="token operator">=</span><span class="token string">&quot;2&quot;</span>
            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;border-0&quot;</span>
            <span class="token operator">:</span>collapse<span class="token operator">-</span>transition<span class="token operator">=</span><span class="token string">&quot;false&quot;</span>
            unique<span class="token operator">-</span>opened<span class="token operator">=</span><span class="token string">&quot;true&quot;</span>
        <span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>动态绑定宽度样式</li> <li>使用<code>collapse</code>属性来决定是否展开，下面使用<code>isCollapse</code>判断宽度是否是<code>250px</code>来返回布尔值</li> <li><code>collapse-transition</code>取消它本身的一个动画效果，会比较慢</li> <li><code>unique-opened</code>让菜单栏只能有一个点击展开</li></ul></div> <h2 id="设置菜单选中和路由关联"><a href="#设置菜单选中和路由关联" class="header-anchor">#</a> 设置菜单选中和路由关联</h2> <p>即菜单的一个属性：<code>default-active</code>要和当前路由相等</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>el<span class="token operator">-</span>menu
            <span class="token operator">:</span>collapse<span class="token operator">=</span><span class="token string">&quot;isCollapse&quot;</span>
            @select<span class="token operator">=</span><span class="token string">&quot;handleSelect&quot;</span>
            <span class="token operator">:</span><span class="token keyword">default</span><span class="token operator">-</span>active<span class="token operator">=</span><span class="token string">&quot;defaultActive&quot;</span>
            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;border-0&quot;</span>
            <span class="token operator">:</span>collapse<span class="token operator">-</span>transition<span class="token operator">=</span><span class="token string">&quot;false&quot;</span>
            unique<span class="token operator">-</span>opened<span class="token operator">=</span><span class="token string">&quot;true&quot;</span>
        <span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>给菜单动态绑定一个属性值默认等于当前路由</p> <p>我们需要使用<code>useRoute</code>来获取</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter<span class="token punctuation">,</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 当前路由路径 默认选中</span>
<span class="token keyword">const</span> defaultActive <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>path<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="菜单数据前后端交互"><a href="#菜单数据前后端交互" class="header-anchor">#</a> 菜单数据前后端交互</h2> <p>我们在前面有一个获取后台用户信息的接口，调用里面存储了菜单信息和一些权限信息，我们需要在<code>vuex</code>里进行存储调用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> login<span class="token punctuation">,</span> getInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'~/api/manager'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> setToken<span class="token punctuation">,</span> removeToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'~/composables/auth'</span>
<span class="token comment">// 创建一个新的 store 实例</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            user<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 默认空对象 用户信息</span>
            <span class="token comment">// 侧边宽度</span>
            asideWidth<span class="token operator">:</span> <span class="token string">'250px'</span><span class="token punctuation">,</span>
            <span class="token comment">// 菜单数据</span>
            menus<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">// 权限菜单相关数据</span>
            ruleNames<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ... 其他代码</span>

        <span class="token constant">SET_MENUS</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> menus</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>menus <span class="token operator">=</span> menus
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token constant">SET_RULENAMES</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> ruleNames</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>ruleNames <span class="token operator">=</span> ruleNames
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 异步</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取当前登录用户信息</span>
        <span class="token function">getAdminUserInfo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SET_USERINFO'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
                        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SET_MENUS'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>menus<span class="token punctuation">)</span>
                        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SET_RULENAMES'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>ruleNames<span class="token punctuation">)</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// ... 其他代码</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>然后需要将我们菜单组件里的设置的假的菜单数组变成从<code>vuex</code>里获取菜单数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> asideMenus <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>同时我们将菜单栏的一个下拉的宽度的设置掉，否则比较难看</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.f-menu::-webkit-scrollbar</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="根据菜单动态添加路由"><a href="#根据菜单动态添加路由" class="header-anchor">#</a> 根据菜单动态添加路由</h2> <p>我们需要拆分出 2 个路由数组，一个是默认路由，比如首页、登录、404 页面等，</p> <p>别的则是根据菜单动态添加的。</p> <p>添加嵌套路由文档：<a href="https://router.vuejs.org/zh/guide/advanced/dynamic-routing.html#%E6%B7%BB%E5%8A%A0%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener noreferrer">https://router.vuejs.org/zh/guide/advanced/dynamic-routing.html#%E6%B7%BB%E5%8A%A0%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>就是需要指定一个父级路由的<code>name</code>值</p> <p><code>router/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> Admin <span class="token keyword">from</span> <span class="token string">'~/layouts/admin.vue'</span>
<span class="token keyword">import</span> Index <span class="token keyword">from</span> <span class="token string">'~/pages/index.vue'</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">'~/pages/login.vue'</span>
<span class="token keyword">import</span> NotFound <span class="token keyword">from</span> <span class="token string">'~/pages/404.vue'</span>
<span class="token keyword">import</span> GoodList <span class="token keyword">from</span> <span class="token string">'~/pages/goods/list.vue'</span>
<span class="token keyword">import</span> CategoryList <span class="token keyword">from</span> <span class="token string">'~/pages/category/list.vue'</span>

<span class="token comment">// 默认路由 所有用户共享</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> Admin<span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> Login<span class="token punctuation">,</span>
        meta<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'登录页'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/:pathMatch(.*)*'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'NotFound'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> NotFound<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// 动态路由，用于匹配菜单动态添加路由</span>
<span class="token keyword">const</span> asyncRoutes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> Index<span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        meta<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'后台首页'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/goods/list'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'/goods/list'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> GoodList<span class="token punctuation">,</span>
        meta<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'商品管理'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/category/list'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'/category/list'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> CategoryList<span class="token punctuation">,</span>
        meta<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'分类列表'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// const routes = [</span>
<span class="token comment">//     {</span>
<span class="token comment">//         path: '/',</span>
<span class="token comment">//         component: Admin,</span>
<span class="token comment">//         // 子路由</span>
<span class="token comment">//         children: [</span>
<span class="token comment">//             {</span>
<span class="token comment">//                 path: '/',</span>
<span class="token comment">//                 component: Index,</span>
<span class="token comment">//                 meta: {</span>
<span class="token comment">//                     title: '后台首页',</span>
<span class="token comment">//                 },</span>
<span class="token comment">//             },</span>
<span class="token comment">//             {</span>
<span class="token comment">//                 path: '/goods/list',</span>
<span class="token comment">//                 component: GoodList,</span>
<span class="token comment">//                 meta: {</span>
<span class="token comment">//                     title: '商品管理',</span>
<span class="token comment">//                 },</span>
<span class="token comment">//             },</span>
<span class="token comment">//             {</span>
<span class="token comment">//                 path: '/category/list',</span>
<span class="token comment">//                 component: CategoryList,</span>
<span class="token comment">//                 meta: {</span>
<span class="token comment">//                     title: '分类列表',</span>
<span class="token comment">//                 },</span>
<span class="token comment">//             },</span>
<span class="token comment">//         ],</span>
<span class="token comment">//     },</span>
<span class="token comment">//     {</span>
<span class="token comment">//         path: '/login',</span>
<span class="token comment">//         component: Login,</span>
<span class="token comment">//         meta: {</span>
<span class="token comment">//             title: '登录页',</span>
<span class="token comment">//         },</span>
<span class="token comment">//     },</span>
<span class="token comment">//     {</span>
<span class="token comment">//         path: '/:pathMatch(.*)*',</span>
<span class="token comment">//         name: 'NotFound',</span>
<span class="token comment">//         component: NotFound,</span>
<span class="token comment">//     },</span>
<span class="token comment">// ]</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 动态添加路由的方法</span>
<span class="token comment">// 接收后端的一个菜单</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">addRoutes</span><span class="token punctuation">(</span><span class="token parameter">menus</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 是否有新的路由</span>
    <span class="token keyword">let</span> hasNewRoutes <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">const</span> <span class="token function-variable function">findAndAddRoutesByMenus</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// e 菜单的每个对象</span>
            <span class="token comment">// e.frontpath 菜单路径</span>
            <span class="token keyword">let</span> item <span class="token operator">=</span> asyncRoutes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>path <span class="token operator">==</span> e<span class="token punctuation">.</span>frontpath<span class="token punctuation">)</span>
            <span class="token comment">// 判断是否相同 且检查路由是否存在 传入的是一个name值 先设置和path一样</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>router<span class="token punctuation">.</span><span class="token function">hasRoute</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
                hasNewRoutes <span class="token operator">=</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 是否存在子菜单</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>child <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>child<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 递归调用</span>
                <span class="token function">findAndAddRoutesByMenus</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>child<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 外部执行一下</span>
    <span class="token function">findAndAddRoutesByMenus</span><span class="token punctuation">(</span>menus<span class="token punctuation">)</span>

    <span class="token comment">// 查看现有路由</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">getRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> hasNewRoutes
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br></div></div><p><code>permission.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 处理权限相关的内容</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> router<span class="token punctuation">,</span> addRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'~/composables/auth'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> toast<span class="token punctuation">,</span> showFullLoading<span class="token punctuation">,</span> hideFullLoading <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'~/composables/util'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token comment">// 全局前置守卫</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 显示loading</span>
    <span class="token function">showFullLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// console.log('全局前置守卫')</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 没有登录强制跳转回登录页</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>token <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>path <span class="token operator">!=</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'请先登录'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/login'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 防止重复登录判断</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'请务重复登录'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
        <span class="token comment">// 从哪里来就从哪里去</span>
        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> from<span class="token punctuation">.</span>path <span class="token operator">?</span> from<span class="token punctuation">.</span>path <span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> hasNewRoutes <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token comment">// 如果用户登录了就自动获取用户信息，并存储在vuex中</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 异步 resolve(res) 的res 进行解构出菜单</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> menus <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'getAdminUserInfo'</span><span class="token punctuation">)</span>
        <span class="token comment">// 动态添加路由</span>
        hasNewRoutes <span class="token operator">=</span> <span class="token function">addRoutes</span><span class="token punctuation">(</span>menus<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 设置页面标题</span>
    <span class="token comment">// console.log(to.meta.title) // 拿到标题</span>
    <span class="token keyword">let</span> title <span class="token operator">=</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title <span class="token operator">?</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-无解的管理后台'</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> title
    <span class="token comment">// 如果有新的路由走指定的 否则直接 next()</span>
    hasNewRoutes <span class="token operator">?</span> <span class="token function">next</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 放行</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 全局后置守卫</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">hideFullLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="标签导航组件实现"><a href="#标签导航组件实现" class="header-anchor">#</a> 标签导航组件实现</h2> <h3 id="样式布局"><a href="#样式布局" class="header-anchor">#</a> 样式布局</h3> <p>使用<code>element-plus</code>的动态标签：<a href="https://element-plus.gitee.io/zh-CN/component/tabs.html" target="_blank" rel="noopener noreferrer">https://element-plus.gitee.io/zh-CN/component/tabs.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://element-plus.gitee.io/zh-CN/component/tabs.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A2%9E%E5%8A%A0%E6%A0%87%E7%AD%BE%E9%A1%B5%E8%A7%A6%E5%8F%91%E5%99%A8" target="_blank" rel="noopener noreferrer">https://element-plus.gitee.io/zh-CN/component/tabs.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A2%9E%E5%8A%A0%E6%A0%87%E7%AD%BE%E9%A1%B5%E8%A7%A6%E5%8F%91%E5%99%A8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;f-tag-list&quot;</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ left: $store.state.asideWidth }&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>tabs
            v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;editableTabsValue&quot;</span>
            type<span class="token operator">=</span><span class="token string">&quot;card&quot;</span>
            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;flex-1&quot;</span>
            closable
            @tab<span class="token operator">-</span>remove<span class="token operator">=</span><span class="token string">&quot;removeTab&quot;</span>
            style<span class="token operator">=</span><span class="token string">&quot;min-width: 100px&quot;</span>
        <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>tab<span class="token operator">-</span>pane
                v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in editableTabs&quot;</span>
                <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.name&quot;</span>
                <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;item.title&quot;</span>
                <span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;item.name&quot;</span>
            <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tab<span class="token operator">-</span>pane<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tabs<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tag-btn&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-dropdown-link&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-icon--right&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>arrow<span class="token operator">-</span>down <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>template #dropdown<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>Action <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>Action <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>Action <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item disabled<span class="token operator">&gt;</span>Action <span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item divided<span class="token operator">&gt;</span>Action <span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> tabIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> editableTabsValue <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> editableTabs <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 1&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 1 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 2&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 2 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 2&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 2 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 2&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 2 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 2&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 2 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 2&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 2 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 2&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 2 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 2&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 2 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 2&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 2 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;Tab 2&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;Tab 2 content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">addTab</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">targetName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newTabName <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token operator">++</span>tabIndex<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    editableTabs<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;New Tab&quot;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> newTabName<span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token string">&quot;New Tab content&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    editableTabsValue<span class="token punctuation">.</span>value <span class="token operator">=</span> newTabName<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">removeTab</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">targetName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tabs <span class="token operator">=</span> editableTabs<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">let</span> activeName <span class="token operator">=</span> editableTabsValue<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>activeName <span class="token operator">===</span> targetName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tabs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tab<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tab<span class="token punctuation">.</span>name <span class="token operator">===</span> targetName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> nextTab <span class="token operator">=</span> tabs<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> tabs<span class="token punctuation">[</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>nextTab<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    activeName <span class="token operator">=</span> nextTab<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    editableTabsValue<span class="token punctuation">.</span>value <span class="token operator">=</span> activeName<span class="token punctuation">;</span>
    editableTabs<span class="token punctuation">.</span>value <span class="token operator">=</span> tabs<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> tab<span class="token punctuation">.</span>name <span class="token operator">!==</span> targetName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>f<span class="token operator">-</span>tag<span class="token operator">-</span>list <span class="token punctuation">{</span>
    top<span class="token operator">:</span> <span class="token number">65</span>px<span class="token punctuation">;</span>
    right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">44</span>px<span class="token punctuation">;</span>
    @apply fixed bg<span class="token operator">-</span>gray<span class="token operator">-</span><span class="token number">100</span> flex items<span class="token operator">-</span>center px<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>
    z<span class="token operator">-</span>index<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>tag<span class="token operator">-</span>btn <span class="token punctuation">{</span>
    @apply bg<span class="token operator">-</span>white rounded ml<span class="token operator">-</span>auto flex items<span class="token operator">-</span>center justify<span class="token operator">-</span>center px<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__header</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    @apply mb<span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__nav</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    border<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    border<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
    @apply bg<span class="token operator">-</span>white mx<span class="token operator">-</span><span class="token number">1</span> rounded<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
    line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__nav<span class="token operator">-</span>next<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__nav<span class="token operator">-</span>prev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>is<span class="token operator">-</span>disabled</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cursor<span class="token operator">:</span> not<span class="token operator">-</span>allowed<span class="token punctuation">;</span>
    @apply text<span class="token operator">-</span>gray<span class="token operator">-</span><span class="token number">300</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br></div></div><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221019232256.png" alt="效果图"></p> <h3 id="同步路由和存储"><a href="#同步路由和存储" class="header-anchor">#</a> 同步路由和存储</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;f-tag-list&quot;</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ left: $store.state.asideWidth }&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>tabs
            v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;activeTab&quot;</span>
            type<span class="token operator">=</span><span class="token string">&quot;card&quot;</span>
            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;flex-1&quot;</span>
            @tab<span class="token operator">-</span>remove<span class="token operator">=</span><span class="token string">&quot;removeTab&quot;</span>
            style<span class="token operator">=</span><span class="token string">&quot;min-width: 100px&quot;</span>
            @tab<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">&quot;changeTab&quot;</span>
        <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 如果是首页不显示关闭按钮 <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>tab<span class="token operator">-</span>pane
                v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in tabList&quot;</span>
                <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.path&quot;</span>
                <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;item.title&quot;</span>
                <span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;item.path&quot;</span>
                <span class="token operator">:</span>closable<span class="token operator">=</span><span class="token string">&quot;item.path != '/'&quot;</span>
            <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tab<span class="token operator">-</span>pane<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tabs<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tag-btn&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-dropdown-link&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>arrow<span class="token operator">-</span>down <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>template #dropdown<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>Action <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>Action <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>Action <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item disabled<span class="token operator">&gt;</span>Action <span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item divided<span class="token operator">&gt;</span>Action <span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;height: 44px&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute<span class="token punctuation">,</span> onBeforeRouteUpdate<span class="token punctuation">,</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCookies <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/integrations/useCookies&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cookie <span class="token operator">=</span> <span class="token function">useCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> activeTab <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tabList <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;后台首页&quot;</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;商城管理&quot;</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> <span class="token string">&quot;/goods/list&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">changeTab</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    activeTab<span class="token punctuation">.</span>value <span class="token operator">=</span> t<span class="token punctuation">;</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">addTab</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> notTab <span class="token operator">=</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>path <span class="token operator">==</span> tab<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>notTab<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tabList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cookie<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;tabList&quot;</span><span class="token punctuation">,</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 初始化标签导航列表</span>
<span class="token keyword">function</span> <span class="token function">initTabList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tabs <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;tabList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tabs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tabList<span class="token punctuation">.</span>value <span class="token operator">=</span> tabs<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">initTabList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onBeforeRouteUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置tab激活</span>
    activeTab<span class="token punctuation">.</span>value <span class="token operator">=</span> to<span class="token punctuation">.</span>path<span class="token punctuation">;</span>
    <span class="token comment">// console.log(to, from);</span>
    <span class="token function">addTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        title<span class="token operator">:</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
        path<span class="token operator">:</span> to<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">removeTab</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">targetName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>f<span class="token operator">-</span>tag<span class="token operator">-</span>list <span class="token punctuation">{</span>
    top<span class="token operator">:</span> <span class="token number">65</span>px<span class="token punctuation">;</span>
    right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">44</span>px<span class="token punctuation">;</span>
    @apply fixed bg<span class="token operator">-</span>gray<span class="token operator">-</span><span class="token number">100</span> flex items<span class="token operator">-</span>center px<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>
    z<span class="token operator">-</span>index<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>tag<span class="token operator">-</span>btn <span class="token punctuation">{</span>
    @apply bg<span class="token operator">-</span>white rounded ml<span class="token operator">-</span>auto flex items<span class="token operator">-</span>center justify<span class="token operator">-</span>center px<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__header</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    border<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
    @apply mb<span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__nav</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    border<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    border<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
    @apply bg<span class="token operator">-</span>white mx<span class="token operator">-</span><span class="token number">1</span> rounded<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
    line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__nav<span class="token operator">-</span>next<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__nav<span class="token operator">-</span>prev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>is<span class="token operator">-</span>disabled</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cursor<span class="token operator">:</span> not<span class="token operator">-</span>allowed<span class="token punctuation">;</span>
    @apply text<span class="token operator">-</span>gray<span class="token operator">-</span><span class="token number">300</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br></div></div><h3 id="关闭当前标签处理"><a href="#关闭当前标签处理" class="header-anchor">#</a> 关闭当前标签处理</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;f-tag-list&quot;</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ left: $store.state.asideWidth }&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>tabs
            v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;activeTab&quot;</span>
            type<span class="token operator">=</span><span class="token string">&quot;card&quot;</span>
            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;flex-1&quot;</span>
            @tab<span class="token operator">-</span>remove<span class="token operator">=</span><span class="token string">&quot;removeTab&quot;</span>
            style<span class="token operator">=</span><span class="token string">&quot;min-width: 100px&quot;</span>
            @tab<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">&quot;changeTab&quot;</span>
        <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 如果是首页不显示关闭按钮 <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>tab<span class="token operator">-</span>pane
                v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in tabList&quot;</span>
                <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.path&quot;</span>
                <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;item.title&quot;</span>
                <span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;item.path&quot;</span>
                <span class="token operator">:</span>closable<span class="token operator">=</span><span class="token string">&quot;item.path != '/'&quot;</span>
            <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tab<span class="token operator">-</span>pane<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tabs<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tag-btn&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-dropdown-link&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>arrow<span class="token operator">-</span>down <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>template #dropdown<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>Action <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>Action <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>Action <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item disabled<span class="token operator">&gt;</span>Action <span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item divided<span class="token operator">&gt;</span>Action <span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;height: 44px&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute<span class="token punctuation">,</span> onBeforeRouteUpdate<span class="token punctuation">,</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCookies <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/integrations/useCookies&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cookie <span class="token operator">=</span> <span class="token function">useCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> activeTab <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tabList <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;后台首页&quot;</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;商城管理&quot;</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> <span class="token string">&quot;/goods/list&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">changeTab</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    activeTab<span class="token punctuation">.</span>value <span class="token operator">=</span> t<span class="token punctuation">;</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">addTab</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> notTab <span class="token operator">=</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>path <span class="token operator">==</span> tab<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>notTab<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tabList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cookie<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;tabList&quot;</span><span class="token punctuation">,</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 初始化标签导航列表</span>
<span class="token keyword">function</span> <span class="token function">initTabList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tabs <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;tabList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tabs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tabList<span class="token punctuation">.</span>value <span class="token operator">=</span> tabs<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">initTabList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onBeforeRouteUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置tab激活</span>
    activeTab<span class="token punctuation">.</span>value <span class="token operator">=</span> to<span class="token punctuation">.</span>path<span class="token punctuation">;</span>
    <span class="token comment">// console.log(to, from);</span>
    <span class="token function">addTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        title<span class="token operator">:</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
        path<span class="token operator">:</span> to<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">removeTab</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(t);</span>
    <span class="token comment">// 1. 判断关闭的是否是当前激活的</span>
    <span class="token keyword">let</span> tabs <span class="token operator">=</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> activeTab<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tabs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tab<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tab<span class="token punctuation">.</span>path <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> nextTab <span class="token operator">=</span> tabs<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> tabs<span class="token punctuation">[</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 如果没有下一个就去拿上一个</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>nextTab<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 设置下一个激活的值</span>
                    a <span class="token operator">=</span> nextTab<span class="token punctuation">.</span>path<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    activeTab<span class="token punctuation">.</span>value <span class="token operator">=</span> a<span class="token punctuation">;</span>
    <span class="token comment">// 只有不等于当前关闭的留下来</span>
    tabList<span class="token punctuation">.</span>value <span class="token operator">=</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> tab<span class="token punctuation">.</span>path <span class="token operator">!=</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 更新存储的cookie</span>
    cookie<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;tabList&quot;</span><span class="token punctuation">,</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>f<span class="token operator">-</span>tag<span class="token operator">-</span>list <span class="token punctuation">{</span>
    top<span class="token operator">:</span> <span class="token number">65</span>px<span class="token punctuation">;</span>
    right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">44</span>px<span class="token punctuation">;</span>
    @apply fixed bg<span class="token operator">-</span>gray<span class="token operator">-</span><span class="token number">100</span> flex items<span class="token operator">-</span>center px<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>
    z<span class="token operator">-</span>index<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>tag<span class="token operator">-</span>btn <span class="token punctuation">{</span>
    @apply bg<span class="token operator">-</span>white rounded ml<span class="token operator">-</span>auto flex items<span class="token operator">-</span>center justify<span class="token operator">-</span>center px<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__header</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    border<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
    @apply mb<span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__nav</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    border<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    border<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
    @apply bg<span class="token operator">-</span>white mx<span class="token operator">-</span><span class="token number">1</span> rounded<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
    line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__nav<span class="token operator">-</span>next<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>el<span class="token operator">-</span>tabs__nav<span class="token operator">-</span>prev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>is<span class="token operator">-</span>disabled</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cursor<span class="token operator">:</span> not<span class="token operator">-</span>allowed<span class="token punctuation">;</span>
    @apply text<span class="token operator">-</span>gray<span class="token operator">-</span><span class="token number">300</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br></div></div><h3 id="实现关闭全部标签功能"><a href="#实现关闭全部标签功能" class="header-anchor">#</a> 实现关闭全部标签功能</h3> <p>我们使用组合式<code>api</code>来简化页面的<code>script</code>部分</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>useTabList<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;~/composables/useTabList.js&quot;</span><span class="token punctuation">;</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>activeTab<span class="token punctuation">,</span> tabList<span class="token punctuation">,</span> changeTab<span class="token punctuation">,</span> removeTab<span class="token punctuation">,</span> handleClose<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useTabList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute<span class="token punctuation">,</span> onBeforeRouteUpdate<span class="token punctuation">,</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCookies <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueuse/integrations/useCookies'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useTabList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> cookie <span class="token operator">=</span> <span class="token function">useCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> activeTab <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>path<span class="token punctuation">)</span>
    <span class="token keyword">const</span> tabList <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'后台首页'</span><span class="token punctuation">,</span>
            path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'商城管理'</span><span class="token punctuation">,</span>
            path<span class="token operator">:</span> <span class="token string">'/goods/list'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">changeTab</span> <span class="token operator">=</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        activeTab<span class="token punctuation">.</span>value <span class="token operator">=</span> t
        router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">addTab</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> notTab <span class="token operator">=</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>path <span class="token operator">==</span> tab<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>notTab<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            tabList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        cookie<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'tabList'</span><span class="token punctuation">,</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 初始化标签导航列表</span>
    <span class="token keyword">function</span> <span class="token function">initTabList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> tabs <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'tabList'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tabs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            tabList<span class="token punctuation">.</span>value <span class="token operator">=</span> tabs
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">initTabList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token function">onBeforeRouteUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 设置tab激活</span>
        activeTab<span class="token punctuation">.</span>value <span class="token operator">=</span> to<span class="token punctuation">.</span>path
        <span class="token comment">// console.log(to, from);</span>
        <span class="token function">addTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            title<span class="token operator">:</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
            path<span class="token operator">:</span> to<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">removeTab</span> <span class="token operator">=</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(t);</span>
        <span class="token comment">// 1. 判断关闭的是否是当前激活的</span>
        <span class="token keyword">let</span> tabs <span class="token operator">=</span> tabList<span class="token punctuation">.</span>value
        <span class="token keyword">let</span> a <span class="token operator">=</span> activeTab<span class="token punctuation">.</span>value
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            tabs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tab<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>tab<span class="token punctuation">.</span>path <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> nextTab <span class="token operator">=</span> tabs<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> tabs<span class="token punctuation">[</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 如果没有下一个就去拿上一个</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextTab<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// 设置下一个激活的值</span>
                        a <span class="token operator">=</span> nextTab<span class="token punctuation">.</span>path
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        activeTab<span class="token punctuation">.</span>value <span class="token operator">=</span> a
        <span class="token comment">// 只有不等于当前关闭的留下来</span>
        tabList<span class="token punctuation">.</span>value <span class="token operator">=</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">tab</span> <span class="token operator">=&gt;</span> tab<span class="token punctuation">.</span>path <span class="token operator">!=</span> t<span class="token punctuation">)</span>
        <span class="token comment">// 更新存储的cookie</span>
        cookie<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'tabList'</span><span class="token punctuation">,</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">handleClose</span> <span class="token operator">=</span> <span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token string">'clearAll'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 清除所有，切换回首页</span>
            activeTab<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'/'</span>
            <span class="token comment">// 过滤只想剩下首页</span>
            tabList<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    title<span class="token operator">:</span> <span class="token string">'后台首页'</span><span class="token punctuation">,</span>
                    paht<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token string">'clearOther'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 过滤只剩下首页和当前激活</span>
            tabList<span class="token punctuation">.</span>value <span class="token operator">=</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">tab</span> <span class="token operator">=&gt;</span> tab<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/'</span> <span class="token operator">||</span> tab<span class="token punctuation">.</span>path <span class="token operator">==</span> activeTab<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        cookie<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'tabList'</span><span class="token punctuation">,</span> tabList<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        activeTab<span class="token punctuation">,</span>
        tabList<span class="token punctuation">,</span>
        changeTab<span class="token punctuation">,</span>
        removeTab<span class="token punctuation">,</span>
        handleClose<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br></div></div><h2 id="优化加载菜单的速度"><a href="#优化加载菜单的速度" class="header-anchor">#</a> 优化加载菜单的速度</h2> <p>这里会发现，点击一个菜单，会触发 2 次调用<code>getInfo</code>接口，就会导致页面加载比较慢。</p> <p>我们在全局前置守卫里进行设置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 防止重复加载 getinfo</span>
<span class="token keyword">let</span> hasGetInfo <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment">// 全局前置守卫</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 显示loading</span>
    <span class="token function">showFullLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// console.log('全局前置守卫')</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 没有登录强制跳转回登录页</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>token <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>path <span class="token operator">!=</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'请先登录'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/login'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 防止重复登录判断</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'请务重复登录'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
        <span class="token comment">// 从哪里来就从哪里去</span>
        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> from<span class="token punctuation">.</span>path <span class="token operator">?</span> from<span class="token punctuation">.</span>path <span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> hasNewRoutes <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token comment">// 如果用户登录了就自动获取用户信息，并存储在vuex中</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>hasGetInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 异步 resolve(res) 的res 进行解构出菜单</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> menus <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'getAdminUserInfo'</span><span class="token punctuation">)</span>
        hasGetInfo <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token comment">// 动态添加路由</span>
        hasNewRoutes <span class="token operator">=</span> <span class="token function">addRoutes</span><span class="token punctuation">(</span>menus<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 设置页面标题</span>
    <span class="token comment">// console.log(to.meta.title) // 拿到标题</span>
    <span class="token keyword">let</span> title <span class="token operator">=</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title <span class="token operator">?</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-无解的管理后台'</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> title
    <span class="token comment">// 如果有新的路由走指定的 否则直接 next()</span>
    hasNewRoutes <span class="token operator">?</span> <span class="token function">next</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 放行</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="使用-keep-alive-页面缓存"><a href="#使用-keep-alive-页面缓存" class="header-anchor">#</a> 使用 keep-alive 页面缓存</h2> <p><code>vue3</code>相关文档地址：<a href="https://cn.vuejs.org/guide/built-ins/keep-alive.html#keepalive" target="_blank" rel="noopener noreferrer">https://cn.vuejs.org/guide/built-ins/keep-alive.html#keepalive<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-container</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 头部 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-header</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f-header</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-header</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-container</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-aside</span> <span class="token attr-name">:width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$store.state.asideWidth<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f-menu</span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-aside</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-main</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f-tag-list</span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!-- 缓存10个 --&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">:max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-main</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-container</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-container</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="使用-transition-全局过渡动画"><a href="#使用-transition-全局过渡动画" class="header-anchor">#</a> 使用 transition 全局过渡动画</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 头部 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>header<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>f<span class="token operator">-</span>header <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>aside <span class="token operator">:</span>width<span class="token operator">=</span><span class="token string">&quot;$store.state.asideWidth&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>f<span class="token operator">-</span>menu <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>aside<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>main<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>f<span class="token operator">-</span>tag<span class="token operator">-</span>list <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>router<span class="token operator">-</span>view v<span class="token operator">-</span>slot<span class="token operator">=</span><span class="token string">&quot;{ Component }&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>transition name<span class="token operator">=</span><span class="token string">&quot;fade&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 缓存<span class="token number">10</span>个 <span class="token operator">--</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive <span class="token operator">:</span>max<span class="token operator">=</span><span class="token string">&quot;10&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">&quot;Component&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>main<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> FHeader <span class="token keyword">from</span> <span class="token string">&quot;./components/FHeader.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FMenu <span class="token keyword">from</span> <span class="token string">&quot;./components/FMenu.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FTagList <span class="token keyword">from</span> <span class="token string">&quot;./components/FTagList.vue&quot;</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>el<span class="token operator">-</span>aside <span class="token punctuation">{</span>
    transition<span class="token operator">:</span> all <span class="token number">0.2</span>s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 进入之前 */</span>
<span class="token punctuation">.</span>fade<span class="token operator">-</span>enter<span class="token operator">-</span>from <span class="token punctuation">{</span>
    opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 进入之后 */</span>
<span class="token punctuation">.</span>fade<span class="token operator">-</span>enter<span class="token operator">-</span>to <span class="token punctuation">{</span>
    opacity<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 离开之前 */</span>
<span class="token punctuation">.</span>fade<span class="token operator">-</span>leave<span class="token operator">-</span>from <span class="token punctuation">{</span>
    opacity<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 离开之后 */</span>
<span class="token punctuation">.</span>fade<span class="token operator">-</span>leave<span class="token operator">-</span>to <span class="token punctuation">{</span>
    opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>fade<span class="token operator">-</span>enter<span class="token operator">-</span>active<span class="token punctuation">,</span>
<span class="token punctuation">.</span>fade<span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token punctuation">{</span>
    transition<span class="token operator">:</span> all <span class="token number">0.3</span>s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 进入动画延迟 */</span>
<span class="token punctuation">.</span>fade<span class="token operator">-</span>enter<span class="token operator">-</span>active <span class="token punctuation">{</span>
    transition<span class="token operator">-</span>delay<span class="token operator">:</span> <span class="token number">0.3</span>s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><p>:::caution 注意</p> <p>如果使用<code>transition</code>，每个页面的根节点只能有一个，也就是说<code>template</code>下的<code>div</code>只能有一个，否则就会失效，而且<code>console</code>页面还会警告。</p> <p>:::</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sword-demon/edit/master/docs/02.页面/40.vue3/05.后台布局开发.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=layout" title="标签">#layout</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/12/08, 22:08:26</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/e34480/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">登录页开发</div></a> <a href="/pages/3cd1cd/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">vue3配合vite初始化项目的一些配置</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/e34480/" class="prev">登录页开发</a></span> <span class="next"><a href="/pages/3cd1cd/">vue3配合vite初始化项目的一些配置</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/3cd1cd/"><div>vue3配合vite初始化项目的一些配置</div></a> <span>07-26</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/5fc93f/"><div>网盘系统开发学习</div></a> <span>07-24</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/b75b0e/"><div>linux多进程</div></a> <span>06-19</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:2468170366@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/sword-demon" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/wxvirus" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>wxvirus <div>苏ICP备2021007210号-1</div></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.c8a5ac2c.js" defer></script><script src="/assets/js/2.5e51705b.js" defer></script><script src="/assets/js/201.724b8283.js" defer></script>
  </body>
</html>