<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux安装PHP7和Swoole扩展 | wxvirus</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/icon.png">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="年轻的后端，学习ing">
    <meta name="无解" content="个人学习博客和笔记">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.3aa0083c.css" as="style"><link rel="preload" href="/assets/js/app.3b9d97f1.js" as="script"><link rel="preload" href="/assets/js/2.5e51705b.js" as="script"><link rel="preload" href="/assets/js/216.abd2662b.js" as="script"><link rel="prefetch" href="/assets/js/10.90c765a3.js"><link rel="prefetch" href="/assets/js/100.c2962f19.js"><link rel="prefetch" href="/assets/js/101.a1f8fd96.js"><link rel="prefetch" href="/assets/js/102.852b3112.js"><link rel="prefetch" href="/assets/js/103.c381a9f7.js"><link rel="prefetch" href="/assets/js/104.d729ba25.js"><link rel="prefetch" href="/assets/js/105.04e88317.js"><link rel="prefetch" href="/assets/js/106.b3294ba7.js"><link rel="prefetch" href="/assets/js/107.a0191286.js"><link rel="prefetch" href="/assets/js/108.7caf59e0.js"><link rel="prefetch" href="/assets/js/109.94070358.js"><link rel="prefetch" href="/assets/js/11.8c787e23.js"><link rel="prefetch" href="/assets/js/110.1bf3176a.js"><link rel="prefetch" href="/assets/js/111.8d9becd2.js"><link rel="prefetch" href="/assets/js/112.f2cc45e5.js"><link rel="prefetch" href="/assets/js/113.256ae236.js"><link rel="prefetch" href="/assets/js/114.28d9428d.js"><link rel="prefetch" href="/assets/js/115.b52c03c9.js"><link rel="prefetch" href="/assets/js/116.592bf753.js"><link rel="prefetch" href="/assets/js/117.9549cc1b.js"><link rel="prefetch" href="/assets/js/118.7cfc70a3.js"><link rel="prefetch" href="/assets/js/119.19f15102.js"><link rel="prefetch" href="/assets/js/12.971b95e8.js"><link rel="prefetch" href="/assets/js/120.f02ae8aa.js"><link rel="prefetch" href="/assets/js/121.2ea99f08.js"><link rel="prefetch" href="/assets/js/122.2ecf4c69.js"><link rel="prefetch" href="/assets/js/123.33b2dd72.js"><link rel="prefetch" href="/assets/js/124.bdf25a37.js"><link rel="prefetch" href="/assets/js/125.aef429d7.js"><link rel="prefetch" href="/assets/js/126.18964a3b.js"><link rel="prefetch" href="/assets/js/127.8b5dc8ce.js"><link rel="prefetch" href="/assets/js/128.0b5f448e.js"><link rel="prefetch" href="/assets/js/129.3ccf0744.js"><link rel="prefetch" href="/assets/js/13.83ca8138.js"><link rel="prefetch" href="/assets/js/130.5be525a7.js"><link rel="prefetch" href="/assets/js/131.c911cff5.js"><link rel="prefetch" href="/assets/js/132.8b5b1871.js"><link rel="prefetch" href="/assets/js/133.4c68eb41.js"><link rel="prefetch" href="/assets/js/134.74db8dc6.js"><link rel="prefetch" href="/assets/js/135.369ae1bc.js"><link rel="prefetch" href="/assets/js/136.cb655490.js"><link rel="prefetch" href="/assets/js/137.bf6d98b3.js"><link rel="prefetch" href="/assets/js/138.4552a8b5.js"><link rel="prefetch" href="/assets/js/139.fe03b386.js"><link rel="prefetch" href="/assets/js/14.a3fbcf82.js"><link rel="prefetch" href="/assets/js/140.550f0401.js"><link rel="prefetch" href="/assets/js/141.1fd0cbef.js"><link rel="prefetch" href="/assets/js/142.7a778006.js"><link rel="prefetch" href="/assets/js/143.01990283.js"><link rel="prefetch" href="/assets/js/144.e47e42ab.js"><link rel="prefetch" href="/assets/js/145.a62919c6.js"><link rel="prefetch" href="/assets/js/146.865f5683.js"><link rel="prefetch" href="/assets/js/147.3f811cfa.js"><link rel="prefetch" href="/assets/js/148.531de27b.js"><link rel="prefetch" href="/assets/js/149.d618bd7b.js"><link rel="prefetch" href="/assets/js/15.99aeff14.js"><link rel="prefetch" href="/assets/js/150.59b71024.js"><link rel="prefetch" href="/assets/js/151.ea216d4a.js"><link rel="prefetch" href="/assets/js/152.b2f14ba5.js"><link rel="prefetch" href="/assets/js/153.f5bc72e8.js"><link rel="prefetch" href="/assets/js/154.1cfb1dc2.js"><link rel="prefetch" href="/assets/js/155.c8558c47.js"><link rel="prefetch" href="/assets/js/156.f57f2639.js"><link rel="prefetch" href="/assets/js/157.843955c3.js"><link rel="prefetch" href="/assets/js/158.a8fef933.js"><link rel="prefetch" href="/assets/js/159.1122ff57.js"><link rel="prefetch" href="/assets/js/16.696bad88.js"><link rel="prefetch" href="/assets/js/160.54f9c6ae.js"><link rel="prefetch" href="/assets/js/161.ee7dbf4a.js"><link rel="prefetch" href="/assets/js/162.d0441589.js"><link rel="prefetch" href="/assets/js/163.dd6ad013.js"><link rel="prefetch" href="/assets/js/164.2702962d.js"><link rel="prefetch" href="/assets/js/165.4f028a93.js"><link rel="prefetch" href="/assets/js/166.9dcdd90f.js"><link rel="prefetch" href="/assets/js/167.caf2e5c7.js"><link rel="prefetch" href="/assets/js/168.4b75c57d.js"><link rel="prefetch" href="/assets/js/169.a2775f85.js"><link rel="prefetch" href="/assets/js/17.ad0a3965.js"><link rel="prefetch" href="/assets/js/170.296df04c.js"><link rel="prefetch" href="/assets/js/171.5c66d3e3.js"><link rel="prefetch" href="/assets/js/172.296356f7.js"><link rel="prefetch" href="/assets/js/173.16e1fb4d.js"><link rel="prefetch" href="/assets/js/174.d25bbd25.js"><link rel="prefetch" href="/assets/js/175.19a61c70.js"><link rel="prefetch" href="/assets/js/176.31bbf069.js"><link rel="prefetch" href="/assets/js/177.dbb3d8a0.js"><link rel="prefetch" href="/assets/js/178.445cdada.js"><link rel="prefetch" href="/assets/js/179.2c45b1ea.js"><link rel="prefetch" href="/assets/js/18.033fe5bd.js"><link rel="prefetch" href="/assets/js/180.de585f22.js"><link rel="prefetch" href="/assets/js/181.37466a2d.js"><link rel="prefetch" href="/assets/js/182.1d0099c5.js"><link rel="prefetch" href="/assets/js/183.f5bc3382.js"><link rel="prefetch" href="/assets/js/184.ac218d42.js"><link rel="prefetch" href="/assets/js/185.8f2c890a.js"><link rel="prefetch" href="/assets/js/186.02e270e9.js"><link rel="prefetch" href="/assets/js/187.6cefb5e1.js"><link rel="prefetch" href="/assets/js/188.a41fedf2.js"><link rel="prefetch" href="/assets/js/189.a04deb9f.js"><link rel="prefetch" href="/assets/js/19.f03802be.js"><link rel="prefetch" href="/assets/js/190.6f65a1bf.js"><link rel="prefetch" href="/assets/js/191.6bfc52d6.js"><link rel="prefetch" href="/assets/js/192.272706e4.js"><link rel="prefetch" href="/assets/js/193.b078a8b1.js"><link rel="prefetch" href="/assets/js/194.a9b30b9d.js"><link rel="prefetch" href="/assets/js/195.4cc53eb1.js"><link rel="prefetch" href="/assets/js/196.289c91cd.js"><link rel="prefetch" href="/assets/js/197.549ff7ef.js"><link rel="prefetch" href="/assets/js/198.5c1f8b0e.js"><link rel="prefetch" href="/assets/js/199.98f1834d.js"><link rel="prefetch" href="/assets/js/20.96500cde.js"><link rel="prefetch" href="/assets/js/200.0ab6bc91.js"><link rel="prefetch" href="/assets/js/201.df6afe36.js"><link rel="prefetch" href="/assets/js/202.f8d49619.js"><link rel="prefetch" href="/assets/js/203.1c26aeb4.js"><link rel="prefetch" href="/assets/js/204.9ebcb95f.js"><link rel="prefetch" href="/assets/js/205.b579f3ad.js"><link rel="prefetch" href="/assets/js/206.3ee6f6c9.js"><link rel="prefetch" href="/assets/js/207.6229f969.js"><link rel="prefetch" href="/assets/js/208.cbb6630f.js"><link rel="prefetch" href="/assets/js/209.4e8d01c9.js"><link rel="prefetch" href="/assets/js/21.085cd3da.js"><link rel="prefetch" href="/assets/js/210.da3bfd8a.js"><link rel="prefetch" href="/assets/js/211.fe666261.js"><link rel="prefetch" href="/assets/js/212.aea2b95e.js"><link rel="prefetch" href="/assets/js/213.b1dbd86b.js"><link rel="prefetch" href="/assets/js/214.8b14aa4e.js"><link rel="prefetch" href="/assets/js/215.883de375.js"><link rel="prefetch" href="/assets/js/217.4d3d1d2b.js"><link rel="prefetch" href="/assets/js/218.4c499585.js"><link rel="prefetch" href="/assets/js/219.79aac1e5.js"><link rel="prefetch" href="/assets/js/22.00bfd869.js"><link rel="prefetch" href="/assets/js/220.25ae9504.js"><link rel="prefetch" href="/assets/js/221.6d9f2bcd.js"><link rel="prefetch" href="/assets/js/222.dde7b208.js"><link rel="prefetch" href="/assets/js/223.fb236194.js"><link rel="prefetch" href="/assets/js/224.8dd7d4b8.js"><link rel="prefetch" href="/assets/js/225.8c6d514c.js"><link rel="prefetch" href="/assets/js/226.5a3c90f4.js"><link rel="prefetch" href="/assets/js/227.dbc3f998.js"><link rel="prefetch" href="/assets/js/228.191c9cb5.js"><link rel="prefetch" href="/assets/js/229.9b046059.js"><link rel="prefetch" href="/assets/js/23.42ca14bc.js"><link rel="prefetch" href="/assets/js/230.e62f33dd.js"><link rel="prefetch" href="/assets/js/231.57da489c.js"><link rel="prefetch" href="/assets/js/232.7fa41e1d.js"><link rel="prefetch" href="/assets/js/233.6f58fd4c.js"><link rel="prefetch" href="/assets/js/234.693e4284.js"><link rel="prefetch" href="/assets/js/235.e2e9887d.js"><link rel="prefetch" href="/assets/js/236.6c993a23.js"><link rel="prefetch" href="/assets/js/237.6b51c618.js"><link rel="prefetch" href="/assets/js/238.1acf1040.js"><link rel="prefetch" href="/assets/js/239.6d16615e.js"><link rel="prefetch" href="/assets/js/24.e38d112c.js"><link rel="prefetch" href="/assets/js/240.86c1448f.js"><link rel="prefetch" href="/assets/js/241.d151d8b6.js"><link rel="prefetch" href="/assets/js/242.592b5c68.js"><link rel="prefetch" href="/assets/js/243.34375f35.js"><link rel="prefetch" href="/assets/js/244.a3542306.js"><link rel="prefetch" href="/assets/js/245.e2ba0e8f.js"><link rel="prefetch" href="/assets/js/246.c1aff3df.js"><link rel="prefetch" href="/assets/js/247.0891fd48.js"><link rel="prefetch" href="/assets/js/248.8f136eff.js"><link rel="prefetch" href="/assets/js/249.0ce4682a.js"><link rel="prefetch" href="/assets/js/25.3ae510ff.js"><link rel="prefetch" href="/assets/js/250.b7d351fd.js"><link rel="prefetch" href="/assets/js/251.379287df.js"><link rel="prefetch" href="/assets/js/252.ebe3e0e1.js"><link rel="prefetch" href="/assets/js/253.87d631bc.js"><link rel="prefetch" href="/assets/js/254.99b29bc4.js"><link rel="prefetch" href="/assets/js/255.99109d65.js"><link rel="prefetch" href="/assets/js/256.95ac366e.js"><link rel="prefetch" href="/assets/js/257.f36f6ba0.js"><link rel="prefetch" href="/assets/js/258.e3bea63c.js"><link rel="prefetch" href="/assets/js/259.b1ef4d0d.js"><link rel="prefetch" href="/assets/js/26.3a5b921a.js"><link rel="prefetch" href="/assets/js/260.568ee1dd.js"><link rel="prefetch" href="/assets/js/261.03493d61.js"><link rel="prefetch" href="/assets/js/262.9e103d20.js"><link rel="prefetch" href="/assets/js/263.5bb1b006.js"><link rel="prefetch" href="/assets/js/264.48248cbe.js"><link rel="prefetch" href="/assets/js/265.9e4b8cd7.js"><link rel="prefetch" href="/assets/js/266.11c81213.js"><link rel="prefetch" href="/assets/js/267.cabd18aa.js"><link rel="prefetch" href="/assets/js/268.4fdc1bad.js"><link rel="prefetch" href="/assets/js/269.b81af27d.js"><link rel="prefetch" href="/assets/js/27.0851247e.js"><link rel="prefetch" href="/assets/js/270.5863e338.js"><link rel="prefetch" href="/assets/js/271.d07af8e3.js"><link rel="prefetch" href="/assets/js/272.366dee4c.js"><link rel="prefetch" href="/assets/js/273.12c71837.js"><link rel="prefetch" href="/assets/js/274.1d5afd6c.js"><link rel="prefetch" href="/assets/js/275.113d3950.js"><link rel="prefetch" href="/assets/js/276.29fab8f1.js"><link rel="prefetch" href="/assets/js/277.29794538.js"><link rel="prefetch" href="/assets/js/278.0b4853ed.js"><link rel="prefetch" href="/assets/js/279.238d0d6b.js"><link rel="prefetch" href="/assets/js/28.df94998a.js"><link rel="prefetch" href="/assets/js/280.04eb8c48.js"><link rel="prefetch" href="/assets/js/281.35d7e5ef.js"><link rel="prefetch" href="/assets/js/282.b95eb549.js"><link rel="prefetch" href="/assets/js/283.ceed1623.js"><link rel="prefetch" href="/assets/js/284.338290d1.js"><link rel="prefetch" href="/assets/js/285.8c13630c.js"><link rel="prefetch" href="/assets/js/286.d5cc308c.js"><link rel="prefetch" href="/assets/js/287.5a7f0818.js"><link rel="prefetch" href="/assets/js/288.256606a1.js"><link rel="prefetch" href="/assets/js/289.ce422e94.js"><link rel="prefetch" href="/assets/js/29.681b27e5.js"><link rel="prefetch" href="/assets/js/290.5c85c22f.js"><link rel="prefetch" href="/assets/js/291.20c6ed35.js"><link rel="prefetch" href="/assets/js/292.8492c03b.js"><link rel="prefetch" href="/assets/js/293.50cda034.js"><link rel="prefetch" href="/assets/js/294.99b45438.js"><link rel="prefetch" href="/assets/js/295.a31cce7d.js"><link rel="prefetch" href="/assets/js/296.c175495e.js"><link rel="prefetch" href="/assets/js/297.028e7375.js"><link rel="prefetch" href="/assets/js/298.d60a4ce2.js"><link rel="prefetch" href="/assets/js/299.19551e76.js"><link rel="prefetch" href="/assets/js/3.5908b738.js"><link rel="prefetch" href="/assets/js/30.9e9ca6af.js"><link rel="prefetch" href="/assets/js/300.940da600.js"><link rel="prefetch" href="/assets/js/301.f76ade40.js"><link rel="prefetch" href="/assets/js/302.401d4769.js"><link rel="prefetch" href="/assets/js/303.8ed4a091.js"><link rel="prefetch" href="/assets/js/304.63b9e649.js"><link rel="prefetch" href="/assets/js/305.34faf920.js"><link rel="prefetch" href="/assets/js/306.6e795d3a.js"><link rel="prefetch" href="/assets/js/307.87053505.js"><link rel="prefetch" href="/assets/js/308.e6c8cdc2.js"><link rel="prefetch" href="/assets/js/309.01482108.js"><link rel="prefetch" href="/assets/js/31.4dae168b.js"><link rel="prefetch" href="/assets/js/310.ba4ce730.js"><link rel="prefetch" href="/assets/js/311.8ce14b9a.js"><link rel="prefetch" href="/assets/js/312.53ecc45e.js"><link rel="prefetch" href="/assets/js/313.6fe0f4bf.js"><link rel="prefetch" href="/assets/js/314.5dbda2e9.js"><link rel="prefetch" href="/assets/js/315.0955376a.js"><link rel="prefetch" href="/assets/js/316.7b27a54c.js"><link rel="prefetch" href="/assets/js/317.22240391.js"><link rel="prefetch" href="/assets/js/318.50757627.js"><link rel="prefetch" href="/assets/js/319.a1080f04.js"><link rel="prefetch" href="/assets/js/32.22c9aa45.js"><link rel="prefetch" href="/assets/js/320.7b4fa63f.js"><link rel="prefetch" href="/assets/js/321.074b79c9.js"><link rel="prefetch" href="/assets/js/322.3e54754e.js"><link rel="prefetch" href="/assets/js/323.7883e025.js"><link rel="prefetch" href="/assets/js/324.276ffb80.js"><link rel="prefetch" href="/assets/js/325.86d06019.js"><link rel="prefetch" href="/assets/js/326.6a8d19cb.js"><link rel="prefetch" href="/assets/js/327.0d6f1d0f.js"><link rel="prefetch" href="/assets/js/328.e3f4db0c.js"><link rel="prefetch" href="/assets/js/329.180927d1.js"><link rel="prefetch" href="/assets/js/33.3dfd9f83.js"><link rel="prefetch" href="/assets/js/330.8cd9cfbe.js"><link rel="prefetch" href="/assets/js/331.80194529.js"><link rel="prefetch" href="/assets/js/332.6329bb8e.js"><link rel="prefetch" href="/assets/js/333.6870b2e7.js"><link rel="prefetch" href="/assets/js/334.0e788249.js"><link rel="prefetch" href="/assets/js/335.99e01dea.js"><link rel="prefetch" href="/assets/js/336.e50aa5e8.js"><link rel="prefetch" href="/assets/js/337.d472e479.js"><link rel="prefetch" href="/assets/js/338.1ba97291.js"><link rel="prefetch" href="/assets/js/339.d3a7e3ce.js"><link rel="prefetch" href="/assets/js/34.8bc8df6d.js"><link rel="prefetch" href="/assets/js/340.b64c94cb.js"><link rel="prefetch" href="/assets/js/341.70d08cb4.js"><link rel="prefetch" href="/assets/js/342.ea5dd142.js"><link rel="prefetch" href="/assets/js/343.709d39a3.js"><link rel="prefetch" href="/assets/js/344.d8bfe936.js"><link rel="prefetch" href="/assets/js/345.1e062f68.js"><link rel="prefetch" href="/assets/js/346.5cc1da4e.js"><link rel="prefetch" href="/assets/js/347.3dacd6fb.js"><link rel="prefetch" href="/assets/js/348.3950edd9.js"><link rel="prefetch" href="/assets/js/349.2901ff06.js"><link rel="prefetch" href="/assets/js/35.2a9af1fc.js"><link rel="prefetch" href="/assets/js/350.8c337993.js"><link rel="prefetch" href="/assets/js/351.22582d12.js"><link rel="prefetch" href="/assets/js/352.b5491bb7.js"><link rel="prefetch" href="/assets/js/353.bc552ef7.js"><link rel="prefetch" href="/assets/js/354.dda3c708.js"><link rel="prefetch" href="/assets/js/355.a6c104d7.js"><link rel="prefetch" href="/assets/js/356.f4154e97.js"><link rel="prefetch" href="/assets/js/357.c7cc3c4e.js"><link rel="prefetch" href="/assets/js/358.f15c6e3f.js"><link rel="prefetch" href="/assets/js/359.81ba3020.js"><link rel="prefetch" href="/assets/js/36.7c1d3ab5.js"><link rel="prefetch" href="/assets/js/360.0d7785e9.js"><link rel="prefetch" href="/assets/js/361.871f19ca.js"><link rel="prefetch" href="/assets/js/362.93e6b5fa.js"><link rel="prefetch" href="/assets/js/363.84e93f70.js"><link rel="prefetch" href="/assets/js/364.d4b2c59d.js"><link rel="prefetch" href="/assets/js/365.ca6d4943.js"><link rel="prefetch" href="/assets/js/366.0105162e.js"><link rel="prefetch" href="/assets/js/367.2a024545.js"><link rel="prefetch" href="/assets/js/368.7d81bad6.js"><link rel="prefetch" href="/assets/js/369.f521d1e4.js"><link rel="prefetch" href="/assets/js/37.339fa3f5.js"><link rel="prefetch" href="/assets/js/370.9f2fda36.js"><link rel="prefetch" href="/assets/js/371.39280d8c.js"><link rel="prefetch" href="/assets/js/372.21aec584.js"><link rel="prefetch" href="/assets/js/373.f6271995.js"><link rel="prefetch" href="/assets/js/374.1cc1b7d5.js"><link rel="prefetch" href="/assets/js/375.1710f008.js"><link rel="prefetch" href="/assets/js/376.44303009.js"><link rel="prefetch" href="/assets/js/377.1d8b58f6.js"><link rel="prefetch" href="/assets/js/378.1ed7f7d5.js"><link rel="prefetch" href="/assets/js/379.6b480253.js"><link rel="prefetch" href="/assets/js/38.d265ce01.js"><link rel="prefetch" href="/assets/js/380.fc2ccc78.js"><link rel="prefetch" href="/assets/js/381.739b300e.js"><link rel="prefetch" href="/assets/js/382.7ce28473.js"><link rel="prefetch" href="/assets/js/383.d1360b76.js"><link rel="prefetch" href="/assets/js/384.11613eb1.js"><link rel="prefetch" href="/assets/js/385.6dfeb57c.js"><link rel="prefetch" href="/assets/js/39.501517c4.js"><link rel="prefetch" href="/assets/js/4.43e2f670.js"><link rel="prefetch" href="/assets/js/40.cf3e9401.js"><link rel="prefetch" href="/assets/js/41.a95c80d9.js"><link rel="prefetch" href="/assets/js/42.dcd2241e.js"><link rel="prefetch" href="/assets/js/43.13c51145.js"><link rel="prefetch" href="/assets/js/44.2dac9027.js"><link rel="prefetch" href="/assets/js/45.49c36e4a.js"><link rel="prefetch" href="/assets/js/46.239ca191.js"><link rel="prefetch" href="/assets/js/47.ea6908aa.js"><link rel="prefetch" href="/assets/js/48.53277bfc.js"><link rel="prefetch" href="/assets/js/49.58c765da.js"><link rel="prefetch" href="/assets/js/5.bf974200.js"><link rel="prefetch" href="/assets/js/50.da395e80.js"><link rel="prefetch" href="/assets/js/51.746c35dd.js"><link rel="prefetch" href="/assets/js/52.5c4b9927.js"><link rel="prefetch" href="/assets/js/53.9cb79b5b.js"><link rel="prefetch" href="/assets/js/54.1275b272.js"><link rel="prefetch" href="/assets/js/55.07897729.js"><link rel="prefetch" href="/assets/js/56.0a1920cd.js"><link rel="prefetch" href="/assets/js/57.2e33fbed.js"><link rel="prefetch" href="/assets/js/58.5d299d42.js"><link rel="prefetch" href="/assets/js/59.dda234c0.js"><link rel="prefetch" href="/assets/js/6.453f4406.js"><link rel="prefetch" href="/assets/js/60.4418e20c.js"><link rel="prefetch" href="/assets/js/61.ab54fcc8.js"><link rel="prefetch" href="/assets/js/62.df90aa98.js"><link rel="prefetch" href="/assets/js/63.8b6c85de.js"><link rel="prefetch" href="/assets/js/64.1c156491.js"><link rel="prefetch" href="/assets/js/65.6f5f6e76.js"><link rel="prefetch" href="/assets/js/66.80ebbf17.js"><link rel="prefetch" href="/assets/js/67.ecb372bb.js"><link rel="prefetch" href="/assets/js/68.c1e1fe7d.js"><link rel="prefetch" href="/assets/js/69.e1fabebd.js"><link rel="prefetch" href="/assets/js/7.2f9deff9.js"><link rel="prefetch" href="/assets/js/70.079eeddf.js"><link rel="prefetch" href="/assets/js/71.2496b109.js"><link rel="prefetch" href="/assets/js/72.60b944f0.js"><link rel="prefetch" href="/assets/js/73.71d9c8e4.js"><link rel="prefetch" href="/assets/js/74.e20a48d6.js"><link rel="prefetch" href="/assets/js/75.b41d46d4.js"><link rel="prefetch" href="/assets/js/76.17df9fab.js"><link rel="prefetch" href="/assets/js/77.5ddc268f.js"><link rel="prefetch" href="/assets/js/78.27965d09.js"><link rel="prefetch" href="/assets/js/79.161c57b9.js"><link rel="prefetch" href="/assets/js/8.d8d8ef3c.js"><link rel="prefetch" href="/assets/js/80.cb4f3022.js"><link rel="prefetch" href="/assets/js/81.6f0d9294.js"><link rel="prefetch" href="/assets/js/82.321a3364.js"><link rel="prefetch" href="/assets/js/83.487b86cb.js"><link rel="prefetch" href="/assets/js/84.a20597e1.js"><link rel="prefetch" href="/assets/js/85.08edc03c.js"><link rel="prefetch" href="/assets/js/86.7a615fee.js"><link rel="prefetch" href="/assets/js/87.65839d92.js"><link rel="prefetch" href="/assets/js/88.2626df8b.js"><link rel="prefetch" href="/assets/js/89.3bf86699.js"><link rel="prefetch" href="/assets/js/9.9e43021b.js"><link rel="prefetch" href="/assets/js/90.dc9b054d.js"><link rel="prefetch" href="/assets/js/91.19254d9f.js"><link rel="prefetch" href="/assets/js/92.6b55014d.js"><link rel="prefetch" href="/assets/js/93.04fa2df3.js"><link rel="prefetch" href="/assets/js/94.0a623c21.js"><link rel="prefetch" href="/assets/js/95.ff9eec98.js"><link rel="prefetch" href="/assets/js/96.9260cbb0.js"><link rel="prefetch" href="/assets/js/97.c156fc5a.js"><link rel="prefetch" href="/assets/js/98.13d2f6ad.js"><link rel="prefetch" href="/assets/js/99.12ad69a0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3aa0083c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/icon.png" alt="wxvirus" class="logo"> <span class="site-name can-hide">wxvirus</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/backend/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Go文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1be6f5/" class="nav-link">Go语言学习</a></li></ul></li><li class="dropdown-item"><h4>Rust</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8dc34b/" class="nav-link">Rust学习</a></li></ul></li><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/java/" class="nav-link">《Java》</a></li></ul></li><li class="dropdown-item"><h4>Python文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0ef862/" class="nav-link">Python</a></li></ul></li><li class="dropdown-item"><h4>PHP文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a09ce1/" class="nav-link">PHP设计模式</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/ui/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/7601f3/" class="nav-link">JS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/df7058/" class="nav-link">刷题</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/9d0e8f/" class="nav-link">算法学习</a></li><li class="dropdown-item"><!----> <a href="/pages/8f006a/" class="nav-link">架构设计</a></li><li class="dropdown-item"><!----> <a href="/pages/76c94d/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sword-demon" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.jpeg"> <div class="blogger-info"><h3>无解的lifecycle</h3> <span>let today = new Beginning()</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/backend/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Go文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1be6f5/" class="nav-link">Go语言学习</a></li></ul></li><li class="dropdown-item"><h4>Rust</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8dc34b/" class="nav-link">Rust学习</a></li></ul></li><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/java/" class="nav-link">《Java》</a></li></ul></li><li class="dropdown-item"><h4>Python文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0ef862/" class="nav-link">Python</a></li></ul></li><li class="dropdown-item"><h4>PHP文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a09ce1/" class="nav-link">PHP设计模式</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/ui/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/7601f3/" class="nav-link">JS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/df7058/" class="nav-link">刷题</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/9d0e8f/" class="nav-link">算法学习</a></li><li class="dropdown-item"><!----> <a href="/pages/8f006a/" class="nav-link">架构设计</a></li><li class="dropdown-item"><!----> <a href="/pages/76c94d/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/sword-demon" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>技术文档</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/9a7ee40fc232253e/" class="sidebar-link">Git使用手册</a></li><li><a href="/pages/ad247c4332211551/" class="sidebar-link">Markdown使用教程</a></li><li><a href="/pages/61f2f95fd7da14fd/" class="sidebar-link">npm常用命令</a></li><li><a href="/pages/591361/" class="sidebar-link">vagrant创建centos7虚拟机</a></li><li><a href="/pages/817e9a/" class="sidebar-link">Linux安装docker</a></li><li><a href="/pages/4f09c3/" class="sidebar-link">docker安装配置mysql</a></li><li><a href="/pages/46729f/" class="sidebar-link">docker安装redis</a></li><li><a href="/pages/e9f5d7/" class="sidebar-link">docker安装rabbitmq</a></li><li><a href="/pages/f20a0b/" class="sidebar-link">docker安装mongoDB</a></li><li><a href="/pages/dec4f3f00e71a312/" class="sidebar-link">npm packageJson属性详解</a></li><li><a href="/pages/3edc60/" class="sidebar-link">构建Docker镜像</a></li><li><a href="/pages/b8bf1a/" class="sidebar-link">docker安装yapi</a></li><li><a href="/pages/0c2fa5/" class="sidebar-link">docker安装kafka</a></li><li><a href="/pages/4e8444e2d534d14f/" class="sidebar-link">yaml语言教程</a></li><li><a href="/pages/aec082/" class="sidebar-link">curl下载pdf</a></li><li><a href="/pages/0168e5/" class="sidebar-link">Linux安装MySQL8</a></li><li><a href="/pages/681f72/" aria-current="page" class="active sidebar-link">Linux安装PHP7和Swoole扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/681f72/#目录" class="sidebar-link">目录</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#下载安装-yum-源-centos7" class="sidebar-link">下载安装 yum 源(centos7)</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#安装-sl-命令-小火车" class="sidebar-link">安装 sl 命令(小火车)</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#安装-ipython-命令" class="sidebar-link">安装 ipython 命令</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#安装-php7-4" class="sidebar-link">安装 PHP7.4</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#安装-cmake-3-17-0-rc1" class="sidebar-link">安装 cmake-3.17.0-rc1</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#安装-libzip-1-6-1" class="sidebar-link">安装 libzip-1.6.1</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#安装-zip-1-17-1-扩展" class="sidebar-link">安装 zip-1.17.1 扩展</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#配置-php7-4" class="sidebar-link">配置 PHP7.4</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/681f72/#测试" class="sidebar-link">测试</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/681f72/#php7-4-性能调优" class="sidebar-link">PHP7.4 性能调优</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#关于-opache-的一些配置" class="sidebar-link">关于 opache 的一些配置</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#thinkphp-开启二级域名" class="sidebar-link">ThinkPHP 开启二级域名</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#调整-php7-4-配置的一些内容" class="sidebar-link">调整 PHP7.4 配置的一些内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/681f72/#pdo-mysql-2" class="sidebar-link">pdo_mysql</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/681f72/#php7-4-安装-swoole-扩展" class="sidebar-link">PHP7.4 安装 swoole 扩展</a></li><li class="sidebar-sub-header"><a href="/pages/681f72/#安装-composer" class="sidebar-link">安装 composer</a></li></ul></li><li><a href="/pages/0aabbc/" class="sidebar-link">Linux安装配置Nginx</a></li><li><a href="/pages/4eb8f9/" class="sidebar-link">单机安装redis</a></li><li><a href="/pages/bbb3cc/" class="sidebar-link">部署自带镜像仓库</a></li><li><a href="/pages/55259c/" class="sidebar-link">portainer的安装</a></li><li><a href="/pages/bf9a05/" class="sidebar-link">centos7安装redis6文档记录</a></li><li><a href="/pages/bd6f76/" class="sidebar-link">redis缓存设计原理</a></li><li><a href="/pages/1be11b/" class="sidebar-link">redis的 cluster 集群</a></li><li><a href="/pages/306445/" class="sidebar-link">redis的配置</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GitHub技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>刷题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>博客搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>架构设计</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/technology" title="技术-目录页" data-v-1cd794fe>技术</a></li> <li data-v-1cd794fe><a href="/technology/#技术文档" title="技术#技术文档" data-v-1cd794fe>技术文档</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/sword-demon" target="_blank" title="作者" class="beLink" data-v-1cd794fe>wxvirus</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2022-08-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          Linux安装PHP7和Swoole扩展
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="php7-4-编译安装"><a href="#php7-4-编译安装" class="header-anchor">#</a> PHP7.4 编译安装</h1> <h2 id="目录"><a href="#目录" class="header-anchor">#</a> 目录</h2> <ul><li><p><a href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85yum%E6%BA%90centos7">下载安装 yum 源(centos7)</a></p></li> <li><p><a href="#%E5%AE%89%E8%A3%85sl%E5%91%BD%E4%BB%A4%E5%B0%8F%E7%81%AB%E8%BD%A6">安装 sl 命令(小火车)</a></p></li> <li><p><a href="#%E5%AE%89%E8%A3%85ipython%E5%91%BD%E4%BB%A4">安装 ipython 命令</a></p></li> <li><p><a href="#%E5%AE%89%E8%A3%85php74">安装 PHP7.4</a></p></li> <li><p><a href="#%E5%AE%89%E8%A3%85cmake-3170-rc1">安装 cmake-3.17.0-rc1</a></p></li> <li><p><a href="#%E5%AE%89%E8%A3%85libzip-161">安装 libzip-1.6.1</a></p></li> <li><p><a href="#%E5%AE%89%E8%A3%85zip-1171%E6%89%A9%E5%B1%95">安装 zip-1.17.1 扩展</a></p></li> <li><p><a href="#%E9%85%8D%E7%BD%AEphp74">配置 PHP7.4</a></p> <ul><li><p><a href="#%E6%B5%8B%E8%AF%95">测试</a></p> <ul><li><p><a href="#zip">zip</a></p></li> <li><p><a href="#mysqli">mysqli</a></p></li> <li><p><a href="#pdo_mysql">pdo_mysql</a></p></li></ul></li></ul></li> <li><p><a href="#php74%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98">PHP7.4 性能调优</a></p></li> <li><p><a href="#%E5%85%B3%E4%BA%8Eopache%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE">关于 opache 的一些配置</a></p></li> <li><p><a href="#thinkphp%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D">ThinkPHP 开启二级域名</a></p></li> <li><p><a href="#%E8%B0%83%E6%95%B4php74%E9%85%8D%E7%BD%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E5%86%85%E5%AE%B9">调整 PHP7.4 配置的一些内容</a></p> <ul><li><a href="#pdo_mysql-1">pdo_mysql</a></li></ul></li> <li><p><a href="#php74%E5%AE%89%E8%A3%85swoole%E6%89%A9%E5%B1%95">PHP7.4 安装 swoole 扩展</a></p></li> <li><p><a href="#%E5%AE%89%E8%A3%85composer">安装 composer</a></p></li></ul> <h2 id="下载安装-yum-源-centos7"><a href="#下载安装-yum-源-centos7" class="header-anchor">#</a> 下载安装 yum 源(centos7)</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> http://mirror.centos.org/centos/7/extras/x86_64/Packages/epel-release-7-11.noarch.rpm

yum <span class="token function">install</span> -y epel-release-7-11.noarch.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="安装-sl-命令-小火车"><a href="#安装-sl-命令-小火车" class="header-anchor">#</a> 安装 sl 命令(小火车)</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y sl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="安装-ipython-命令"><a href="#安装-ipython-命令" class="header-anchor">#</a> 安装 ipython 命令</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y ipython
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="安装-php7-4"><a href="#安装-php7-4" class="header-anchor">#</a> 安装 PHP7.4</h2> <p>首先准备一个 7.4 的源码包上传到<code>/usr/local/src</code>目录下，进行解压</p> <p>然后查看 PHP7.4 需要安装的一些依赖</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./configure --prefix<span class="token operator">=</span>/usr/local/php7 --with-config-file-path<span class="token operator">=</span>/usr/local/php7/etc  --with-mysqli   --with-pdo-mysql --with-xmlrpc --with-openssl --with-openssl-dir --with-zlib --with-zlib-dir  --with-freetype --enable-gd --with-jpeg  --enable-short-tags --enable-sockets --enable-soap --enable-mbstring --enable-static --with-curl  --with-xsl --enable-ftp --with-libxml  --enable-fpm --with-pdo-sqlite  --with-gettext --with-iconv-dir --with-kerberos --with-libdir<span class="token operator">=</span>lib64  --with-pear --with-mhash  --enable-gd-jis-conv --enable-bcmath --with-expat --enable-inline-optimization --enable-mbregex --enable-opcache  --enable-sysvsem --enable-xml --enable-maintainer-zts  --enable-simplexml --disable-rpath --disable-fileinfo

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>​ 如果出现以下错误</p> <blockquote><p>No package 'sqlite3' found</p></blockquote> <p>安装一下这个库即可</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> libsqlite3x-devel -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果出现以下错误：</p> <blockquote><p>error: Package requirements (oniguruma) were not met</p></blockquote> <p>安装如下依赖</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> oniguruma-devel -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后再重更新运行上面配置代码</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>+--------------------------------------------------------------------+
<span class="token operator">|</span> License:                                                           <span class="token operator">|</span>
<span class="token operator">|</span> This software is subject to the PHP License, available <span class="token keyword">in</span> this     <span class="token operator">|</span>
<span class="token operator">|</span> distribution <span class="token keyword">in</span> the <span class="token function">file</span> LICENSE. By continuing this installation  <span class="token operator">|</span>
<span class="token operator">|</span> process, you are bound by the terms of this license agreement.     <span class="token operator">|</span>
<span class="token operator">|</span> If you <span class="token keyword">do</span> not agree with the terms of this license, you must abort <span class="token operator">|</span>
<span class="token operator">|</span> the installation process at this point.                            <span class="token operator">|</span>
+--------------------------------------------------------------------+

Thank you <span class="token keyword">for</span> using PHP.

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>最终出现这个，就代表成功了。</p> <p>下面就可以<code>make &amp;&amp; make intall</code>进行编译安装了</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Installing shared extensions:     /usr/local/php7/lib/php/extensions/no-debug-zts-20190902/
Installing PHP CLI binary:        /usr/local/php7/bin/
Installing PHP CLI <span class="token function">man</span> page:      /usr/local/php7/php/man/man1/
Installing PHP FPM binary:        /usr/local/php7/sbin/
Installing PHP FPM defconfig:     /usr/local/php7/etc/
Installing PHP FPM <span class="token function">man</span> page:      /usr/local/php7/php/man/man8/
Installing PHP FPM status page:   /usr/local/php7/php/php/fpm/
Installing phpdbg binary:         /usr/local/php7/bin/
Installing phpdbg <span class="token function">man</span> page:       /usr/local/php7/php/man/man1/
Installing PHP CGI binary:        /usr/local/php7/bin/
Installing PHP CGI <span class="token function">man</span> page:      /usr/local/php7/php/man/man1/
Installing build environment:     /usr/local/php7/lib/php/build/
Installing header files:          /usr/local/php7/include/php/
Installing helper programs:       /usr/local/php7/bin/
  program: phpize
  program: php-config
Installing <span class="token function">man</span> pages:             /usr/local/php7/php/man/man1/
  page: phpize.1
  page: php-config.1
Installing PEAR environment:      /usr/local/php7/lib/php/
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> Archive_Tar    - installed: <span class="token number">1.4</span>.8
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> Console_Getopt - installed: <span class="token number">1.4</span>.3
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> Structures_Graph- installed: <span class="token number">1.1</span>.1
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> XML_Util       - installed: <span class="token number">1.4</span>.3
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> PEAR           - installed: <span class="token number">1.10</span>.10
Wrote PEAR system config <span class="token function">file</span> at: /usr/local/php7/etc/pear.conf
You may want to add: /usr/local/php7/lib/php to your php.ini include_path
/usr/local/src/php-7.4.2/build/shtool <span class="token function">install</span> -c ext/phar/phar.phar /usr/local/php7/bin
<span class="token function">ln</span> -s -f phar.phar /usr/local/php7/bin/phar
Installing PDO headers:           /usr/local/php7/include/php/ext/pdo/

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>出现上述内容，表示编译安装完成了。</p> <h2 id="安装-cmake-3-17-0-rc1"><a href="#安装-cmake-3-17-0-rc1" class="header-anchor">#</a> 安装 cmake-3.17.0-rc1</h2> <p>将下载好的包传到服务器<code>/usr/local/src</code>目录下进行解压</p> <p>解压完进入目录中使用如下命令</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 cmake-3.17.0-rc1<span class="token punctuation">]</span><span class="token comment"># ./bootstrap</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>-- Build files have been written to: /usr/local/src/cmake-3.17.0-rc1
---------------------------------------------
CMake has bootstrapped.  Now run gmake.

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>出现上述内容，根据它的提示运行<code>gmake</code>，等到<code>gmake</code>运行完了，再继续运行<code>make install</code>命令，这个速度会比较快。</p> <p>然后我们就可以安装<code>libzip</code>组件</p> <h2 id="安装-libzip-1-6-1"><a href="#安装-libzip-1-6-1" class="header-anchor">#</a> 安装 libzip-1.6.1</h2> <p>我们先去找资源下载一个这个包，然后上传到<code>/usr/local/src</code>目录中并解压</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># cd libzip-1.6.1/</span>
<span class="token punctuation">[</span>root@10 libzip-1.6.1<span class="token punctuation">]</span><span class="token comment"># mkdir build</span>
<span class="token punctuation">[</span>root@10 libzip-1.6.1<span class="token punctuation">]</span><span class="token comment"># cd build/</span>
<span class="token punctuation">[</span>root@10 build<span class="token punctuation">]</span><span class="token comment"># cmake ..</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>最后出现以下内容即可</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>-- Configuring <span class="token keyword">done</span>
-- Generating <span class="token keyword">done</span>
-- Build files have been written to: /usr/local/src/libzip-1.6.1/build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后就在<code>build</code>目录中进行<code>make &amp;&amp; make install</code>，这个速度也会挺快的。</p> <p>安装成功出现下面的部分内容</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>-- Installing: /usr/local/bin/zipcmp
-- Set runtime path of <span class="token string">&quot;/usr/local/bin/zipcmp&quot;</span> to <span class="token string">&quot;&quot;</span>
-- Installing: /usr/local/bin/zipmerge
-- Set runtime path of <span class="token string">&quot;/usr/local/bin/zipmerge&quot;</span> to <span class="token string">&quot;&quot;</span>
-- Installing: /usr/local/bin/ziptool
-- Set runtime path of <span class="token string">&quot;/usr/local/bin/ziptool&quot;</span> to <span class="token string">&quot;&quot;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/ld.so.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加内容</p> <div class="language-纯文本 line-numbers-mode"><pre class="language-text"><code>include ld.so.conf.d/*.conf

/usr/local/lib64
/usr/local/lib
/usr/lib
/usr/lib64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后使用<code>lbconfig -v</code>查看一下即可</p> <h2 id="安装-zip-1-17-1-扩展"><a href="#安装-zip-1-17-1-扩展" class="header-anchor">#</a> 安装 zip-1.17.1 扩展</h2> <p>我们先去找资源下载一个这个包，然后上传到<code>/usr/local/src</code>目录中并解压</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 zip-1.17.1<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/bin/phpize</span>
Configuring for:
PHP Api Version:         <span class="token number">20190902</span>
Zend Module Api No:      <span class="token number">20190902</span>
Zend Extension Api No:   <span class="token number">320190902</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 zip-1.17.1<span class="token punctuation">]</span><span class="token comment"># ./configure --with-php-config=/usr/local/php7/bin/php-config</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>出现以下内容即可</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>creating libtool
appending configuration tag <span class="token string">&quot;CXX&quot;</span> to libtool
configure: patching config.h.in
configure: creating ./config.status
config.status: creating config.h

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后编译安装</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 zip-1.17.1<span class="token punctuation">]</span><span class="token comment"># make &amp;&amp; make install</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>就会出现以下结果</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Build complete.
Don<span class="token string">'t forget to run '</span><span class="token function">make</span> test'.

Installing shared extensions:     /usr/local/php7/lib/php/extensions/no-debug-zts-20190902/

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="配置-php7-4"><a href="#配置-php7-4" class="header-anchor">#</a> 配置 PHP7.4</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-7.4.2<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/php7/</span>
<span class="token punctuation">[</span>root@10 php7<span class="token punctuation">]</span><span class="token comment"># cp etc/php-fpm.conf.default etc/php-fpm.conf</span>
<span class="token punctuation">[</span>root@10 php7<span class="token punctuation">]</span><span class="token comment"># cp /usr/local/src/php-7.4.2/php.ini-development /usr/local/php7/etc/php.ini</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php7<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/php7/etc/php-fpm.d/</span>
<span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># cp www.conf.default www.conf</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>编辑<code>php.ini</code>加入<code>zip.so</code>扩展生效</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment">;extension=soap</span>
<span class="token comment">;extension=sockets</span>
<span class="token comment">;extension=sodium</span>
<span class="token comment">;extension=sqlite3</span>
<span class="token comment">;extension=tidy</span>
<span class="token comment">;extension=xmlrpc</span>
<span class="token comment">;extension=xsl</span>
<span class="token key attr-name">extension</span><span class="token punctuation">=</span><span class="token value attr-value">zip.so</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>使用<code>php-fpm</code>来启动</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/sbin/php-fpm</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># netstat -tpln</span>
Active Internet connections <span class="token punctuation">(</span>only servers<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:22              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">706</span>/sshd
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">127.0</span>.0.1:9000          <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">14896</span>/php-fpm: mast
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:111             <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">357</span>/rpcbind
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:80              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">3295</span>/nginx: master
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::22                   :::*                    LISTEN      <span class="token number">706</span>/sshd
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::33060                :::*                    LISTEN      <span class="token number">1634</span>/mysqld
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::3306                 :::*                    LISTEN      <span class="token number">1634</span>/mysqld
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::111                  :::*                    LISTEN      <span class="token number">357</span>/rpcbind
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>然后我们将<code>php-fpm</code>加入到开机自启</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/src/php-7.4.2/sapi/fpm/</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># cp init.d.php-fpm /etc/init.d/php-fpm7</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chmod a+x /etc/init.d/php-fpm7</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm</span>
php-fpm             php-fpm.8.in        php-fpm.conf.in     php-fpm.service.in
php-fpm.8           php-fpm.conf        php-fpm.service
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm</span>
php-fpm             php-fpm.8.in        php-fpm.conf.in     php-fpm.service.in
php-fpm.8           php-fpm.conf        php-fpm.service
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm7 on</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">14896</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">15</span>:59 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nobody   <span class="token number">14897</span> <span class="token number">14896</span>  <span class="token number">0</span> <span class="token number">15</span>:59 ?        00:00:00 php-fpm: pool www
nobody   <span class="token number">14898</span> <span class="token number">14896</span>  <span class="token number">0</span> <span class="token number">15</span>:59 ?        00:00:00 php-fpm: pool www
root     <span class="token number">15035</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:06 pts/1    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># kill -9 14896</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># kill -9 14897</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># kill -9 14898</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15037</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:06 pts/1    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># service php-fpm7 restart</span>
Gracefully shutting down php-fpm warning, no pid <span class="token function">file</span> found - php-fpm is not running ?
Starting php-fpm  <span class="token keyword">done</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>查看是否进入开机启动项</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm7 --list</span>

Note: This output shows SysV services only and does not include native
      systemd services. SysV configuration data might be overridden by native
      systemd configuration.

      If you want to list systemd services use <span class="token string">'systemctl list-unit-files'</span><span class="token builtin class-name">.</span>
      To see services enabled on particular target use
      <span class="token string">'systemctl list-dependencies [target]'</span><span class="token builtin class-name">.</span>

php-fpm7         <span class="token number">0</span>:off  <span class="token number">1</span>:off  <span class="token number">2</span>:on  <span class="token number">3</span>:on  <span class="token number">4</span>:on  <span class="token number">5</span>:on  <span class="token number">6</span>:off

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>只要 3，4，5 是<code>on</code>即可。</p> <p>然后我们还需要配置<code>nginx.conf</code>可以使用<code>php</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># vim /usr/local/nginx/conf/nginx.conf</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~ \.php$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">root</span>   /home/web/</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">index</span>  index.php index.html index.htm</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>修改上述内保存之后，重启以下<code>nginx</code></p> <h3 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h3> <p>简单编写一个<code>index.php</code>，加入<code>phpinfo()</code>函数</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># vim /home/web/index.php</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chown -R nginx.nginx /home/web/</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后再次更新它的权限，再次访问我们的虚拟机的<code>ip</code>地址就会显示对应的<code>phpinfo</code>的内容</p> <p>就可以看到下面几个依赖库的内容</p> <h4 id="zip"><a href="#zip" class="header-anchor">#</a> zip</h4> <table><thead><tr><th>Zip</th> <th>enabled</th></tr></thead> <tbody><tr><td>Zip version</td> <td>1.17.1</td></tr> <tr><td>Libzip headers version</td> <td>1.6.1</td></tr> <tr><td>Libzip library version</td> <td>1.6.1</td></tr></tbody></table> <h4 id="mysqli"><a href="#mysqli" class="header-anchor">#</a> mysqli</h4> <table><thead><tr><th>MysqlI Support</th> <th>enabled</th></tr></thead> <tbody><tr><td>Client API library version</td> <td>mysqlnd 7.4.2</td></tr> <tr><td>Active Persistent Links</td> <td>0</td></tr> <tr><td>Inactive Persistent Links</td> <td>0</td></tr> <tr><td>Active Links</td> <td>0</td></tr></tbody></table> <h4 id="pdo-mysql"><a href="#pdo-mysql" class="header-anchor">#</a> pdo_mysql</h4> <table><thead><tr><th>PDO Driver for MySQL</th> <th>enabled</th></tr></thead> <tbody><tr><td>Client API version</td> <td>mysqlnd 7.4.2</td></tr></tbody></table> <p>我们还要设置以下安装<code>nginx</code>的时候设置的<code>home/web/php7</code>目录下的一个<code>php7.conf</code></p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~ \.php$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>也加上上述内容即可。</p> <p>完整内容</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token comment"># 监听端口号</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token comment"># 域名</span>
        <span class="token directive"><span class="token keyword">server_name</span> www.php7.tt</span><span class="token punctuation">;</span>
        <span class="token comment"># 网站目录</span>
        <span class="token directive"><span class="token keyword">root</span> /home/web/php7/</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
                <span class="token directive"><span class="token keyword">ssi</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">ssi_silent_errors</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">index</span> index.php index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token directive"><span class="token keyword">location</span> ~ \.php$</span> <span class="token punctuation">{</span>
                <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
                 <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token directive"><span class="token keyword">access_log</span> /usr/local/nginx/logs/php7_access.log</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">error_log</span> /usr/local/nginx/logs/php7_error.log</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>然后接着还是要重启以下<code>nginx</code></p> <p>对应也对<code>php7</code>目录下新增一个<code>index.php</code>加入<code>phpinfo()</code>函数来测试以下是否成功。</p> <h2 id="php7-4-性能调优"><a href="#php7-4-性能调优" class="header-anchor">#</a> PHP7.4 性能调优</h2> <p>给<code>php-fpm</code>添加日志文件目录</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># mkdir -p /usr/local/php7/log</span>
<span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># chown -R nginx.nginx /usr/local/php7/</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后编辑</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#性能调优</span>
<span class="token function">vim</span> /usr/local/php7/etc/php-fpm.conf

<span class="token comment"># 将以下内容注释去掉</span>
pid <span class="token operator">=</span> run/php-fpm.pid
error_log <span class="token operator">=</span> log/php-fpm.log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf

<span class="token comment"># 将下面内容进行替换为nginx用户</span>
user <span class="token operator">=</span> nginx
group <span class="token operator">=</span> nginx

<span class="token comment"># 如果 listen 监听的是9000那就不用管  暂时保存，下面还要设置内容</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15049</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:06 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nobody   <span class="token number">15050</span> <span class="token number">15049</span>  <span class="token number">0</span> <span class="token number">16</span>:06 ?        00:00:00 php-fpm: pool www
nobody   <span class="token number">15051</span> <span class="token number">15049</span>  <span class="token number">0</span> <span class="token number">16</span>:06 ?        00:00:00 php-fpm: pool www

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>可以看到这边还是<code>nobody</code>，我们需要重启以下<code>php-fpm7</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># service php-fpm7 restart</span>
Gracefully shutting down php-fpm <span class="token builtin class-name">.</span> <span class="token keyword">done</span>
Starting php-fpm  <span class="token keyword">done</span>
<span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15428</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:26 pts/1    00:00:00 <span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf
root     <span class="token number">15455</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:28 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nginx    <span class="token number">15456</span> <span class="token number">15455</span>  <span class="token number">0</span> <span class="token number">16</span>:28 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15457</span> <span class="token number">15455</span>  <span class="token number">0</span> <span class="token number">16</span>:28 ?        00:00:00 php-fpm: pool www

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr> <p>继续配置<code>vim /usr/local/php7/etc/php-fpm.d/www.conf</code></p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">pm</span> = dynamic</span><span class="token punctuation">;</span> <span class="token comment"># 表示使用哪种进程数量管理方式</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p><code>dynamic</code>表示<code>php-fpm</code>进程数是动态的，最开始是<code>pms.start_servers</code>指定的数量，如果请求较多 ，则会自动增加，保证空闲的进程数不小于<code>pm.min_spare_servers</code>，如果进程数较多，也会进行相应清理，保证多余的进程数不多于<code>pm.max_spare_servers</code></p></li> <li><p><code>static</code>表示<code>php-fpm</code>进程数是静态的, 进程数自始至终都是<code>pm.max_children</code>指定的数量，不再增加或减少</p></li></ul> <p>此时<code>pm.max_children = 5</code>，我们可以先修改<code>pm</code>为<code>static</code>，重启<code>php-fpm7</code>来查看启动了多少个进程</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># service php-fpm7 restart</span>
Gracefully shutting down php-fpm <span class="token builtin class-name">.</span> <span class="token keyword">done</span>
Starting php-fpm  <span class="token keyword">done</span>
<span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15428</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:26 pts/1    00:00:00 <span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf
root     <span class="token number">15475</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nginx    <span class="token number">15476</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15477</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15478</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15479</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15480</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
root     <span class="token number">15482</span> <span class="token number">29045</span>  <span class="token number">0</span> <span class="token number">16</span>:31 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>所以<code>pm.max_children</code>这个参数只对静态模式下起作用。
静态模式下，我们最好设置为 100 个。</p></blockquote> <p>我们最后还是改回动态模式，动态模式可以动态节省资源</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> number of child processes created <span class="token boolean">on</span> startup.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Used only when pm is set to <span class="token string">'dynamic'</span></span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Default</span> Value: (min_spare_servers + max_spare_servers) / <span class="token number">2</span>
pm.start_servers = <span class="token number">10</span></span>

<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> desired minimum number of idle server processes.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Used only when pm is set to <span class="token string">'dynamic'</span></span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Mandatory when pm is set to <span class="token string">'dynamic'</span>
pm.min_spare_servers = <span class="token number">5</span></span>

<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> desired maximum number of idle server processes.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Used only when pm is set to <span class="token string">'dynamic'</span></span>
<span class="token punctuation">;</span> Note: Mandatory when pm is set to 'dynamic'
pm.max_spare_servers = 35

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>重启后观察效果</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15428</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:26 pts/1    00:00:00 <span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf
root     <span class="token number">15652</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nginx    <span class="token number">15653</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15654</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15655</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15656</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15657</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15658</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15659</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15660</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15661</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15662</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
root     <span class="token number">15664</span> <span class="token number">29045</span>  <span class="token number">0</span> <span class="token number">16</span>:40 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>我们最后给<code>pm.start_servers = 20</code>设置为 20 个</p> <hr> <blockquote><p><code>pm.max_requests</code>是发送多少个请求后会重启该线程，我们需要适当降低这个值，用以让<code>php-fpm</code>自动的释放内存</p></blockquote> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> number of requests each child process should execute before respawning.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">This</span> can be useful to work around memory leaks in <span class="token number">3rd</span> party libraries. For</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">endless</span> request processing specify <span class="token string">'0'</span>. Equivalent to PHP_FCGI_MAX_REQUESTS.</span>
<span class="token punctuation">;</span> Default Value: 0
pm.max_requests = 10240
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <p>开启慢查询</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>slowlog = log/$pool.log.slow
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>设置超时时间 2 秒钟</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>request_slowlog_timeout = 2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>设置最大执行时间</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>request_terminate_timeout = 30
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在<code>php.ini</code>中也可以进行配置(<code>max_execution_time</code>)</p> <p>增加<code>php-fpm</code>打开文件描述符的限制</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>rlimit_files = 65535
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="关于-opache-的一些配置"><a href="#关于-opache-的一些配置" class="header-anchor">#</a> 关于 opache 的一些配置</h2> <blockquote><p>测试环境或者开发环境不建议开，线上环境可以开</p></blockquote> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">zend_extension=opcache.so</span></span>
<span class="token punctuation">;</span>开启opcache
<span class="token directive"><span class="token keyword">opcache.enable=1</span></span>

<span class="token punctuation">;</span>CLI环境下，PHP启用OPcache
<span class="token directive"><span class="token keyword">opcache.enable_cli=1</span></span>

<span class="token punctuation">;</span>OPcache共享内存存储大小,单位MB
<span class="token directive"><span class="token keyword">opcache.memory_consumption=128</span></span>

<span class="token punctuation">;</span>PHP使用了一种叫做字符串驻留（string <span class="token directive"><span class="token keyword">interning）的技术来改善性能。例如，如果你在代码中使用了1000次字符串“foobar”，在PHP内部只会在第一使用这个字符串的时候分配一个不可变的内存区域来存储这个字符串，其他的999次使用都会直接指向这个内存区域。这个选项则会把这个特性提升一个层次——默认情况下这个不可变的内存区域只会存在于单个php-fpm的进程中，如果设置了这个选项，那么它将会在所有的php-fpm进程中共享。在比较大的应用中，这可以非常有效地节约内存，提高应用的性能。</span>
这个选项的值是以兆字节（megabytes）作为单位，如果把它设置为16，则表示16MB，默认是4MB
opcache.interned_strings_buffer=8</span>

<span class="token punctuation">;</span>这个选项用于控制内存中最多可以缓存多少个PHP文件。这个选项必须得设置得足够大，大于你的项目中的所有PHP文件的总和。
设置值取值范围最小值是 <span class="token directive"><span class="token keyword">200，最大值在</span> PHP 5.5.6 之前是 100000，PHP 5.5.6 及之后是 1000000。也就是说在200到1000000之间。
opcache.max_accelerated_files=10000</span>

<span class="token punctuation">;</span>设置缓存的过期时间（单位是秒）,为0的话每次都要检查
<span class="token directive"><span class="token keyword">opcache.revalidate_freq=60</span></span>

<span class="token punctuation">;</span>从字面上理解就是“允许更快速关闭”。它的作用是在单个请求结束时提供一种更快速的机制来调用代码中的析构器，从而加快PHP的响应速度和PHP进程资源的回收速度，这样应用程序可以更快速地响应下一个请求。把它设置为1就可以使用这个机制了。
<span class="token directive"><span class="token keyword">opcache.fast_shutdown=1</span></span>

<span class="token punctuation">;</span>如果启用（设置为1），OPcache会在opcache.revalidate_freq设置的秒数去检测文件的时间戳（timestamp）检查脚本是否更新。
如果这个选项被禁用（设置为0），opcache.revalidate_freq会被忽略，PHP文件永远不会被检查。这意味着如果你修改了你的代码，然后你把它更新到服务器上，再在浏览器上请求更新的代码对应的功能，你会看不到更新的效果
强烈建议你在生产环境中设置为0，更新代码后，再平滑重启PHP和web服务器。
<span class="token directive"><span class="token keyword">opcache.validate_timestamps=0</span></span>

<span class="token punctuation">;</span>开启Opcache File Cache(实验性), 通过开启这个, 我们可以让Opcache把opcode缓存缓存到外部文件中, 对于一些脚本, 会有很明显的性能提升.
这样PHP就会在/tmp目录下Cache一些Opcode的二进制导出文件, 可以跨PHP生命周期存在.
opcache.file_cache=/tmp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="thinkphp-开启二级域名"><a href="#thinkphp-开启二级域名" class="header-anchor">#</a> ThinkPHP 开启二级域名</h2> <p>在<code>nginx</code>对应的设置的<code>php的项目的conf</code>文件加上</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">rewrite</span>  ^(.*)$  /index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>开启二级域名</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /youdomain/</span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span><span class="token punctuation">{</span>
       <span class="token directive"><span class="token keyword">rewrite</span>  ^/youdomain/(.*)$  /youdomain/index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>完整内容</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token comment"># 监听端口号</span>
  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
  <span class="token comment"># 域名</span>
  <span class="token directive"><span class="token keyword">server_name</span> www.php7.tt</span><span class="token punctuation">;</span>
  <span class="token comment"># 网站目录</span>
  <span class="token directive"><span class="token keyword">root</span> /home/web/php7/</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">ssi</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssi_silent_errors</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">index</span> index.php index.html index.htm</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token directive"><span class="token keyword">location</span> ~ \.php$</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment"># nginx 开启rewrite</span>
  <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">rewrite</span>  ^(.*)$  /index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment"># nginx开启二级域名</span>
  <span class="token directive"><span class="token keyword">location</span> /youdomain/</span> <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span><span class="token punctuation">{</span>
             <span class="token directive"><span class="token keyword">rewrite</span>  ^/youdomain/(.*)$  /youdomain/index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token directive"><span class="token keyword">access_log</span> /usr/local/nginx/logs/php7_access.log</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">error_log</span> /usr/local/nginx/logs/php7_error.log</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>或者在<code>ThinkPHP</code>的<code>public</code>目录下的<code>htaccess.conf</code>文件里设置</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token comment">#开启压缩</span>
<span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_buffers</span> <span class="token number">32</span> <span class="token number">4K</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_comp_level</span> <span class="token number">6</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_min_length</span> <span class="token number">200</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_types</span> text/css  application/x-javascript</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_vary</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">rewrite</span>  ^(.*)$  /index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">location</span> /youdomain/</span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span><span class="token punctuation">{</span>
       <span class="token directive"><span class="token keyword">rewrite</span>  ^/youdomain/(.*)$  /youdomain/index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    <span class="token comment">#设置缓存</span>
    <span class="token directive"><span class="token keyword">location</span> ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$</span>
    <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">expires</span>      <span class="token number">30d</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">location</span> ~ .*\.(js|css)?$</span>
    <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">expires</span>      <span class="token number">1h</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="调整-php7-4-配置的一些内容"><a href="#调整-php7-4-配置的一些内容" class="header-anchor">#</a> 调整 PHP7.4 配置的一些内容</h2> <h3 id="pdo-mysql-2"><a href="#pdo-mysql-2" class="header-anchor">#</a> pdo_mysql</h3> <table><thead><tr><th>PDO Driver for MySQL</th> <th>enabled</th></tr></thead> <tbody><tr><td>Client API version</td> <td>mysqlnd 7.4.2</td></tr></tbody></table> <table><thead><tr><th>Directive</th> <th>Local Value</th> <th>Master Value</th></tr></thead> <tbody><tr><td>pdo_mysql.default_socket</td> <td>/tmp/mysql.sock</td> <td>/tmp/mysql.sock</td></tr></tbody></table> <p>可以看到它的<code>socket</code>文件是在<code>/tmp/mysql.sock</code>下，我们需要配置以下<code>php.ini</code>里的存储位置</p> <p>修改<code>php.ini</code></p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Pdo_mysql</span><span class="token punctuation">]</span></span>
<span class="token comment">; Default socket name for local MySQL connects.  If empty, uses the built-in</span>
<span class="token comment">; MySQL defaults.</span>
<span class="token key attr-name">pdo_mysql.default_socket</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/mysql/tmp/mysql.sock</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后重启<code>php-fpm7</code></p> <h2 id="php7-4-安装-swoole-扩展"><a href="#php7-4-安装-swoole-扩展" class="header-anchor">#</a> PHP7.4 安装 swoole 扩展</h2> <p>这里 swoole 的版本我选的是<code>4.4.15</code>，反正只要是<code>x86</code>架构的 LInux 环境下安装，一般都没啥毛病了。</p> <p>还是老样子，下载源码包上传到<code>/usr/local/src</code>目录下并解压</p> <p>然后使用<code>phpize</code>打包</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/bin/phpize</span>
Configuring for:
PHP Api Version:         <span class="token number">20190902</span>
Zend Module Api No:      <span class="token number">20190902</span>
Zend Extension Api No:   <span class="token number">320190902</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># ./configure --enable-openssl --enable-http2 --enable-sockets --enable-mysqlnd --with-php-config=/usr/local/php7/bin/php-config</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后就是编译安装</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装完了，我们可以选择<code>make test</code>一下看看。</p> <p>然后就是将<code>swoole.so</code>扩展加入到<code>php.ini</code>文件中</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># vim /usr/local/php7/etc/php.ini</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># 我们可与i找到 zip.so 在下面添加一下即可</span>

<span class="token key attr-name">extension</span><span class="token punctuation">=</span><span class="token value attr-value">swoole.so</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>检测</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/bin/php --ri swoole</span>


swoole

Swoole <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
Author <span class="token operator">=</span><span class="token operator">&gt;</span> Swoole Team <span class="token operator">&lt;</span>team@swoole.com<span class="token operator">&gt;</span>
Version <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">4.4</span>.15
Built <span class="token operator">=</span><span class="token operator">&gt;</span> Aug <span class="token number">14</span> <span class="token number">2022</span> <span class="token number">18</span>:15:59
coroutine <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
epoll <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
eventfd <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
signalfd <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
cpu_affinity <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
spinlock <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
rwlock <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
sockets <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
openssl <span class="token operator">=</span><span class="token operator">&gt;</span> OpenSSL <span class="token number">1.0</span>.2k-fips  <span class="token number">26</span> Jan <span class="token number">2017</span>
http2 <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
pcre <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
zlib <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1.2</span>.7
mutex_timedlock <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
pthread_barrier <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
futex <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
mysqlnd <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
async_redis <span class="token operator">=</span><span class="token operator">&gt;</span> enabled

Directive <span class="token operator">=</span><span class="token operator">&gt;</span> Local Value <span class="token operator">=</span><span class="token operator">&gt;</span> Master Value
swoole.enable_coroutine <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.enable_library <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.enable_preemptive_scheduler <span class="token operator">=</span><span class="token operator">&gt;</span> Off <span class="token operator">=</span><span class="token operator">&gt;</span> Off
swoole.display_errors <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.use_shortname <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.unixsock_buffer_size <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">8388608</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">8388608</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="安装-composer"><a href="#安装-composer" class="header-anchor">#</a> 安装 composer</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># curl -sS https://getcomposer.org/installer | /usr/local/php7/bin/php</span>
All settings correct <span class="token keyword">for</span> using Composer
Downloading<span class="token punctuation">..</span>.

Composer <span class="token punctuation">(</span>version <span class="token number">2.3</span>.10<span class="token punctuation">)</span> successfully installed to: /usr/local/src/composer.phar
Use it: php composer.phar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>移动到<code>/usr/local/bin</code>下，并为<code>php7</code>添加软链接</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># mv composer.phar /usr/local/bin/composer</span>
<span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># ln -s /usr/local/php7/bin/php /usr/local/bin/php</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>配置阿里云镜像</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">composer</span> config -g repo.packagist <span class="token function">composer</span> https://mirrors.aliyun.com/composer/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果有安装一些<code>swoole</code>框架，可能会需要开放<code>9501</code>端口或别的端口</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">9501</span>/tcp --permanent
systemctl restart firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/sword-demon/edit/master/docs/03.技术/01.技术文档/18.Linux安装PHP7和Swoole扩展.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=Swoole" title="标签">#Swoole</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/08/15, 00:24:24</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/0168e5/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Linux安装MySQL8</div></a> <a href="/pages/0aabbc/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Linux安装配置Nginx</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/0168e5/" class="prev">Linux安装MySQL8</a></span> <span class="next"><a href="/pages/0aabbc/">Linux安装配置Nginx</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/306445/"><div>redis的配置</div></a> <span>03-23</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/1be11b/"><div>redis的 cluster 集群</div></a> <span>03-23</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/bd6f76/"><div>redis缓存设计原理</div></a> <span>03-23</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:2468170366@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/sword-demon" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/wxvirus" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>wxvirus <div>苏ICP备2021007210号-1</div></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.3b9d97f1.js" defer></script><script src="/assets/js/2.5e51705b.js" defer></script><script src="/assets/js/216.abd2662b.js" defer></script>
  </body>
</html>