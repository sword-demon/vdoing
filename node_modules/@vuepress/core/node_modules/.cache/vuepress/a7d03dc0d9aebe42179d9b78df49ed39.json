{"remainingRequest":"/Users/wangxin/workspace/vdoing/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/wangxin/workspace/vdoing/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangxin/workspace/vdoing/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangxin/workspace/vdoing/node_modules/vuepress-plugin-comment/Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangxin/workspace/vdoing/node_modules/vuepress-plugin-comment/Comment.vue","mtime":499162500000},{"path":"/Users/wangxin/workspace/vdoing/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangxin/workspace/vdoing/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangxin/workspace/vdoing/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangxin/workspace/vdoing/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3dhbmd4aW4vd29ya3NwYWNlL3Zkb2luZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7Ci8vCi8vCi8vCi8vCmltcG9ydCB7IHByb3ZpZGVyLCByZW5kZXJDb25maWcsIGxvYWRTY3JpcHQgfSBmcm9tICcuL3V0aWwnOwp2YXIgY29tbWVudERvbUlEID0gJ3Z1ZXByZXNzLXBsdWdpbi1jb21tZW50JzsKdmFyIHRpbWVyID0gbnVsbDsKZXhwb3J0IGRlZmF1bHQgewogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBmcm9udG1hdHRlciA9IF9vYmplY3RTcHJlYWQoewogICAgICAgIHRvOiB7fSwKICAgICAgICBmcm9tOiB7fQogICAgICB9LCBfdGhpcy4kZnJvbnRtYXR0ZXIpOwoKICAgICAgY2xlYXIoKSAmJiBuZWVkQ29tbWVudChmcm9udG1hdHRlcikgJiYgcmVuZGVyQ29tbWVudChmcm9udG1hdHRlcik7CiAgICB9LCAxMDAwKTsKICAgIHRoaXMuJHJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKHRvLCBmcm9tKSB7CiAgICAgIGlmICh0byAmJiBmcm9tICYmIHRvLnBhdGggPT09IGZyb20ucGF0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGZyb250bWF0dGVyID0gX29iamVjdFNwcmVhZCh7CiAgICAgICAgdG86IHRvLAogICAgICAgIGZyb206IGZyb20KICAgICAgfSwgX3RoaXMuJGZyb250bWF0dGVyKTsKCiAgICAgIGNsZWFyKCkgJiYgbmVlZENvbW1lbnQoZnJvbnRtYXR0ZXIpICYmIHJlbmRlckNvbW1lbnQoZnJvbnRtYXR0ZXIpOwogICAgfSk7CiAgfQp9OwovKioKICogQ2xlYXIgbGFzdCBwYWdlIGNvbW1lbnQgZG9tCiAqLwoKZnVuY3Rpb24gY2xlYXIoZnJvbnRtYXR0ZXIpIHsKICBzd2l0Y2ggKENPTU1FTlRfQ0hPT1NFTikgewogICAgY2FzZSAnZ2l0YWxrJzoKICAgICAgcmV0dXJuIHByb3ZpZGVyLmdpdGFsay5jbGVhcihjb21tZW50RG9tSUQpOwoKICAgIGNhc2UgJ3ZhbGluZSc6CiAgICAgIHZhciBlbCA9IENPTU1FTlRfT1BUSU9OUy5lbCB8fCBjb21tZW50RG9tSUQ7CgogICAgICBpZiAoZWwuc3RhcnRzV2l0aCgnIycpKSB7CiAgICAgICAgZWwgPSBlbC5zbGljZSgxKTsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coZWwpOwogICAgICByZXR1cm4gcHJvdmlkZXIudmFsaW5lLmNsZWFyKGVsKTsKCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gZmFsc2U7CiAgfQp9Ci8qKgogKiBDaGVjayBpZiBjdXJyZW50IHBhZ2UgbmVlZHMgcmVuZGVyIGNvbW1lbnQKICovCgoKZnVuY3Rpb24gbmVlZENvbW1lbnQoZnJvbnRtYXR0ZXIpIHsKICByZXR1cm4gZnJvbnRtYXR0ZXIuY29tbWVudCAhPT0gZmFsc2UgJiYgZnJvbnRtYXR0ZXIuY29tbWVudHMgIT09IGZhbHNlOwp9Ci8qKgogKiBSZW5kZXIgY29tbWVudCBkb20gYW5kIGFwcGVuZCBpdCB0byBjb250YWluZXIKICovCgoKZnVuY3Rpb24gcmVuZGVyQ29tbWVudChmcm9udG1hdHRlcikgewogIGNsZWFyVGltZW91dCh0aW1lcik7CiAgdmFyIHBhcmVudERPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoQ09NTUVOVF9DT05UQUlORVIpOwoKICBpZiAoIXBhcmVudERPTSkgewogICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHJlbmRlckNvbW1lbnQoZnJvbnRtYXR0ZXIpOwogICAgfSwgMjAwKTsKICAgIHJldHVybjsKICB9CgogIHN3aXRjaCAoQ09NTUVOVF9DSE9PU0VOKSB7CiAgICBjYXNlICdnaXRhbGsnOgogICAgICByZXR1cm4gcHJvdmlkZXIuZ2l0YWxrLnJlbmRlcihmcm9udG1hdHRlciwgY29tbWVudERvbUlEKTsKCiAgICBjYXNlICd2YWxpbmUnOgogICAgICB2YXIgZWwgPSBDT01NRU5UX09QVElPTlMuZWwgfHwgY29tbWVudERvbUlEOwoKICAgICAgaWYgKGVsLnN0YXJ0c1dpdGgoJyMnKSkgewogICAgICAgIGVsID0gZWwuc2xpY2UoMSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwcm92aWRlci52YWxpbmUucmVuZGVyKGZyb250bWF0dGVyLCBlbCk7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIGZhbHNlOwogIH0KfQ=="},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;AAKA,SACA,QADA,EAEA,YAFA,EAGA,UAHA,QAIA,QAJA;AAMA,IAAA,YAAA,GAAA,yBAAA;AACA,IAAA,KAAA,GAAA,IAAA;AAEA,eAAA;AACA,EAAA,OADA,qBACA;AAAA;;AACA,IAAA,KAAA,GAAA,UAAA,CAAA,YAAA;AACA,UAAA,WAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA;AAFA,SAGA,KAAA,CAAA,YAHA,CAAA;;AAKA,MAAA,KAAA,MAAA,WAAA,CAAA,WAAA,CAAA,IAAA,aAAA,CAAA,WAAA,CAAA;AACA,KAPA,EAOA,IAPA,CAAA;AASA,SAAA,OAAA,CAAA,SAAA,CAAA,UAAA,EAAA,EAAA,IAAA,EAAA;AACA,UAAA,EAAA,IAAA,IAAA,IAAA,EAAA,CAAA,IAAA,KAAA,IAAA,CAAA,IAAA,EAAA;AACA;AACA;;AACA,UAAA,WAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA;AAFA,SAGA,KAAA,CAAA,YAHA,CAAA;;AAKA,MAAA,KAAA,MAAA,WAAA,CAAA,WAAA,CAAA,IAAA,aAAA,CAAA,WAAA,CAAA;AACA,KAVA;AAWA;AAtBA,CAAA;AAyBA;AACA;AACA;;AACA,SAAA,KAAA,CAAA,WAAA,EAAA;AACA,UAAA,eAAA;AACA,SAAA,QAAA;AACA,aAAA,QAAA,CAAA,MAAA,CAAA,KAAA,CAAA,YAAA,CAAA;;AACA,SAAA,QAAA;AACA,UAAA,EAAA,GAAA,eAAA,CAAA,EAAA,IAAA,YAAA;;AACA,UAAA,EAAA,CAAA,UAAA,CAAA,GAAA,CAAA,EAAA;AACA,QAAA,EAAA,GAAA,EAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,MAAA,CAAA,KAAA,CAAA,EAAA,CAAA;;AACA;AAAA,aAAA,KAAA;AAVA;AAYA;AAEA;AACA;AACA;;;AACA,SAAA,WAAA,CAAA,WAAA,EAAA;AACA,SAAA,WAAA,CAAA,OAAA,KAAA,KAAA,IAAA,WAAA,CAAA,QAAA,KAAA,KAAA;AACA;AAEA;AACA;AACA;;;AACA,SAAA,aAAA,CAAA,WAAA,EAAA;AACA,EAAA,YAAA,CAAA,KAAA,CAAA;AAEA,MAAA,SAAA,GAAA,QAAA,CAAA,aAAA,CAAA,iBAAA,CAAA;;AACA,MAAA,CAAA,SAAA,EAAA;AACA,IAAA,KAAA,GAAA,UAAA,CAAA;AAAA,aAAA,aAAA,CAAA,WAAA,CAAA;AAAA,KAAA,EAAA,GAAA,CAAA;AACA;AACA;;AAEA,UAAA,eAAA;AACA,SAAA,QAAA;AACA,aAAA,QAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,YAAA,CAAA;;AACA,SAAA,QAAA;AACA,UAAA,EAAA,GAAA,eAAA,CAAA,EAAA,IAAA,YAAA;;AACA,UAAA,EAAA,CAAA,UAAA,CAAA,GAAA,CAAA,EAAA;AACA,QAAA,EAAA,GAAA,EAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA;;AACA,aAAA,QAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,EAAA,CAAA;;AACA;AAAA,aAAA,KAAA;AATA;AAWA","sourcesContent":["<template>\n  <div></div>\n</template>\n\n<script>\nimport {\n  provider,\n  renderConfig,\n  loadScript,\n} from './util'\n\nconst commentDomID = 'vuepress-plugin-comment' \nlet timer = null\n\nexport default {\n  mounted () {\n    timer = setTimeout(() => {\n      const frontmatter = {\n        to: {},\n        from: {},\n        ...this.$frontmatter\n      }\n      clear() && needComment(frontmatter) && renderComment(frontmatter)\n    }, 1000)\n\n    this.$router.afterEach((to, from) => {\n      if (to && from && to.path === from.path) {\n        return\n      }\n      const frontmatter = {\n        to,\n        from,\n        ...this.$frontmatter\n      }\n      clear() && needComment(frontmatter) && renderComment(frontmatter)\n    })\n  }\n}\n\n/**\n * Clear last page comment dom\n */\nfunction clear (frontmatter) {\n  switch (COMMENT_CHOOSEN) {\n    case 'gitalk': \n      return provider.gitalk.clear(commentDomID)\n    case 'valine': \n      let el = COMMENT_OPTIONS.el || commentDomID\n      if (el.startsWith('#')) {\n        el = el.slice(1)\n      }\n      console.log(el)\n      return provider.valine.clear(el)\n    default: return false\n  }\n}\n\n/**\n * Check if current page needs render comment\n */\nfunction needComment (frontmatter) {\n  return frontmatter.comment !== false && frontmatter.comments !== false\n}\n\n/**\n * Render comment dom and append it to container\n */\nfunction renderComment (frontmatter) {\n  clearTimeout(timer)\n\n  const parentDOM = document.querySelector(COMMENT_CONTAINER)\n  if (!parentDOM) {\n    timer = setTimeout(() => renderComment(frontmatter), 200)\n    return \n  }\n\n  switch (COMMENT_CHOOSEN) {\n    case 'gitalk': \n      return provider.gitalk.render(frontmatter, commentDomID)\n    case 'valine': \n      let el = COMMENT_OPTIONS.el || commentDomID\n      if (el.startsWith('#')) {\n        el = el.slice(1)\n      }\n      return provider.valine.render(frontmatter, el)\n    default: return false\n  }\n}\n</script>\n"],"sourceRoot":"node_modules/vuepress-plugin-comment"}]}