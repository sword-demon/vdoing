(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{526:function(s,a,v){"use strict";v.r(a);var e=v(16),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,v=s._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[v("h1",{attrs:{id:"k8s-上手"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#k8s-上手"}},[s._v("#")]),s._v(" K8S 上手")]),s._v(" "),v("blockquote",[v("p",[s._v("前置：这里使用的是"),v("code",[s._v("Rancher2")]),s._v("搭建的"),v("code",[s._v("K8S")]),s._v("集群来上手。")])]),s._v(" "),v("h2",{attrs:{id:"创建项目、namespace、初步部署-nginx、nodeport"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#创建项目、namespace、初步部署-nginx、nodeport"}},[s._v("#")]),s._v(" 创建项目、namespace、初步部署 nginx、nodeport")]),s._v(" "),v("p",[s._v("进入集群后，导航里有一个"),v("code",[s._v("project/namespace")]),s._v("，项目/命名空间的点开来。")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221111235418401.png",alt:"image-20221111235418401"}})]),s._v(" "),v("ul",[v("li",[v("code",[s._v("namespace")]),s._v("：是对一组资源和对象的抽象集合，用来将系统内部的对象划分为不同的项目组或用户组；常用来隔离不同的用户，比如"),v("code",[s._v("K8S")]),s._v("自带的服务一般运行在"),v("code",[s._v("kube-system namespace")]),s._v("中")])]),s._v(" "),v("hr"),s._v(" "),v("p",[s._v("然后我们点击创建项目，输入项目名称，其他都不选也不填，直接点击创建。")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221111235813759.png",alt:"image-20221111235813759"}})]),s._v(" "),v("p",[s._v("然后点击添加命名空间")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221111235921518.png",alt:"image-20221111235921518"}})]),s._v(" "),v("p",[s._v("就填个名称，然后属于"),v("code",[s._v("myproject")]),s._v("项目，直接创建。")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221112000032683.png",alt:"image-20221112000032683"}})]),s._v(" "),v("p",[s._v("创建完成之后点进去")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221112000059524.png",alt:"image-20221112000059524"}})]),s._v(" "),v("p",[s._v("我们创建的项目就会在"),v("code",[s._v("workloads")]),s._v("里创建。")]),s._v(" "),v("hr"),s._v(" "),v("h3",{attrs:{id:"workload"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#workload"}},[s._v("#")]),s._v(" workload")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221112000158200.png",alt:"image-20221112000158200"}})]),s._v(" "),v("p",[v("code",[s._v("Pod")]),s._v("是所有业务类型的基础，也是"),v("code",[s._v("K8S")]),s._v("管理的最小单位级，可以理解为它是一个或多个容器的组合。")]),s._v(" "),v("p",[s._v("然后我们在"),v("code",[s._v("workloads")]),s._v("里部署一个"),v("code",[s._v("nginx")])]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221112001137847.png",alt:"image-20221112001137847"}})]),s._v(" "),v("p",[s._v("这里的"),v("code",[s._v("Node Scheduling")]),s._v("要选择下面的，自动生成。")]),s._v(" "),v("p",[s._v("然后点击"),v("code",[s._v("Add Port")]),s._v("，输入名称，和容器内的端口，"),v("code",[s._v("nginx")]),s._v("内置的就是 80 端口，规则选择"),v("code",[s._v("TCP")]),s._v("，选择"),v("code",[s._v("NodePort")]),s._v("，最后一个会自动生成一个端口，在"),v("code",[s._v("30000~32767")]),s._v("范围内，在所有节点上开放一个特定的端口，任何发送到该端口的流量都被转发到对应服务。最后点击"),v("code",[s._v("Launch")]),s._v("，也是需要等一会的。")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221112001434322.png",alt:"image-20221112001434322"}})]),s._v(" "),v("p",[s._v("这里它自动帮我们生成了一个随机的端口"),v("code",[s._v("30370/tcp")]),s._v("而且地址是访问的内网地址。")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221112001609973.png",alt:"image-20221112001609973"}})]),s._v(" "),v("p",[s._v("可以看到主节点和另外一个节点都能进行访问。")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221112001648394.png",alt:"image-20221112001648394"}})]),s._v(" "),v("p",[s._v("点进去会发现，这个是部署在"),v("code",[s._v("k8s-node1")]),s._v("节点上的，"),v("code",[s._v("k8s-master1")]),s._v("节点上没有，但是此时 2 个都能进行访问。")]),s._v(" "),v("blockquote",[v("p",[s._v("使用第二台机器的内网地址进行访问，也是可以访问的。")])])])}),[],!1,null,null,null);a.default=t.exports}}]);