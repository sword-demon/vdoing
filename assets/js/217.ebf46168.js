(window.webpackJsonp=window.webpackJsonp||[]).push([[217],{659:function(s,a,e){"use strict";e.r(a);var t=e(16),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"单机安装-redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#单机安装-redis"}},[s._v("#")]),s._v(" 单机安装 redis")]),s._v(" "),e("blockquote",[e("p",[s._v("以"),e("code",[s._v("centos7")]),s._v("系统为例")])]),s._v(" "),e("h2",{attrs:{id:"安装-redis-依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-redis-依赖"}},[s._v("#")]),s._v(" 安装 redis 依赖")]),s._v(" "),e("p",[e("code",[s._v("Redis")]),s._v("是基于 C 语言编写的，因此首先需要安装"),e("code",[s._v("Redis")]),s._v("所需要的"),e("code",[s._v("gcc")]),s._v("依赖")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gcc tcl\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"下载安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载安装"}},[s._v("#")]),s._v(" 下载安装")]),s._v(" "),e("p",[s._v("如果是"),e("code",[s._v("windows")]),s._v("本机，去下载"),e("code",[s._v(".tar.gz")]),s._v("的去上传到"),e("code",[s._v("Linux")]),s._v("服务器上，或者虚拟机上；如果是直接在"),e("code",[s._v("Linux")]),s._v("里操作，可以使用"),e("code",[s._v("wget")]),s._v("去下载对应的包，下载完了解压即可；放到"),e("code",[s._v("/usr/local/src")]),s._v("目录。")]),s._v(" "),e("blockquote",[e("p",[s._v("解压命令")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf redis-6.2.6.tar.gz\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入redis的安装目录 运行编译安装命令")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis-6.2.6\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 等待一段时间")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("如果没有出错，应该就安装成功，默认的安装路径就在"),e("code",[s._v("/usr/local/bin")]),s._v("目录下，进入该目录，其中就会发现"),e("code",[s._v("redis-server")]),s._v("和"),e("code",[s._v("redis-cli")]),s._v("以及"),e("code",[s._v("redis-sentinel")])]),s._v(" "),e("ul",[e("li",[e("code",[s._v("redis-server")]),s._v("：是"),e("code",[s._v("redis")]),s._v("服务端的启动脚本")]),s._v(" "),e("li",[e("code",[s._v("redis-cli")]),s._v("：是"),e("code",[s._v("redis")]),s._v("提供的命令行客户端")]),s._v(" "),e("li",[e("code",[s._v("redis-sentinel")]),s._v("：是"),e("code",[s._v("redis")]),s._v("的哨兵启动脚本")])]),s._v(" "),e("h2",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),e("p",[e("code",[s._v("redis")]),s._v("的启动方式有很多，比如：")]),s._v(" "),e("ul",[e("li",[s._v("默认启动")]),s._v(" "),e("li",[s._v("指定配置启动")]),s._v(" "),e("li",[s._v("开机自启")])]),s._v(" "),e("h3",{attrs:{id:"默认启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#默认启动"}},[s._v("#")]),s._v(" 默认启动")]),s._v(" "),e("p",[s._v("安装完成之后，如果实在"),e("code",[s._v("/usr/local/bin")]),s._v("目录下，那可以在任意目录中使用"),e("code",[s._v("redis-server")]),s._v("等命令来启动")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("redis-server\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221121222151667.png",alt:"image-20221121222151667"}})]),s._v(" "),e("p",[s._v("这种启动属于"),e("code",[s._v("前台启动")]),s._v("，会阻塞整个会话窗口，窗口关闭或者按下"),e("code",[s._v("ctrl + c")]),s._v("就会停止"),e("code",[s._v("redis")]),s._v("，不推荐使用。")]),s._v(" "),e("h3",{attrs:{id:"指定配置启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#指定配置启动"}},[s._v("#")]),s._v(" 指定配置启动")]),s._v(" "),e("p",[s._v("如果要让"),e("code",[s._v("redis")]),s._v("以"),e("code",[s._v("后台")]),s._v("方式启动，则必须修改 "),e("code",[s._v("redis")]),s._v(" 配置文件 ，就在安装目录下的"),e("code",[s._v("redis-6.2.6")]),s._v("下，名字叫"),e("code",[s._v("redis.conf")])]),s._v(" "),e("p",[s._v("我们在修改之前，先备份一份")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" redis.conf redis.conf.bak\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后修改"),e("code",[s._v("redis.conf")]),s._v("文件中的一些配置")]),s._v(" "),e("div",{staticClass:"language-properties line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 监听的地址，默认是 127.0.0.1 会导致只能再本地访问，修改为0.0.0.0 可以在任意IP访问，生产环境不建议修改")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("bind")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("0.0.0.0")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 守护进程 修改为 yes 之后即可后台运行")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("daemonize")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("yes")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密码 设置后访问redis需要输入密码")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("requirepass")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("123456")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("其他常见配置")]),s._v(" "),e("div",{staticClass:"language-properties line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 监听的端口")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("port")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("6379")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工作目录 默认是当前目录 也就是运行redis-server时的命令，日志、持久化等文件都会保存到这个目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("dir")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v(".")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库数量，设置为1，代表只使用一个库，默认有16个库，编号0~15")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("database")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置redis能够使用最大的内存")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("maxmemory")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("512mb")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志文件，默认为空，不记录日志，可以指定日志文件名")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("logfile")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"redis.log"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("启动，进入当前目录执行命令")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("redis-server redis.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看是否有进程启动")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("501")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8355")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 六12上午 ??  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":57.04 redis-server "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.1:6379\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("就可以看到有进程启动了")]),s._v(" "),e("blockquote",[e("p",[s._v("停止服务")])]),s._v(" "),e("p",[s._v("可以使用"),e("code",[s._v("kill")]),s._v("命令找到刚才的进程 ID，杀死进程即可，或者可以使用"),e("code",[s._v("redis-cli")]),s._v("来执行"),e("code",[s._v("shutdown")]),s._v("命令")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("redis-cli -u 密码 "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"设置开机自启"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自启"}},[s._v("#")]),s._v(" 设置开机自启")]),s._v(" "),e("p",[s._v("首先新建一个系统服务文件")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/systemd/system/redis.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-ini line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token header"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("Unit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("Description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("redis-server")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("After")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("network.target")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token header"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("Service")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("foking")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("ExecStart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/usr/local/bin/redis-server /usr/local/src/redis-6.2.6/redis.conf")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("PrivateTmp")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("true")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token header"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("Install")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("WantedBy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("multi-user.target")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("保存之后让它生效，然后重载系统服务")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("systemctl daemon-reload\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("来启动"),e("code",[s._v("redis")]),s._v("服务")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("systemctl start redis\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("通过")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("systemctl status redis\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("来查看"),e("code",[s._v("redis")]),s._v("的启动状态。")]),s._v(" "),e("p",[s._v("通过"),e("code",[s._v("systemctl stop redis")]),s._v("停止服务，通过"),e("code",[s._v("systemctl restart redis")]),s._v("重启服务")]),s._v(" "),e("p",[s._v("通过")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" redis\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("来设置开机自启。")])])}),[],!1,null,null,null);a.default=n.exports}}]);